import{W as C,g as $}from"./vendor-vue-C6le94gM.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-DiJRBPRF.js";import{u as A}from"./useInitials-DzeGKvtI.js";import{C as I,A as B,P as L,c as P,h as z,d as D,i as O,j as q,k as V,l as k}from"./vendor-icons-Bu7C1ObZ.js";import{c as h,L as c,e as o,X as e,l,u as n,M as p,N as j,U as i,b2 as g,S as _,b as F,k as W,a1 as Z,f as H}from"./vendor-cgn9wV4E.js";import"./vendor-axios-C0Zqfgkc.js";import"./utils-C4uCeQPu.js";import"./vendor-ui-BuPyOEYe.js";import"./Icon.vue_vue_type_script_setup_true_lang-g5QrAIpa.js";import"./app-CwVxJaic.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BM02NuXb.js";import"./Button.vue_vue_type_script_setup_true_lang-DA-5a5tM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"flex items-center space-x-2"},U={class:"border rounded-full px-3 py-1 text-sm flex items-center"},X=["onClick"],E={__name:"DateFilterSwitcher",props:{driverID:{type:Number,required:!0},driver:{type:Object,required:!0},tenantSlug:{type:String,default:null}},setup(t){const s=t,f=[{label:"All Time",value:"full"},{label:"Quarterly",value:"quarterly"},{label:"T6W",value:"6w"},{label:"WTD",value:"current-week"},{label:"Yesterday",value:"yesterday"}],u=h(()=>s.driver.dateFilter??"full");function x(m){if(m===u.value)return;const v=s.tenantSlug?{tenantSlug:s.tenantSlug,driver:s.driverID,dateFilter:m}:{driver:s.driverID,dateFilter:m},a=s.tenantSlug?"driver.show":"driver.show.admin";C.visit(route(a,v),{preserveScroll:!0,only:["driver"]})}return(m,v)=>(o(),c("div",M,[e("div",U,[l(n(I),{class:"mr-2 h-4 w-4"}),v[0]||(v[0]=e("span",null,"Filter:",-1))]),(o(),c(p,null,j(f,a=>e("button",{key:a.value,onClick:S=>x(a.value),class:g(["border rounded-full px-3 py-1 text-sm transition-colors",{"bg-primary/10 border-primary/30 text-primary":u.value===a.value,"hover:bg-muted/20":u.value!==a.value}])},i(a.label),11,X)),64))]))}},G={class:"min-h-screen bg-background p-4 md:p-6"},Q={class:"mb-4"},R={class:"container max-w-6xl mx-auto"},Y={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6"},J={class:"flex items-center border rounded-full px-3 py-1 text-sm mt-2 md:mt-0"},K={class:"bg-card rounded-lg border border-muted/30 shadow-sm"},ee={class:"flex flex-col md:flex-row gap-6 p-6"},te={class:"md:w-1/3 flex flex-col items-center space-y-4"},re={class:"relative"},se={class:"w-32 h-32 rounded-full overflow-hidden border-2 border-primary"},ie=["src"],ne={key:1,class:"w-full h-full bg-muted/20 flex items-center justify-center"},le={class:"text-3xl font-bold text-primary"},de={class:"absolute -bottom-2 left-1/2 transform -translate-x-1/2"},oe={class:"px-2 py-1 text-sm font-bold bg-primary text-white rounded-full text-center"},ae={class:"text-center mt-6 space-y-2"},ce={class:"text-xl font-bold"},ue={class:"flex items-center justify-center text-muted-foreground"},me={class:"flex items-center justify-center text-muted-foreground"},ve={class:"pt-4"},fe={class:"font-medium"},xe={class:"md:w-2/3 space-y-6"},be={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ge={class:"bg-primary/10 border border-primary/20 rounded-lg p-4"},he={class:"flex items-center"},ye={class:"text-2xl font-bold mt-2 text-primary"},_e={class:"bg-success/10 border border-success/20 rounded-lg p-4"},pe={class:"flex items-center"},Se={class:"bg-warning/10 border border-warning/20 rounded-lg p-4"},we={class:"flex items-center"},De={class:"bg-success/10 border border-success/20 rounded-lg p-4"},ke={class:"flex justify-between items-center"},Ce={class:"font-semibold text-success flex items-center"},Ie={class:"mt-2 h-2 w-full bg-success/20 rounded-full overflow-hidden"},je={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fe={class:"border rounded-lg p-4"},Te={class:"flex items-center justify-between"},$e={class:"flex items-center"},Ne={class:"text-2xl font-bold"},Ae={class:"border rounded-lg p-4"},Be={class:"flex items-center justify-between"},Le={class:"flex items-center"},Pe={class:"text-2xl font-bold"},ze={class:"border rounded-lg"},Oe={class:"border-b p-4"},qe={class:"font-semibold flex items-center"},Ve={class:"p-4 space-y-3"},We={class:"flex items-center"},Ze={class:"bg-destructive/10 text-destructive rounded-full w-8 h-8 flex items-center justify-center mr-3"},He={class:"font-bold"},Me={key:1,class:"border border-dashed border-muted/40 bg-muted/10 text-center text-muted-foreground rounded-lg p-8"},Ue={__name:"DriverProfileComponent",props:{driver:{type:Object,required:!0},tenantSlug:String,initialFilter:{type:String,default:"full"},driverID:Number},setup(t){const s=t,{getInitials:f}=A(),u=h(()=>s.tenantSlug?route("driver.index",{tenantSlug:s.tenantSlug}):route("driver.index.admin"));function x(){u.value&&C.get(u.value)}function m(d){switch(d){case"speeding":return"Speeding";case"distraction":return"Distracted Driving";case"sign":return"Sign Violation";case"light":return"Traffic Light Violation";case"following":return"Following Distance";default:return d}}const v=d=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(d),a=h(()=>s.driver.last_updated?v(new Date(s.driver.last_updated)):"-");function S(d){const[r,y,b]=d.split("-");return`${y}/${b}/${r}`}const w=d=>d>=75?"text-green-600":d>=50?"text-amber-600":"text-red-600",T=d=>d>=900?"text-green-600":d>=750?"text-emerald-600":d>=600?"text-blue-600":"text-red-600";return(d,r)=>(o(),c("div",G,[e("div",Q,[e("button",{onClick:x,class:"inline-flex items-center text-sm text-primary hover:underline"},[l(n(B),{class:"h-4 w-4 mr-1"}),r[0]||(r[0]=_(" Back "))])]),e("div",R,[e("div",Y,[r[1]||(r[1]=e("div",null,[e("h1",{class:"text-2xl font-bold"},"Driver Profile"),e("p",{class:"text-muted-foreground mt-1"},"Detailed performance metrics")],-1)),e("div",J,[l(n(I),{class:"mr-1 h-4 w-4"}),e("span",null,"Last updated: "+i(a.value),1)]),t.driverID?(o(),F(E,{key:0,driver:t.driver,tenantSlug:t.tenantSlug,driverID:t.driverID},null,8,["driver","tenantSlug","driverID"])):W("",!0)]),e("div",K,[e("div",ee,[e("div",te,[e("div",re,[e("div",se,[t.driver.image?(o(),c("img",{key:0,src:t.driver.image,alt:"Driver",class:"w-full h-full object-cover object-center"},null,8,ie)):(o(),c("div",ne,[e("div",le,i(n(f)(t.driver.name)),1)]))]),e("div",de,[e("div",oe," Rank #"+i(t.driver.rank),1)])]),e("div",ae,[e("h2",ce,i(t.driver.name),1),e("div",ue,[l(n(L),{class:"mr-2 h-4 w-4"}),e("span",null,"+1 "+i(t.driver.phone),1)]),e("div",me,[l(n(P),{class:"mr-2 h-4 w-4"}),e("span",null,i(t.driver.email),1)]),e("div",ve,[r[2]||(r[2]=e("div",{class:"text-sm text-muted-foreground"},"Hire Date",-1)),e("div",fe,i(S(t.driver.hireDate)),1)])])]),e("div",xe,[t.driver.rank>0?(o(),c(p,{key:0},[e("div",be,[e("div",ge,[e("div",he,[l(n(z),{class:"mr-2 h-5 w-5 text-primary"}),r[3]||(r[3]=e("h3",{class:"font-semibold text-primary"},"Overall Score",-1))]),e("div",ye,i(t.driver.overall_score),1)]),e("div",_e,[e("div",pe,[l(n(D),{class:"mr-2 h-5 w-5 text-success"}),r[4]||(r[4]=e("h3",{class:"font-semibold text-success"},"On-Time Score",-1))]),e("div",{class:g(["text-2xl font-bold mt-2 text-success",w(t.driver.on_time_score)])},i(t.driver.on_time_score)+"% ",3)]),e("div",Se,[e("div",we,[l(n(O),{class:"mr-2 h-5 w-5 text-warning"}),r[5]||(r[5]=e("h3",{class:"font-semibold text-warning"},"Acceptance Score",-1))]),e("div",{class:g(["text-2xl font-bold mt-2 text-warning",w(t.driver.acceptance_score)])},i(t.driver.acceptance_score)+"% ",3)])]),e("div",De,[e("div",ke,[e("h3",Ce,[l(n(q),{class:"mr-2 h-5 w-5"}),r[6]||(r[6]=_(" Green Zone Score "))]),e("div",{class:g(["text-2xl font-bold text-success",T(t.driver.greenZoneScore)])},i(t.driver.greenZoneScore),3)]),e("div",Ie,[e("div",{class:"h-full bg-success rounded-full",style:Z({width:`${t.driver.greenZoneScore}%`})},null,4)])]),e("div",je,[e("div",Fe,[e("div",Te,[e("div",$e,[l(n(D),{class:"mr-2 h-5 w-5 text-blue-500"}),r[7]||(r[7]=e("div",null,[e("h3",{class:"font-semibold"},"Minutes Analyzed"),e("p",{class:"text-sm text-muted-foreground"},"Total driving time analyzed")],-1))]),e("div",Ne,i(t.driver.minutesAnalyzed),1)])]),e("div",Ae,[e("div",Be,[e("div",Le,[l(n(V),{class:"mr-2 h-5 w-5 text-indigo-500"}),r[8]||(r[8]=e("div",null,[e("h3",{class:"font-semibold"},"# of Trips"),e("p",{class:"text-sm text-muted-foreground"},"Completed trips")],-1))]),e("div",Pe,i(t.driver.trips),1)])])]),e("div",ze,[e("div",Oe,[e("h3",qe,[l(n(k),{class:"mr-2 h-5 w-5 text-destructive"}),r[9]||(r[9]=_(" Safety Alerts "))])]),e("div",Ve,[(o(!0),c(p,null,j(t.driver.infractions,(y,b)=>(o(),c("div",{key:b,class:"flex justify-between items-center py-2 border-b border-muted/20 last:border-0"},[e("div",We,[e("div",Ze,[l(n(k),{class:"h-4 w-4"})]),e("span",null,i(m(b)),1)]),e("span",He,i(y),1)]))),128))])])],64)):(o(),c("div",Me,r[10]||(r[10]=[e("h2",{class:"text-xl font-semibold mb-2"},"No data available",-1),e("p",null,"This driver has no performance data for the selected date filter.",-1)])))])])])])]))}},nt={__name:"Show",props:{driver:Object,tenantSlug:String,permissions:Array,driverID:Number},setup(t){const s=t,f=h(()=>[{title:s.tenantSlug?"Dashboard":"Admin Dashboard",href:s.tenantSlug?route("dashboard",{tenantSlug:s.tenantSlug}):route("admin.dashboard")},{title:"Drivers",href:s.tenantSlug?route("driver.index",{tenantSlug:s.tenantSlug}):route("driver.index.admin")},{title:s.driver.name,href:"#"}]);return(u,x)=>(o(),F(N,{breadcrumbs:f.value,tenantSlug:t.tenantSlug,permissions:t.permissions},{default:H(()=>[l(n($),{title:"Driver Profile"}),l(Ue,{driver:t.driver,tenantSlug:t.tenantSlug,driverID:t.driverID},null,8,["driver","tenantSlug","driverID"])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}};export{nt as default};
