import{x as Ce,a as Vt,W as le,g as Yt}from"./vendor-vue-C6le94gM.js";import{_ as Ht}from"./AppLayout.vue_vue_type_script_setup_true_lang-DnFOFWBn.js";import{d as H,r as O,A as Ge,K as Ke,c as P,w as ze,L as c,e as r,b,k as _,X as s,l as e,f as l,u as t,S as o,U as x,P as te,ak as It,D as Y,Y as J,M as E,N as q,bF as _t,b2 as ve,bI as Ct,bH as Dt,C as Gt,O as Kt,n as Zt,j as Jt}from"./vendor-cgn9wV4E.js";import{_ as f}from"./Icon.vue_vue_type_script_setup_true_lang-g5QrAIpa.js";import{_ as $e,a as Se,b as Q,c as B,d as he,e as F}from"./TableRow.vue_vue_type_script_setup_true_lang-58J5Q7id.js";import{_ as D}from"./Button.vue_vue_type_script_setup_true_lang-DA-5a5tM.js";import{_ as De}from"./Card.vue_vue_type_script_setup_true_lang-DQTQMX6v.js";import{_ as Ot}from"./CardHeader.vue_vue_type_script_setup_true_lang-n-Rvhb9V.js";import{_ as Mt}from"./CardTitle.vue_vue_type_script_setup_true_lang-AShXP1uR.js";import{_ as Ae}from"./CardContent.vue_vue_type_script_setup_true_lang-DNXZ8J1r.js";import{_ as de,a as ue,b as me}from"./DialogDescription.vue_vue_type_script_setup_true_lang-BDOQqQHy.js";import{_ as pe,a as fe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-K_t0Wv0O.js";import{_ as we}from"./DialogFooter.vue_vue_type_script_setup_true_lang-C4cZ_wVx.js";import{_ as R}from"./Label.vue_vue_type_script_setup_true_lang-WOFpmVDV.js";import{_ as G}from"./Input.vue_vue_type_script_setup_true_lang-1zH_gJ02.js";import{_ as Ie,a as Oe,b as Me}from"./AlertDescription.vue_vue_type_script_setup_true_lang-BdYx0SaG.js";import{_ as Ze}from"./Badge.vue_vue_type_script_setup_true_lang-BpieHD20.js";import{_ as kt}from"./SortIndicator-pqdQrfEL.js";import{D as At}from"./app-DdEjr71t.js";import"./vendor-axios-C0Zqfgkc.js";import"./utils-C4uCeQPu.js";import"./vendor-ui-BuPyOEYe.js";import"./useInitials-DzeGKvtI.js";import"./vendor-icons-Bu7C1ObZ.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BM02NuXb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Xt={class:"w-full pt-6 md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto p-1 space-y-6"},es={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6 space-y-2 sm:space-y-0"},ts={class:"flex items-center gap-3"},ss={class:"flex flex-wrap gap-3"},ls={class:"flex justify-between items-center"},ns={class:"text-sm hidden sm:inline"},as={class:"flex flex-col gap-6"},os={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full"},rs={class:"relative"},is={class:"relative"},ds={class:"overflow-x-auto"},us={class:"flex items-center justify-center"},ms=["checked"],ps={class:"flex items-center space-x-1"},fs={key:4,class:"ml-2"},vs={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},cs={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},gs={key:5,class:"ml-2 opacity-50"},xs={class:"flex flex-col items-center justify-center text-muted-foreground"},ys=["value"],ws={class:"flex space-x-2"},bs={class:"border-t bg-muted/20 px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-2"},ks={class:"flex items-center gap-4 text-sm text-muted-foreground"},_s={class:"flex items-center gap-1"},$s={class:"flex items-center gap-1"},Ss={class:"relative"},hs=["value"],Cs={class:"flex space-x-1"},Ds={class:"flex items-center gap-2"},As={key:0,class:"col-span-2 sm:col-span-1"},Vs={class:"relative"},Is=["value"],Os={class:"col-span-2 sm:col-span-1"},Ms={class:"col-span-2 sm:col-span-1"},Fs={class:"relative"},Ts={class:"col-span-2 sm:col-span-1"},Ns={class:"relative"},Us={class:"col-span-2 sm:col-span-1"},Bs={class:"relative"},Ps={class:"col-span-2 sm:col-span-1"},Es={class:"col-span-2 sm:col-span-1"},Rs={class:"col-span-2 sm:col-span-1"},zs={class:"relative"},Ls={class:"col-span-2 sm:col-span-1"},qs={class:"relative"},Ws={class:"col-span-2 mt-4 flex justify-end gap-3"},js={class:"flex items-center gap-2"},Qs={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},Ys={key:0},Hs={class:"space-y-4"},Gs={class:"cursor-pointer mt-3"},Ks=["disabled"],Zs={key:0,class:"mt-3 text-xs text-primary font-medium"},Js={class:"flex items-center gap-2 text-sm text-muted-foreground"},Xs=["href"],el={key:0,class:"flex items-center justify-center gap-2 p-4"},tl={key:1,class:"space-y-4"},sl={key:0,class:"rounded-lg border p-3"},ll={class:"flex items-center justify-between"},nl={class:"text-xs text-muted-foreground"},al={class:"mt-2 flex flex-wrap gap-2"},ol={class:"grid grid-cols-3 gap-4"},rl={class:"text-2xl font-bold"},il={class:"text-2xl font-bold text-green-600"},dl={class:"text-2xl font-bold text-red-600"},ul={key:2},ml={class:"flex items-center justify-between mb-3"},pl={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},fl={class:"border rounded-lg overflow-hidden"},vl={class:"max-h-96 overflow-y-auto"},cl={class:"flex flex-wrap gap-x-3 gap-y-1"},gl={class:"font-medium text-foreground"},xl={key:0,class:"italic text-muted-foreground"},yl={class:"space-y-1"},wl={key:0,class:"text-xs text-muted-foreground"},bl={key:3},kl={class:"text-lg font-semibold text-green-600 flex items-center gap-2 mb-3"},_l={class:"border rounded-lg overflow-hidden"},$l={class:"flex flex-wrap gap-x-3 gap-y-1"},Sl={class:"font-medium"},hl={key:0,class:"italic text-muted-foreground"},Cl={class:"border-t p-4 flex justify-end gap-3"},Dl={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Al=H({__name:"TrucksComponent",props:{entries:{},tenantSlug:{},SuperAdmin:{type:Boolean},tenants:{},perPage:{},permissions:{}},emits:["update:perPage"],setup(L,{emit:d}){const u=L,w=O({search:"",type:"",make:""}),A=O("truckid"),m=O("asc"),n=O(1),i=O(10),g=O(10),$=O([]),C=O(!1),T=O(""),N=O(""),Z=O(!1),ne=O(!1),ae=O(!1),X=O(null),ce=O(!1),ee=O(!1),V=Ce({id:null,truckid:null,type:"daycab",make:"international",fuel:"diesel",license:null,vin:"",tenant_id:u.SuperAdmin?"":null,status:"active",inspection_status:"good",inspection_expiry_date:new Date().toISOString().split("T")[0]});Ce({csv_file:null});const oe=O(null),re=Vt(),se=O(!1),z=O(null),S=O(!1),k=O(!1),I=O(null),j=O(!1);let W=0;Ge(()=>{const y=a=>a.preventDefault();window.addEventListener("dragover",y),window.addEventListener("drop",y),Ke(()=>{window.removeEventListener("dragover",y),window.removeEventListener("drop",y)})});const Ve=P(()=>u.entries.filter(y=>{var a,v;return!(w.value.search&&!String(y.truckid).includes(w.value.search)&&!(y.vin||"").toLowerCase().includes(w.value.search.toLowerCase())||w.value.type&&((a=y.type)==null?void 0:a.toLowerCase())!=w.value.type||w.value.make&&((v=y.make)==null?void 0:v.toLowerCase())!=w.value.make)})),Pe=P(()=>[...Ve.value].sort((y,a)=>{let v=y[A.value],U=a[A.value];return v==null?1:U==null?-1:(typeof v=="string"&&(v=v.toLowerCase(),U=U.toLowerCase()),v<U?m.value==="asc"?-1:1:v>U?m.value==="asc"?1:-1:0)})),be=P(()=>Math.ceil(Pe.value.length/i.value)),ge=P(()=>{const y=(n.value-1)*i.value,a=y+i.value;return Pe.value.slice(y,a)}),Te=P(()=>ge.value.length>0&&ge.value.every(y=>$.value.includes(y.id))),Ne=["truckid","type","make","fuel","license","vin","inspection_status","inspection_expiry_date","status"];ze(T,y=>y&&setTimeout(()=>T.value="",5e3)),ze(i,y=>{g.value=y});function Je(y){return y.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())}function Fe(y){return y?new Date(y+"T00:00:00").toLocaleDateString():"—"}function Le(y,a){if(a==="inspection_status")return y.inspection_status==="good"?"Good":"Expired";if(a==="inspection_expiry_date")return Fe(y[a]);if(a==="fuel"&&y.fuel==="cng")return"CNG";const v=y[a];return typeof v=="string"?v.charAt(0).toUpperCase()+v.slice(1):v}const xe=()=>{n.value=1};function Xe(){w.value={search:"",type:"",make:""},xe()}function et(y){A.value===y?m.value=m.value==="asc"?"desc":"asc":(A.value=y,m.value="asc")}const tt=()=>{i.value=g.value,xe()},Ee=y=>{y>=1&&y<=be.value&&(n.value=y)};function st(y){y.target.checked?ge.value.forEach(v=>{$.value.includes(v.id)||$.value.push(v.id)}):$.value=$.value.filter(v=>!ge.value.some(U=>U.id===v))}function lt(){V.reset(),V.clearErrors(),V.id=null,Z.value=!0}function qe(y){V.reset(),V.clearErrors(),V.id=y.id,V.truckid=y.truckid,V.type=y.type?y.type.toLowerCase():"",V.make=y.make?y.make.toLowerCase():"",V.fuel=y.fuel,V.license=y.license,V.vin=y.vin,V.status=y.status,V.tenant_id=y.tenant_id,V.inspection_status=y.inspection_status||"good",V.inspection_expiry_date=y.inspection_expiry_date||new Date().toISOString().split("T")[0],Z.value=!0}function nt(){Z.value=!1}function We(){const y={...V.data(),truckid:Number(V.truckid),license:Number(V.license)},a=V.id?"put":"post",v=V.id?u.SuperAdmin?route("truck.update.admin",[V.id]):route("truck.update",[u.tenantSlug,V.id]):route(u.SuperAdmin?"truck.store.admin":"truck.store",{tenantSlug:u.tenantSlug});ce.value=!0,V[a](v,{data:y,onSuccess:()=>{T.value=V.id?"Truck updated.":"Truck created.",nt()},onError:()=>N.value="Save failed",onFinish:()=>ce.value=!1})}function at(y){X.value=y,ne.value=!0}function ot(){if(!X.value)return;const y=u.SuperAdmin?route("truck.destroy.admin",[X.value.id]):route("truck.destroy",[u.tenantSlug,X.value.id]);V.delete(y,{onSuccess:()=>{T.value="Deleted successfully",ne.value=!1}})}function Ue(){$.value.length&&(ae.value=!0)}function rt(){const y=route(u.SuperAdmin?"truck.destroyBulk.admin":"truck.destroyBulk",{tenantSlug:u.tenantSlug});Ce({ids:$.value}).delete(y,{onSuccess:()=>{T.value=`${$.value.length} deleted`,$.value=[],ae.value=!1}})}function it(){var y,a;if(!ge.value.length){N.value="No data to export";return}(y=oe.value)==null||y.setAttribute("action",route(u.SuperAdmin?"truck.export.admin":"truck.export",{tenantSlug:u.tenantSlug})),(a=oe.value)==null||a.submit()}const dt=P(()=>"/storage/upload-data-temps/Trucks Template.csv");function ut(y){var U;const a=y.target,v=(U=a.files)==null?void 0:U[0];v&&(je(v),a.value="")}function je(y){if(!y)return;if(!(y.type==="text/csv"||y.name.toLowerCase().endsWith(".csv")||y.type==="")){N.value="Please upload a valid CSV file.",setTimeout(()=>N.value="",4e3);return}S.value=!0;const v=new FormData;v.append("file",y);const U=u.SuperAdmin?route("truck.validateImport.admin"):route("truck.validateImport",{tenantSlug:u.tenantSlug});le.post(U,v,{forceFormData:!0,preserveScroll:!0,onFinish:()=>{S.value=!1},onError:()=>{S.value=!1,N.value="Failed to validate CSV file"}})}function mt(){W+=1,j.value=!0}function pt(){j.value=!0}function ft(){W-=1,W<=0&&(W=0,j.value=!1)}function vt(y){var v,U;W=0,j.value=!1;const a=(U=(v=y.dataTransfer)==null?void 0:v.files)==null?void 0:U[0];a&&je(a)}function ct(){var a;if(!z.value||z.value.header_error||(((a=z.value.summary)==null?void 0:a.invalid)??0)>0)return;k.value=!0;const y=u.SuperAdmin?route("truck.confirmImport.admin"):route("truck.confirmImport",{tenantSlug:u.tenantSlug});le.post(y,{},{preserveScroll:!0,onSuccess:()=>{var v;T.value=`Successfully imported ${((v=z.value.summary)==null?void 0:v.valid)??0} rows`,Qe()},onError:()=>{N.value="Import failed"},onFinish:()=>{k.value=!1}})}function gt(){const y=u.SuperAdmin?route("truck.downloadErrorReport.admin"):route("truck.downloadErrorReport",{tenantSlug:u.tenantSlug});window.location.href=y}function Qe(){se.value=!1,z.value=null,S.value=!1,k.value=!1,j.value=!1,W=0,I.value&&(I.value.value="")}ze(()=>{var y;return(y=re.props.flash)==null?void 0:y.importValidation},y=>{if(y){if(y.results){z.value=y.results,y.header_error&&(z.value.header_error=y.header_error),se.value=!0;return}y.message&&(N.value=y.message)}},{immediate:!1});const xt=P(()=>{if(be.value<=7)return Array.from({length:be.value},(U,Be)=>Be+1);const y=[];y.push(1),n.value>3&&y.push("...");const a=Math.max(2,n.value-1),v=Math.min(be.value-1,n.value+1);for(let U=a;U<=v;U++)y.push(U);return n.value<be.value-2&&y.push("..."),be.value>1&&y.push(be.value),y}),ie=P(()=>u.permissions.map(y=>y.name));return Ge(()=>{const y=a=>{C.value&&!a.target.closest(".relative")&&(C.value=!1)};document.addEventListener("click",y),Ke(()=>document.removeEventListener("click",y))}),(y,a)=>(r(),c("div",Xt,[T.value?(r(),b(t(Me),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:l(()=>[e(t(Ie),{class:"flex items-center gap-2"},{default:l(()=>[e(f,{name:"check_circle",class:"h-5 w-5 text-green-500"}),a[25]||(a[25]=o(" Success "))]),_:1}),e(t(Oe),null,{default:l(()=>[o(x(T.value),1)]),_:1})]),_:1})):_("",!0),N.value?(r(),b(t(Me),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:l(()=>[e(t(Ie),{class:"flex items-center gap-2"},{default:l(()=>[e(f,{name:"alert_circle",class:"h-5 w-5"}),a[26]||(a[26]=o(" Error "))]),_:1}),e(t(Oe),null,{default:l(()=>[o(x(N.value),1)]),_:1})]),_:1})):_("",!0),s("div",es,[s("div",ts,[e(f,{name:"truck",class:"h-6 w-6 text-primary hidden sm:block"}),a[27]||(a[27]=s("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Truck Management ",-1))]),s("div",ss,[ie.value.includes("trucks.create")?(r(),b(t(D),{key:0,onClick:lt,variant:"default",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),a[28]||(a[28]=o(" Create New Truck "))]),_:1})):_("",!0),$.value.length&&ie.value.includes("trucks.delete")?(r(),b(t(D),{key:1,onClick:Ue,variant:"destructive",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),o(" Delete Selected ("+x($.value.length)+") ",1)]),_:1})):_("",!0),ie.value.includes("trucks.import")?(r(),b(t(D),{key:2,onClick:a[0]||(a[0]=v=>se.value=!0),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),a[29]||(a[29]=o(" Import CSV "))]),_:1})):_("",!0),ie.value.includes("trucks.export")?(r(),b(t(D),{key:3,onClick:te(it,["prevent"]),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),a[30]||(a[30]=o(" Download CSV "))]),_:1})):_("",!0)])]),e(t(De),{class:"shadow-sm border"},{default:l(()=>[e(t(Ot),{class:"p-2 md:p-4 lg:p-6 border-b"},{default:l(()=>[s("div",ls,[e(t(Mt),{class:"text-lg md:text-xl lg:text-2xl flex items-center gap-2"},{default:l(()=>[e(f,{name:"filter",class:"h-5 w-5 text-muted-foreground"}),a[31]||(a[31]=o(" Filters "))]),_:1}),e(t(D),{variant:"ghost",size:"sm",onClick:a[1]||(a[1]=v=>ee.value=!ee.value),class:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors"},{default:l(()=>[s("span",ns,x(ee.value?"Hide Filters":"Show Filters"),1),e(f,{name:ee.value?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),e(It,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[500px]","leave-from-class":"opacity-100 max-h-[500px]","leave-to-class":"opacity-0 max-h-0"},{default:l(()=>[ee.value?(r(),b(t(Ae),{key:0,class:"p-4 md:p-6 lg:p-8 overflow-hidden"},{default:l(()=>[s("div",as,[s("div",os,[s("div",null,[e(t(R),{for:"search",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[e(f,{name:"search",class:"h-4 w-4 text-muted-foreground"}),a[32]||(a[32]=o(" Search "))]),_:1}),e(t(G),{id:"search",type:"text",modelValue:w.value.search,"onUpdate:modelValue":a[2]||(a[2]=v=>w.value.search=v),placeholder:"Search by truck ID or VIN...",onInput:xe,class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10"},null,8,["modelValue"])]),s("div",null,[e(t(R),{for:"type",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[e(f,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),a[33]||(a[33]=o(" Type "))]),_:1}),s("div",rs,[Y(s("select",{id:"type","onUpdate:modelValue":a[3]||(a[3]=v=>w.value.type=v),onChange:xe,class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},a[34]||(a[34]=[s("option",{value:""},"All Types",-1),s("option",{value:"daycab"},"Daycab",-1),s("option",{value:"sleepercab"},"Sleepercab",-1)]),544),[[J,w.value.type]]),a[35]||(a[35]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",null,[e(t(R),{for:"make",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[e(f,{name:"tag",class:"h-4 w-4 text-muted-foreground"}),a[36]||(a[36]=o(" Make "))]),_:1}),s("div",is,[Y(s("select",{id:"make","onUpdate:modelValue":a[4]||(a[4]=v=>w.value.make=v),onChange:xe,class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},a[37]||(a[37]=[s("option",{value:""},"All Makes",-1),s("option",{value:"international"},"International",-1),s("option",{value:"kenworth"},"Kenworth",-1),s("option",{value:"peterbilt"},"Peterbilt",-1),s("option",{value:"volvo"},"Volvo",-1),s("option",{value:"freightliner"},"Freightliner",-1)]),544),[[J,w.value.make]]),a[38]||(a[38]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),e(t(D),{onClick:Xe,variant:"ghost",size:"sm",class:"self-start"},{default:l(()=>[e(f,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),a[39]||(a[39]=o(" Reset Filters "))]),_:1})])]),_:1})):_("",!0)]),_:1})]),_:1}),e(t(De),{class:"mx-auto max-w-[90vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto shadow-sm border"},{default:l(()=>[e(t(Ae),{class:"p-0"},{default:l(()=>[s("div",ds,[e(t($e),{class:"relative h-[500px] overflow-auto"},{default:l(()=>[e(t(Se),null,{default:l(()=>[e(t(Q),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:l(()=>[ie.value.includes("trucks.delete")?(r(),b(t(B),{key:0,class:"w-12"},{default:l(()=>[s("div",us,[s("input",{type:"checkbox",checked:Te.value,onChange:st,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ms)])]),_:1})):_("",!0),y.SuperAdmin?(r(),b(t(B),{key:1,class:"font-semibold"},{default:l(()=>a[40]||(a[40]=[o("Company")])),_:1})):_("",!0),(r(),c(E,null,q(Ne,v=>e(t(B),{key:v,onClick:U=>et(v),class:"cursor-pointer font-semibold"},{default:l(()=>[s("div",ps,[v==="inspection_status"?(r(),c(E,{key:0},[o("Annual Inspection Status")],64)):v==="inspection_expiry_date"?(r(),c(E,{key:1},[o(" Annual Inspection Expiration Date ")],64)):v==="status"?(r(),c(E,{key:2},[o("Status")],64)):(r(),c(E,{key:3},[o(x(Je(v)),1)],64)),A.value===v?(r(),c("div",fs,[m.value==="asc"?(r(),c("svg",vs,a[41]||(a[41]=[s("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(r(),c("svg",cs,a[42]||(a[42]=[s("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(r(),c("div",gs,a[43]||(a[43]=[s("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M8 10l4-4 4 4"}),s("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),ie.value.includes("trucks.update")||ie.value.includes("trucks.delete")?(r(),b(t(B),{key:2,class:"font-semibold"},{default:l(()=>a[44]||(a[44]=[o(" Actions ")])),_:1})):_("",!0)]),_:1})]),_:1}),e(t(he),null,{default:l(()=>[ge.value.length?_("",!0):(r(),b(t(Q),{key:0},{default:l(()=>[e(t(F),{colspan:y.SuperAdmin?Ne.length+3:Ne.length+2,class:"py-8 text-center"},{default:l(()=>[s("div",xs,[e(f,{name:"search_x",class:"h-12 w-12 mb-2 opacity-30"}),a[45]||(a[45]=s("p",null,"No trucks found matching your criteria.",-1))])]),_:1},8,["colspan"])]),_:1})),(r(!0),c(E,null,q(ge.value,v=>(r(),b(t(Q),{key:v.id,class:"hover:bg-muted/50"},{default:l(()=>[ie.value.includes("trucks.delete")?(r(),b(t(F),{key:0,class:"text-center"},{default:l(()=>[Y(s("input",{type:"checkbox",value:v.id,"onUpdate:modelValue":a[5]||(a[5]=U=>$.value=U),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,ys),[[_t,$.value]])]),_:2},1024)):_("",!0),y.SuperAdmin?(r(),b(t(F),{key:1},{default:l(()=>{var U;return[o(x(((U=v.tenant)==null?void 0:U.name)||"—"),1)]}),_:2},1024)):_("",!0),(r(),c(E,null,q(Ne,U=>e(t(F),{key:U,class:"whitespace-nowrap"},{default:l(()=>[U==="status"?(r(),c("span",{key:0,class:ve({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":v[U]==="active","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":v[U]==="inactive","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":v[U]==="Returned to AMZ"})},x(Le(v,U)),3)):U==="inspection_status"?(r(),c("span",{key:1,class:ve({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":v[U]==="good","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":v[U]==="expired"})},x(v[U]==="good"?"Good":"Expired"),3)):(r(),c(E,{key:2},[o(x(Le(v,U)),1)],64))]),_:2},1024)),64)),ie.value.includes("trucks.delete")||ie.value.includes("trucks.update")?(r(),b(t(F),{key:2},{default:l(()=>[s("div",ws,[ie.value.includes("trucks.update")?(r(),b(t(D),{key:0,variant:"warning",size:"sm",onClick:U=>qe(v),class:"shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"pencil",class:"mr-1 h-4 w-4"}),a[46]||(a[46]=o(" Edit "))]),_:2},1032,["onClick"])):_("",!0),ie.value.includes("trucks.delete")?(r(),b(t(D),{key:1,variant:"destructive",size:"sm",onClick:U=>at(v),class:"shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"trash",class:"mr-1 h-4 w-4"}),a[47]||(a[47]=o(" Delete "))]),_:2},1032,["onClick"])):_("",!0)])]),_:2},1024)):_("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),s("div",bs,[s("div",ks,[s("span",_s,[e(f,{name:"list",class:"h-4 w-4"}),o(" Showing "+x(ge.value.length)+" of "+x(Pe.value.length)+" entries ",1)]),s("span",$s,[e(f,{name:"layout-grid",class:"h-4 w-4"}),a[48]||(a[48]=o(" Per page: "))]),s("div",Ss,[Y(s("select",{"onUpdate:modelValue":a[6]||(a[6]=v=>g.value=v),onChange:tt,class:"h-8 appearance-none rounded-md border bg-background px-2 py-1 text-sm focus:ring-2 focus:ring-ring"},[(r(),c(E,null,q([10,25,50,100],v=>s("option",{key:v,value:v},x(v),9,hs)),64))],544),[[J,g.value,void 0,{number:!0}]]),a[49]||(a[49]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Cs,[e(t(D),{size:"sm",variant:"ghost",onClick:a[7]||(a[7]=v=>Ee(n.value-1)),disabled:n.value===1,class:"flex items-center gap-1"},{default:l(()=>[e(f,{name:"chevron-left",class:"h-4 w-4"}),a[50]||(a[50]=o(" Prev "))]),_:1},8,["disabled"]),(r(!0),c(E,null,q(xt.value,v=>(r(),b(t(D),{key:String(v),size:"sm",variant:"ghost",onClick:U=>typeof v=="number"?Ee(v):null,disabled:typeof v!="number",class:ve({"border-primary bg-primary/10 text-primary font-medium":v===n.value,"opacity-60 cursor-default":typeof v!="number"})},{default:l(()=>[o(x(v),1)]),_:2},1032,["onClick","disabled","class"]))),128)),e(t(D),{size:"sm",variant:"ghost",onClick:a[8]||(a[8]=v=>Ee(n.value+1)),disabled:n.value===be.value,class:"flex items-center gap-1"},{default:l(()=>[a[51]||(a[51]=o(" Next ")),e(f,{name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),_:1})]),_:1}),e(t(me),{open:Z.value,"onUpdate:open":a[19]||(a[19]=v=>Z.value=v)},{default:l(()=>[e(t(de),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:l(()=>[e(t(pe),{class:"px-4 sm:px-6 border-b pb-4"},{default:l(()=>[s("div",Ds,[e(f,{name:t(V).id?"pencil":"plus-circle",class:"h-5 w-5 text-primary"},null,8,["name"]),e(t(fe),{class:"text-lg sm:text-xl"},{default:l(()=>[o(x(t(V).id?"Edit Truck":"Create Truck"),1)]),_:1})]),e(t(ue),{class:"text-xs sm:text-sm mt-1"},{default:l(()=>[o(" Fill in the details to "+x(t(V).id?"update":"create")+" a truck. ",1)]),_:1})]),_:1}),s("form",{onSubmit:te(We,["prevent"]),class:"grid max-h-[75vh] grid-cols-1 gap-4 overflow-y-auto p-4 sm:grid-cols-2 sm:gap-5 sm:p-6"},[a[74]||(a[74]=s("div",{class:"col-span-2 mb-2 border-b pb-2"},[s("h3",{class:"text-sm font-medium text-muted-foreground"},"Basic Information")],-1)),y.SuperAdmin?(r(),c("div",As,[e(t(R),{for:"tenant",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[e(f,{name:"building",class:"h-4 w-4 text-muted-foreground"}),a[52]||(a[52]=o(" Company Name "))]),_:1}),s("div",Vs,[Y(s("select",{id:"tenant","onUpdate:modelValue":a[9]||(a[9]=v=>t(V).tenant_id=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[a[53]||(a[53]=s("option",{value:""},"Select Company",-1)),(r(!0),c(E,null,q(y.tenants,v=>(r(),c("option",{key:v.id,value:v.id},x(v.name),9,Is))),128))],512),[[J,t(V).tenant_id]]),a[54]||(a[54]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):_("",!0),s("div",Os,[e(t(R),{for:"truckid",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[e(f,{name:"hash",class:"h-4 w-4 text-muted-foreground"}),a[55]||(a[55]=o(" Truck ID "))]),_:1}),e(t(G),{id:"truckid",modelValue:t(V).truckid,"onUpdate:modelValue":a[10]||(a[10]=v=>t(V).truckid=v),modelModifiers:{number:!0},type:"number",required:"",placeholder:"Enter truck ID number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),s("div",Ms,[e(t(R),{for:"type",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[e(f,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),a[56]||(a[56]=o(" Type "))]),_:1}),s("div",Fs,[Y(s("select",{id:"type","onUpdate:modelValue":a[11]||(a[11]=v=>t(V).type=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},a[57]||(a[57]=[s("option",{value:"daycab"},"Daycab",-1),s("option",{value:"sleepercab"},"Sleepercab",-1)]),512),[[J,t(V).type]]),a[58]||(a[58]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Ts,[e(t(R),{for:"make",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[e(f,{name:"tag",class:"h-4 w-4 text-muted-foreground"}),a[59]||(a[59]=o(" Make "))]),_:1}),s("div",Ns,[Y(s("select",{id:"make","onUpdate:modelValue":a[12]||(a[12]=v=>t(V).make=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},a[60]||(a[60]=[s("option",{value:"international"},"International",-1),s("option",{value:"kenworth"},"Kenworth",-1),s("option",{value:"peterbilt"},"Peterbilt",-1),s("option",{value:"volvo"},"Volvo",-1),s("option",{value:"freightliner"},"Freightliner",-1)]),512),[[J,t(V).make]]),a[61]||(a[61]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),a[75]||(a[75]=s("div",{class:"col-span-2 mt-2 mb-2 border-b pb-2"},[s("h3",{class:"text-sm font-medium text-muted-foreground"}," Additional Information ")],-1)),s("div",Us,[e(t(R),{for:"fuel",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[e(f,{name:"fuel",class:"h-4 w-4 text-muted-foreground"}),a[62]||(a[62]=o(" Fuel "))]),_:1}),s("div",Bs,[Y(s("select",{id:"fuel","onUpdate:modelValue":a[13]||(a[13]=v=>t(V).fuel=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},a[63]||(a[63]=[s("option",{value:"diesel"},"Diesel",-1),s("option",{value:"cng"},"CNG",-1)]),512),[[J,t(V).fuel]]),a[64]||(a[64]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Ps,[e(t(R),{for:"license",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[e(f,{name:"id_card",class:"h-4 w-4 text-muted-foreground"}),a[65]||(a[65]=o(" License "))]),_:1}),e(t(G),{id:"license",modelValue:t(V).license,"onUpdate:modelValue":a[14]||(a[14]=v=>t(V).license=v),modelModifiers:{number:!0},type:"number",min:"0",required:"",placeholder:"Enter license number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),s("div",Es,[e(t(R),{for:"vin",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[e(f,{name:"fingerprint",class:"h-4 w-4 text-muted-foreground"}),a[66]||(a[66]=o(" VIN "))]),_:1}),e(t(G),{id:"vin",modelValue:t(V).vin,"onUpdate:modelValue":a[15]||(a[15]=v=>t(V).vin=v),type:"text",required:"",placeholder:"Enter vehicle identification number",class:"transition-shadow hover:shadow-sm focus:shadow-sm"},null,8,["modelValue"])]),a[76]||(a[76]=s("div",{class:"col-span-2 mt-2 mb-2 border-b pb-2"},[s("h3",{class:"text-sm font-medium text-muted-foreground"},"Inspection Details")],-1)),s("div",Rs,[e(t(R),{for:"inspection_status",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[e(f,{name:"clipboard_check",class:"h-4 w-4 text-muted-foreground"}),a[67]||(a[67]=o(" Annual Inspection Status "))]),_:1}),s("div",zs,[Y(s("select",{id:"inspection_status","onUpdate:modelValue":a[16]||(a[16]=v=>t(V).inspection_status=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},a[68]||(a[68]=[s("option",{value:"good"},"Good",-1),s("option",{value:"expired"},"Expired",-1)]),512),[[J,t(V).inspection_status]]),a[69]||(a[69]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Ls,[e(t(R),{for:"status",class:"flex items-center gap-1.5 mb-1.5"},{default:l(()=>[e(f,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),a[70]||(a[70]=o(" Status "))]),_:1}),s("div",qs,[Y(s("select",{id:"status","onUpdate:modelValue":a[17]||(a[17]=v=>t(V).status=v),required:"",class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-shadow hover:shadow-sm focus:shadow-sm"},a[71]||(a[71]=[s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1),s("option",{value:"Returned to AMZ"},"Returned to AMZ",-1)]),512),[[J,t(V).status]]),a[72]||(a[72]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Ws,[e(t(D),{type:"button",variant:"outline",onClick:a[18]||(a[18]=v=>Z.value=!1),class:"transition-all hover:shadow-sm"},{default:l(()=>[e(f,{name:"x",class:"mr-2 h-4 w-4"}),a[73]||(a[73]=o(" Cancel "))]),_:1}),e(t(D),{type:"submit",variant:"default",class:"transition-all hover:shadow-sm"},{default:l(()=>[e(f,{name:t(V).id?"pencil":"plus",class:"mr-2 h-4 w-4"},null,8,["name"]),o(" "+x(t(V).id?"Update":"Create"),1)]),_:1})])],32)]),_:1})]),_:1},8,["open"]),e(t(me),{open:ne.value,"onUpdate:open":a[21]||(a[21]=v=>ne.value=v)},{default:l(()=>[e(t(de),null,{default:l(()=>[e(t(pe),null,{default:l(()=>[e(t(fe),null,{default:l(()=>a[77]||(a[77]=[o("Confirm Deletion")])),_:1}),e(t(ue),null,{default:l(()=>a[78]||(a[78]=[o(" Are you sure you want to delete this truck? This action cannot be undone. ")])),_:1})]),_:1}),e(t(we),{class:"mt-4"},{default:l(()=>[e(t(D),{variant:"outline",onClick:a[20]||(a[20]=v=>ne.value=!1)},{default:l(()=>a[79]||(a[79]=[o("Cancel")])),_:1}),e(t(D),{variant:"destructive",onClick:ot},{default:l(()=>a[80]||(a[80]=[o("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e(t(me),{open:ae.value,"onUpdate:open":a[23]||(a[23]=v=>ae.value=v)},{default:l(()=>[e(t(de),null,{default:l(()=>[e(t(pe),null,{default:l(()=>[e(t(fe),null,{default:l(()=>a[81]||(a[81]=[o("Confirm Bulk Deletion")])),_:1}),e(t(ue),null,{default:l(()=>[o(" Are you sure you want to delete "+x($.value.length)+" trucks? This action cannot be undone. ",1)]),_:1})]),_:1}),e(t(we),{class:"mt-4"},{default:l(()=>[e(t(D),{variant:"outline",onClick:a[22]||(a[22]=v=>ae.value=!1)},{default:l(()=>a[82]||(a[82]=[o("Cancel")])),_:1}),e(t(D),{variant:"destructive",onClick:rt},{default:l(()=>a[83]||(a[83]=[o("Delete Selected")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e(t(me),{open:se.value,"onUpdate:open":a[24]||(a[24]=v=>se.value=v)},{default:l(()=>[e(t(de),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:l(()=>{var v,U,Be;return[e(t(pe),{class:"px-4 sm:px-6 border-b pb-3"},{default:l(()=>[s("div",js,[e(f,{name:"upload",class:"h-5 w-5 text-primary"}),e(t(fe),{class:"text-lg sm:text-xl font-semibold"},{default:l(()=>a[84]||(a[84]=[o(" Import Trucks ")])),_:1})]),e(t(ue),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:l(()=>a[85]||(a[85]=[o(" Upload a CSV file to import trucks. The file will be validated before import. ")])),_:1})]),_:1}),s("div",Qs,[z.value?(r(),c("div",tl,[(v=z.value.headers)!=null&&v.length?(r(),c("div",sl,[s("div",ll,[a[90]||(a[90]=s("div",{class:"text-sm font-semibold"},"CSV Headers",-1)),s("div",nl,x(z.value.headers.length)+" columns ",1)]),s("div",al,[(r(!0),c(E,null,q(z.value.headers,K=>(r(),c("span",{key:K,class:"rounded-full bg-muted px-2 py-0.5 text-xs"},x(K),1))),128))])])):_("",!0),s("div",ol,[e(t(De),{class:"border-2"},{default:l(()=>[e(t(Ae),{class:"p-4 text-center"},{default:l(()=>[s("div",rl,x(z.value.summary.total),1),a[91]||(a[91]=s("div",{class:"text-sm text-muted-foreground"},"Total Rows",-1))]),_:1})]),_:1}),e(t(De),{class:"border-2 border-green-500/50 bg-green-50 dark:bg-green-900/10"},{default:l(()=>[e(t(Ae),{class:"p-4 text-center"},{default:l(()=>[s("div",il,x(z.value.summary.valid),1),a[92]||(a[92]=s("div",{class:"text-sm text-muted-foreground"},"Valid",-1))]),_:1})]),_:1}),e(t(De),{class:"border-2 border-red-500/50 bg-red-50 dark:bg-red-900/10"},{default:l(()=>[e(t(Ae),{class:"p-4 text-center"},{default:l(()=>[s("div",dl,x(z.value.summary.invalid),1),a[93]||(a[93]=s("div",{class:"text-sm text-muted-foreground"},"Invalid",-1))]),_:1})]),_:1})]),z.value.header_error?(r(),b(t(Me),{key:1,variant:"destructive"},{default:l(()=>[e(t(Ie),{class:"flex items-center gap-2"},{default:l(()=>[e(f,{name:"alert_circle",class:"h-5 w-5"}),a[94]||(a[94]=o(" Header Error "))]),_:1}),e(t(Oe),null,{default:l(()=>[o(x(z.value.header_error),1)]),_:1})]),_:1})):_("",!0),(U=z.value.invalid)!=null&&U.length?(r(),c("div",ul,[s("div",ml,[s("h3",pl,[e(f,{name:"alert-triangle",class:"h-5 w-5"}),o(" Validation Errors ("+x(z.value.invalid.length)+") ",1)]),e(t(D),{onClick:gt,variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:l(()=>[e(f,{name:"download",class:"h-4 w-4"}),a[95]||(a[95]=o(" Download Error Report "))]),_:1})]),s("div",fl,[s("div",vl,[e(t($e),null,{default:l(()=>[e(t(Se),{class:"sticky top-0 bg-background"},{default:l(()=>[e(t(Q),null,{default:l(()=>[e(t(B),{class:"w-20"},{default:l(()=>a[96]||(a[96]=[o("Row #")])),_:1}),e(t(B),null,{default:l(()=>a[97]||(a[97]=[o("Preview")])),_:1}),e(t(B),null,{default:l(()=>a[98]||(a[98]=[o("Errors")])),_:1})]),_:1})]),_:1}),e(t(he),null,{default:l(()=>[(r(!0),c(E,null,q(z.value.invalid,K=>(r(),b(t(Q),{key:K.rowNumber,class:"hover:bg-muted/50"},{default:l(()=>[e(t(F),{class:"font-medium"},{default:l(()=>[o(x(K.rowNumber),1)]),_:2},1024),e(t(F),{class:"text-sm text-muted-foreground"},{default:l(()=>{var ke;return[s("div",cl,[(r(!0),c(E,null,q(K.preview||[],ye=>(r(),c("span",{key:ye.key,class:"whitespace-nowrap"},[s("span",gl,x(ye.label)+":",1),o(" "+x(ye.value),1)]))),128)),(ke=K.preview)!=null&&ke.length?_("",!0):(r(),c("span",xl,"—"))])]}),_:2},1024),e(t(F),null,{default:l(()=>{var ke;return[s("div",yl,[(r(!0),c(E,null,q(K.errors||[],(ye,yt)=>(r(),c("div",{key:yt,class:"text-xs text-red-600 flex items-start gap-1"},[e(f,{name:"x-circle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),s("span",null,x(ye),1)]))),128)),(ke=K.errors)!=null&&ke.length?_("",!0):(r(),c("div",wl," — "))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):_("",!0),(Be=z.value.valid)!=null&&Be.length?(r(),c("div",bl,[s("h3",kl,[e(f,{name:"check-circle",class:"h-5 w-5"}),o(" Valid Rows ("+x(z.value.valid.length)+") ",1)]),a[101]||(a[101]=s("div",{class:"text-sm text-muted-foreground mb-2"}," Showing first 5 valid rows ",-1)),s("div",_l,[e(t($e),null,{default:l(()=>[e(t(Se),null,{default:l(()=>[e(t(Q),null,{default:l(()=>[e(t(B),null,{default:l(()=>a[99]||(a[99]=[o("Row #")])),_:1}),e(t(B),null,{default:l(()=>a[100]||(a[100]=[o("Preview")])),_:1})]),_:1})]),_:1}),e(t(he),null,{default:l(()=>[(r(!0),c(E,null,q(z.value.valid.slice(0,5),K=>(r(),b(t(Q),{key:K.rowNumber},{default:l(()=>[e(t(F),{class:"font-medium"},{default:l(()=>[o(x(K.rowNumber),1)]),_:2},1024),e(t(F),{class:"text-sm"},{default:l(()=>{var ke;return[s("div",$l,[(r(!0),c(E,null,q(K.preview||[],ye=>(r(),c("span",{key:ye.key,class:"whitespace-nowrap"},[s("span",Sl,x(ye.label)+":",1),o(" "+x(ye.value),1)]))),128)),(ke=K.preview)!=null&&ke.length?_("",!0):(r(),c("span",hl,"—"))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])):_("",!0)])):(r(),c("div",Ys,[s("div",Hs,[s("div",{class:ve(["flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20 transition-colors",{"border-primary bg-primary/5":j.value,"opacity-60 pointer-events-none":S.value}]),onDragenter:te(mt,["prevent"]),onDragover:te(pt,["prevent"]),onDragleave:te(ft,["prevent"]),onDrop:te(vt,["prevent"])},[e(f,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),a[87]||(a[87]=s("div",{class:"text-center"},[s("div",{class:"text-sm font-medium"},[s("span",{class:"text-primary"},"Drag & drop"),o(" your CSV here ")]),s("p",{class:"text-xs text-muted-foreground mt-1"},"or")],-1)),s("label",Gs,[a[86]||(a[86]=s("span",{class:"text-sm font-medium text-primary hover:underline"}," Choose CSV file ",-1)),s("input",{ref_key:"importFileInput",ref:I,type:"file",class:"hidden",onChange:ut,accept:".csv,text/csv",disabled:S.value},null,40,Ks)]),a[88]||(a[88]=s("p",{class:"text-xs text-muted-foreground mt-2"},"CSV only",-1)),j.value?(r(),c("div",Zs," Drop file to validate ")):_("",!0)],34),s("div",Js,[e(f,{name:"info",class:"h-4 w-4"}),s("a",{href:dt.value,download:"",class:"text-primary hover:underline"}," Download CSV Template ",8,Xs)]),S.value?(r(),c("div",el,a[89]||(a[89]=[s("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),s("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):_("",!0)])]))]),s("div",Cl,[e(t(D),{onClick:Qe,variant:"outline",disabled:k.value},{default:l(()=>a[102]||(a[102]=[o(" Close ")])),_:1},8,["disabled"]),z.value&&z.value.summary.valid>0?(r(),b(t(D),{key:0,onClick:ct,variant:"default",disabled:k.value||z.value.summary.invalid>0||!!z.value.header_error,class:"flex items-center gap-2"},{default:l(()=>[k.value?(r(),c("div",Dl)):(r(),b(f,{key:1,name:"check",class:"h-4 w-4"})),o(" "+x(k.value?"Importing...":`Import ${z.value.summary.valid} Rows`),1)]),_:1},8,["disabled"])):_("",!0)])]}),_:1})]),_:1},8,["open"]),s("form",{ref_key:"exportForm",ref:oe,method:"GET",class:"hidden"},null,512)]))}}),Vl=H({__name:"AlertsSection",props:{successMessage:{},errorMessage:{}},setup(L){return(d,u)=>(r(),c(E,null,[d.successMessage?(r(),b(t(Me),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:l(()=>[e(t(Ie),{class:"flex items-center gap-2"},{default:l(()=>[e(f,{name:"check_circle",class:"h-5 w-5 text-green-500"}),u[0]||(u[0]=o(" Success "))]),_:1}),e(t(Oe),null,{default:l(()=>[o(x(d.successMessage),1)]),_:1})]),_:1})):_("",!0),d.errorMessage?(r(),b(t(Me),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:l(()=>[e(t(Ie),{class:"flex items-center gap-2"},{default:l(()=>[e(f,{name:"alert_circle",class:"h-5 w-5"}),u[1]||(u[1]=o(" Error "))]),_:1}),e(t(Oe),null,{default:l(()=>[o(x(d.errorMessage),1)]),_:1})]),_:1})):_("",!0)],64))}}),Il={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6 space-y-2 sm:space-y-0"},Ol={class:"flex items-center gap-3"},Ml={class:"flex flex-wrap gap-3"},Fl=H({__name:"ActionsBar",props:{permissionNames:{},selectedIds:{},isAdmin:{type:Boolean}},emits:["openCreateModal","confirmBulkDelete","openAreasModal","openVendorsModal","openStatusModal","openImportModal","exportCsv"],setup(L){return(d,u)=>(r(),c("div",Il,[s("div",Ol,[e(f,{name:"clipboard-list",class:"h-6 w-6 text-primary hidden sm:block"}),u[7]||(u[7]=s("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Repair Orders ",-1))]),s("div",Ml,[d.permissionNames.includes("repair-orders.create")?(r(),b(t(D),{key:0,onClick:u[0]||(u[0]=w=>d.$emit("openCreateModal")),variant:"default",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),u[8]||(u[8]=o(" Create New "))]),_:1})):_("",!0),d.selectedIds.length&&d.permissionNames.includes("repair-orders.delete")?(r(),b(t(D),{key:1,onClick:u[1]||(u[1]=w=>d.$emit("confirmBulkDelete")),variant:"destructive",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),o(" Delete Selected ("+x(d.selectedIds.length)+") ",1)]),_:1})):_("",!0),d.isAdmin?(r(),b(t(D),{key:2,onClick:u[2]||(u[2]=w=>d.$emit("openAreasModal")),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),u[9]||(u[9]=o(" Areas "))]),_:1})):_("",!0),d.isAdmin?(r(),b(t(D),{key:3,onClick:u[3]||(u[3]=w=>d.$emit("openVendorsModal")),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),u[10]||(u[10]=o(" Vendors "))]),_:1})):_("",!0),d.isAdmin?(r(),b(t(D),{key:4,onClick:u[4]||(u[4]=w=>d.$emit("openStatusModal")),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"settings",class:"mr-1 h-4 w-4 md:mr-2"}),u[11]||(u[11]=o(" Statuses "))]),_:1})):_("",!0),d.permissionNames.includes("repair-orders.import")?(r(),b(t(D),{key:5,onClick:u[5]||(u[5]=w=>d.$emit("openImportModal")),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),u[12]||(u[12]=o(" Import CSV "))]),_:1})):_("",!0),d.permissionNames.includes("repair-orders.export")?(r(),b(t(D),{key:6,onClick:u[6]||(u[6]=te(w=>d.$emit("exportCsv"),["prevent"])),variant:"outline",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:l(()=>[e(f,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),u[13]||(u[13]=o(" Download CSV "))]),_:1})):_("",!0)])]))}}),Tl={key:0,class:"mb-6"},Nl={class:"rounded-md border-l-4 border-red-500 bg-red-50 p-4 shadow-sm dark:border-red-400 dark:bg-red-900/30"},Ul={class:"flex items-center"},Bl={class:"flex-shrink-0"},Pl={class:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100 dark:bg-red-800"},El={class:"ml-3"},Rl={class:"mt-1 text-sm text-red-700 dark:text-red-200"},zl={class:"mt-2"},Ll=H({__name:"CanceledQSInvoicesAlert",props:{hasCanceledQSInvoices:{type:Boolean},SuperAdmin:{type:Boolean},permissionNames:{},canceledQSInvoices:{}},emits:["openDialog"],setup(L){return(d,u)=>{var w;return d.hasCanceledQSInvoices&&!d.SuperAdmin&&d.permissionNames.includes("repair-orders.update")?(r(),c("div",Tl,[s("div",Nl,[s("div",Ul,[s("div",Bl,[s("div",Pl,[e(f,{name:"triangleAlert",class:"h-6 w-6 text-red-600 dark:text-red-300"})])]),s("div",El,[u[2]||(u[2]=s("h3",{class:"text-lg font-medium text-red-800 dark:text-red-300"}," Attention Required ",-1)),s("div",Rl,x(((w=d.canceledQSInvoices)==null?void 0:w.length)||0)+" invoices found with canceled WO status but still on QS. These need immediate attention. ",1),s("div",zl,[e(t(D),{onClick:u[0]||(u[0]=A=>d.$emit("openDialog")),variant:"destructive",size:"sm"},{default:l(()=>u[1]||(u[1]=[o(" View Details ")])),_:1})])])])])])):_("",!0)}}}),ql={class:"flex flex-wrap gap-2"},Wl={key:0,class:"text-sm text-muted-foreground mt-2"},jl={key:0},Ql={key:1},Yl={key:2},Hl={key:3,class:"ml-1"},Gl=H({__name:"DateFilterTabs",props:{dateOptions:{},filter:{},dateRange:{},dateFilter:{},weekNumberText:{},formatDate:{type:Function}},emits:["selectDate"],setup(L){return(d,u)=>(r(),b(t(De),{class:"shadow-sm border bg-card"},{default:l(()=>[e(t(Ae),{class:"p-3 md:p-4"},{default:l(()=>[s("div",ql,[(r(!0),c(E,null,q(d.dateOptions,w=>(r(),b(t(D),{key:w.value,size:"sm",variant:"outline",class:ve({"border-primary bg-primary/10 text-primary":d.filter.dateFilter===w.value}),onClick:A=>d.$emit("selectDate",w.value)},{default:l(()=>[o(x(w.label),1)]),_:2},1032,["class","onClick"]))),128))]),d.dateRange?(r(),c("div",Wl,[d.dateFilter==="yesterday"&&d.dateRange.start?(r(),c("span",jl," Showing data from "+x(d.formatDate(d.dateRange.start)),1)):d.dateRange.start&&d.dateRange.end?(r(),c("span",Ql," Showing data from "+x(d.formatDate(d.dateRange.start))+" to "+x(d.formatDate(d.dateRange.end)),1)):(r(),c("span",Yl,x(d.dateRange.label),1)),d.weekNumberText?(r(),c("span",Hl,"("+x(d.weekNumberText)+")",1)):_("",!0)])):_("",!0)]),_:1})]),_:1}))}}),Kl={class:"mx-auto mb-6 grid max-w-[95vw] grid-cols-1 gap-4 md:max-w-[64vw] md:grid-cols-2 lg:max-w-full"},Zl={class:"rounded-lg border bg-card shadow-sm"},Jl={class:"p-4"},Xl={class:"space-y-3"},en={class:"text-sm"},tn={key:0,class:"text-center text-muted-foreground"},sn={class:"rounded-lg border bg-card shadow-sm"},ln={class:"p-4"},nn={class:"space-y-3"},an={class:"text-sm"},on={key:0,class:"text-center text-muted-foreground"},rn=H({__name:"TopPanels",props:{topAreasOfConcern:{},topWorkOrdersByTruck:{}},setup(L){return(d,u)=>(r(),c("div",Kl,[s("div",Zl,[u[1]||(u[1]=s("div",{class:"border-b p-4"},[s("h3",{class:"text-lg font-semibold"},"Top 5 Frequent Repairs")],-1)),s("div",Jl,[s("ul",Xl,[u[0]||(u[0]=s("div",{class:"flex items-center justify-between"},[s("span",{class:"text-sm"},"Parts:"),s("span",{class:"text-sm"},"Work Orders:")],-1)),(r(!0),c(E,null,q(d.topAreasOfConcern,(w,A)=>(r(),c("li",{key:A,class:"flex items-center justify-between pr-4"},[s("span",en,x(w.concern),1),e(t(Ze),{variant:"outline"},{default:l(()=>[o(x(w.count),1)]),_:2},1024)]))),128)),d.topAreasOfConcern.length===0?(r(),c("li",tn," No data available ")):_("",!0)])])]),s("div",sn,[u[3]||(u[3]=s("div",{class:"border-b p-4"},[s("h3",{class:"text-lg font-semibold"},"Top 5 Frequently Repaired Tractors")],-1)),s("div",ln,[s("ul",nn,[u[2]||(u[2]=s("div",{class:"flex items-center justify-between"},[s("span",{class:"text-sm"},"Asset ID:"),s("span",{class:"text-sm"},"Work Orders:")],-1)),(r(!0),c(E,null,q(d.topWorkOrdersByTruck,(w,A)=>(r(),c("li",{key:A,class:"flex items-center justify-between pr-4"},[s("span",an,x(w.truckid),1),e(t(Ze),{variant:"outline"},{default:l(()=>[o(x(w.work_order_count),1)]),_:2},1024)]))),128)),d.topWorkOrdersByTruck.length===0?(r(),c("li",on," No data available ")):_("",!0)])])])]))}}),dn={class:"mx-auto mb-6 max-w-[90vw] overflow-x-auto rounded-lg border bg-card p-4 shadow-sm md:max-w-[64vw] lg:max-w-full"},un={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},mn=H({__name:"OutstandingInvoicesFilter",props:{minInvoiceAmount:{},outstandingDate:{}},emits:["update:minInvoiceAmount","update:outstandingDate"],setup(L,{emit:d}){const u=L,w=d,A=P({get:()=>u.minInvoiceAmount,set:n=>w("update:minInvoiceAmount",n)}),m=P({get:()=>u.outstandingDate,set:n=>w("update:outstandingDate",n)});return(n,i)=>(r(),c("div",dn,[i[4]||(i[4]=s("h3",{class:"mb-4 text-lg font-semibold"},"Outstanding Invoices Filter",-1)),s("div",un,[s("div",null,[e(t(R),{for:"min-invoice-amount"},{default:l(()=>i[2]||(i[2]=[o("Minimum Invoice Amount ($)")])),_:1}),e(t(G),{id:"min-invoice-amount",modelValue:A.value,"onUpdate:modelValue":i[0]||(i[0]=g=>A.value=g),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"Enter minimum amount",class:"mt-1"},null,8,["modelValue"])]),s("div",null,[e(t(R),{for:"outstanding-since"},{default:l(()=>i[3]||(i[3]=[o("Outstanding Since")])),_:1}),e(t(G),{id:"outstanding-since",modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=g=>m.value=g),type:"date",class:"mt-1"},null,8,["modelValue"])])])]))}}),pn={key:0,class:"mx-auto mb-6 max-w-[95vw] overflow-x-auto rounded-lg border bg-card shadow-sm md:max-w-[64vw] lg:max-w-full"},fn={class:"flex items-center justify-between border-b p-4"},vn={class:"flex items-start justify-between"},cn={class:"flex flex-col items-center space-y-1"},gn={key:0,class:"mb-6 rounded-lg border bg-card shadow-sm"},xn={class:"overflow-x-auto"},yn={class:"max-h-60 overflow-y-auto sm:max-h-80 md:max-h-96"},wn={key:1,class:"mb-6 rounded-lg border bg-card shadow-sm"},bn=H({__name:"OutstandingInvoicesSection",props:{filteredOutstandingInvoices:{},totalFilteredOutstanding:{},showOutstandingInvoicesSection:{type:Boolean},formatCurrency:{type:Function}},emits:["toggleShow"],setup(L){return(d,u)=>d.filteredOutstandingInvoices.length>0?(r(),c("div",pn,[s("div",fn,[u[1]||(u[1]=s("h3",{class:"text-lg font-semibold"},"Outstanding Invoices",-1)),s("div",vn,[s("div",cn,[e(t(Ze),{variant:"outline",class:"text-sm"},{default:l(()=>[o(x(d.filteredOutstandingInvoices.length)+" invoices ",1)]),_:1}),e(t(Ze),{variant:"outline",class:"text-sm"},{default:l(()=>[o(" total: $"+x(d.totalFilteredOutstanding.toFixed(2)),1)]),_:1})]),e(t(D),{variant:"ghost",size:"sm",onClick:u[0]||(u[0]=w=>d.$emit("toggleShow")),class:"ml-4 mt-1"},{default:l(()=>[o(x(d.showOutstandingInvoicesSection?"Hide Invoices":"Show Invoices")+" ",1),e(f,{name:d.showOutstandingInvoicesSection?"chevron-up":"chevron-down",class:"ml-2 h-4 w-4"},null,8,["name"])]),_:1})])]),d.showOutstandingInvoicesSection?(r(),c("div",gn,[s("div",xn,[s("div",yn,[e(t($e),{class:"min-w-full"},{default:l(()=>[e(t(Se),null,{default:l(()=>[e(t(Q),null,{default:l(()=>[e(t(B),null,{default:l(()=>u[2]||(u[2]=[o("RO Number")])),_:1}),e(t(B),null,{default:l(()=>u[3]||(u[3]=[o("Vendor")])),_:1}),e(t(B),null,{default:l(()=>u[4]||(u[4]=[o("Week")])),_:1}),e(t(B),{class:"text-right"},{default:l(()=>u[5]||(u[5]=[o("Amount")])),_:1})]),_:1})]),_:1}),e(t(he),null,{default:l(()=>[(r(!0),c(E,null,q(d.filteredOutstandingInvoices,w=>(r(),b(t(Q),{key:w.ro_number},{default:l(()=>[e(t(F),null,{default:l(()=>[o(x(w.ro_number),1)]),_:2},1024),e(t(F),null,{default:l(()=>[o(x(w.vendor_name),1)]),_:2},1024),e(t(F),null,{default:l(()=>[o("W"+x(w.week_number)+"/"+x(w.year),1)]),_:2},1024),e(t(F),{class:"text-right"},{default:l(()=>[o(x(d.formatCurrency(w.invoice_amount)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):_("",!0)])):(r(),c("div",wn,u[6]||(u[6]=[s("div",{class:"border-b p-4"},[s("h3",{class:"text-lg font-semibold"},"Outstanding Invoices")],-1),s("div",{class:"p-4 text-center text-muted-foreground"}," No outstanding invoices match the current criteria ",-1)])))}}),kn={class:"flex justify-between items-center"},_n={class:"flex items-center gap-2"},$n={key:0,class:"ml-4 flex flex-wrap gap-2"},Sn={class:"text-sm hidden sm:inline"},hn={class:"flex flex-col gap-6"},Cn={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full"},Dn={class:"relative"},An=["value"],Vn={class:"relative"},In=["value"],On={class:"flex justify-end space-x-2"},Mn=H({__name:"FiltersCard",props:{showFilters:{type:Boolean},activeFilterBadges:{},filter:{},vendors:{},woStatuses:{}},emits:["toggleShowFilters","resetFilters","applyFilters"],setup(L){return(d,u)=>(r(),b(t(De),{class:"shadow-sm border"},{default:l(()=>[e(t(Ot),{class:"p-2 md:p-4 lg:p-6 border-b"},{default:l(()=>[s("div",kn,[s("div",_n,[e(t(Mt),{class:"text-lg md:text-xl lg:text-2xl"},{default:l(()=>u[6]||(u[6]=[o("Filters")])),_:1}),!d.showFilters&&d.activeFilterBadges.length?(r(),c("div",$n,[(r(!0),c(E,null,q(d.activeFilterBadges,(w,A)=>(r(),c("div",{key:A,class:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-semibold"},x(w),1))),128))])):_("",!0)]),e(t(D),{variant:"ghost",size:"sm",onClick:u[0]||(u[0]=w=>d.$emit("toggleShowFilters")),class:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors"},{default:l(()=>[s("span",Sn,x(d.showFilters?"Hide Filters":"Show Filters"),1),e(f,{name:d.showFilters?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),_:1})])]),_:1}),e(It,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[500px]","leave-from-class":"opacity-100 max-h-[500px]","leave-to-class":"opacity-0 max-h-0"},{default:l(()=>[d.showFilters?(r(),b(t(Ae),{key:0,class:"p-4 md:p-6 lg:p-8 overflow-hidden"},{default:l(()=>[s("div",hn,[s("div",Cn,[s("div",null,[e(t(R),{for:"search",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[e(f,{name:"search",class:"h-4 w-4 text-muted-foreground"}),u[7]||(u[7]=o(" Search "))]),_:1}),e(t(G),{id:"search",type:"text",modelValue:d.filter.search,"onUpdate:modelValue":u[1]||(u[1]=w=>d.filter.search=w),placeholder:"RO#, Invoice...",class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10"},null,8,["modelValue"])]),s("div",null,[e(t(R),{for:"vendor",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[e(f,{name:"building",class:"h-4 w-4 text-muted-foreground"}),u[8]||(u[8]=o(" Vendor "))]),_:1}),s("div",Dn,[Y(s("select",{id:"vendor","onUpdate:modelValue":u[2]||(u[2]=w=>d.filter.vendor_id=w),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[u[9]||(u[9]=s("option",{value:""},"All Vendors",-1)),(r(!0),c(E,null,q(d.vendors,w=>(r(),c("option",{key:w.id,value:w.id},x(w.vendor_name),9,An))),128))],512),[[J,d.filter.vendor_id]]),u[10]||(u[10]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",null,[e(t(R),{for:"status",class:"flex items-center gap-1.5 mb-2"},{default:l(()=>[e(f,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),u[11]||(u[11]=o(" Status "))]),_:1}),s("div",Vn,[Y(s("select",{id:"status","onUpdate:modelValue":u[3]||(u[3]=w=>d.filter.status_id=w),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[u[12]||(u[12]=s("option",{value:""},"All Statuses",-1)),(r(!0),c(E,null,q(d.woStatuses,w=>(r(),c("option",{key:w.id,value:w.id},x(w.name),9,In))),128))],512),[[J,d.filter.status_id]]),u[13]||(u[13]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),s("div",On,[e(t(D),{onClick:u[4]||(u[4]=w=>d.$emit("resetFilters")),variant:"ghost",size:"sm"},{default:l(()=>[e(f,{name:"rotate-ccw",class:"mr-2 h-4 w-4"}),u[14]||(u[14]=o(" Reset Filters "))]),_:1}),e(t(D),{onClick:u[5]||(u[5]=w=>d.$emit("applyFilters")),variant:"default",size:"sm"},{default:l(()=>[e(f,{name:"filter",class:"mr-2 h-4 w-4"}),u[15]||(u[15]=o(" Apply Filters "))]),_:1})])])]),_:1})):_("",!0)]),_:1})]),_:1}))}}),Fn={class:"overflow-x-auto"},Tn={class:"flex items-center justify-center"},Nn=["checked"],Un={class:"flex items-center space-x-1"},Bn={class:"flex items-center space-x-1"},Pn={class:"flex items-center space-x-1"},En={class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},Rn=["checked","onChange"],zn={key:0},Ln={key:0},qn={key:1},Wn={class:"flex space-x-2"},jn={class:"border-t bg-muted/20 px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-2"},Qn={class:"flex items-center gap-4 text-sm text-muted-foreground"},Yn={class:"flex items-center gap-1"},Hn={class:"flex items-center gap-1"},Gn={class:"relative"},Kn=["value"],Zn={class:"flex space-x-1"},Jn=["innerHTML"],Xn=H({__name:"RepairOrdersTable",props:{repairOrders:{},permissionNames:{},isAdmin:{type:Boolean},selectedIds:{},allSelected:{type:Boolean},sortState:{},localPerPage:{},tenantSlug:{},filter:{},formatDate:{type:Function},formatCurrency:{type:Function}},emits:["toggleAll","sort","openEdit","deleteOne","changePerPage","go","update:selectedIds","update:localPerPage"],setup(L,{emit:d}){const u=L,w=d;function A(n,i){const $=i.target.checked?Array.from(new Set([...u.selectedIds,n])):u.selectedIds.filter(C=>C!==n);w("update:selectedIds",$)}const m=P({get:()=>u.localPerPage,set:n=>w("update:localPerPage",n)});return(n,i)=>(r(),b(t(De),{class:"mx-auto max-w-[95vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto shadow-sm border"},{default:l(()=>[e(t(Ae),{class:"p-0"},{default:l(()=>[s("div",Fn,[e(t($e),{class:"relative h-[500px] overflow-auto"},{default:l(()=>[e(t(Se),null,{default:l(()=>[e(t(Q),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:l(()=>[n.permissionNames.includes("repair-orders.delete")?(r(),b(t(B),{key:0,class:"w-12"},{default:l(()=>[s("div",Tn,[s("input",{type:"checkbox",checked:n.allSelected,onChange:i[0]||(i[0]=g=>n.$emit("toggleAll",g)),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Nn)])]),_:1})):_("",!0),e(t(B),{onClick:i[1]||(i[1]=g=>n.$emit("sort","ro_number")),class:"cursor-pointer font-semibold"},{default:l(()=>[s("div",Un,[i[8]||(i[8]=o(" RO# ")),e(kt,{column:"ro_number",sortState:n.sortState},null,8,["sortState"])])]),_:1}),n.isAdmin?(r(),b(t(B),{key:1,class:"font-semibold"},{default:l(()=>i[9]||(i[9]=[o("Company")])),_:1})):_("",!0),e(t(B),{onClick:i[2]||(i[2]=g=>n.$emit("sort","ro_open_date")),class:"cursor-pointer font-semibold"},{default:l(()=>[s("div",Bn,[i[10]||(i[10]=o(" Open Date ")),e(kt,{column:"ro_open_date",sortState:n.sortState},null,8,["sortState"])])]),_:1}),e(t(B),{onClick:i[3]||(i[3]=g=>n.$emit("sort","ro_close_date")),class:"cursor-pointer font-semibold"},{default:l(()=>[s("div",Pn,[i[11]||(i[11]=o(" Close Date ")),e(kt,{column:"ro_close_date",sortState:n.sortState},null,8,["sortState"])])]),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[12]||(i[12]=[o("Truck")])),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[13]||(i[13]=[o("Vendor")])),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[14]||(i[14]=[o("Areas of Concern")])),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[15]||(i[15]=[o("WO#")])),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[16]||(i[16]=[o("WO Status")])),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[17]||(i[17]=[o("Invoice")])),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[18]||(i[18]=[o("Amount")])),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[19]||(i[19]=[o("Invoice Received")])),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[20]||(i[20]=[o("On QS")])),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[21]||(i[21]=[o("QS Invoice Date")])),_:1}),e(t(B),{class:"font-semibold"},{default:l(()=>i[22]||(i[22]=[o("Disputed")])),_:1}),n.permissionNames.includes("repair-orders.delete")||n.permissionNames.includes("repair-orders.update")?(r(),b(t(B),{key:2,class:"font-semibold"},{default:l(()=>i[23]||(i[23]=[o(" Actions ")])),_:1})):_("",!0)]),_:1})]),_:1}),e(t(he),null,{default:l(()=>[n.repairOrders.data.length?_("",!0):(r(),b(t(Q),{key:0},{default:l(()=>[e(t(F),{colspan:n.isAdmin?16:15,class:"py-8 text-center"},{default:l(()=>[s("div",En,[e(f,{name:"database-x",class:"h-16 w-16 mx-auto mb-4 opacity-70"}),i[24]||(i[24]=s("h2",{class:"text-lg font-medium"},"No repair orders found.",-1)),i[25]||(i[25]=s("p",{class:"text-muted-foreground mt-2"}," There is no data to display at this time. ",-1))])]),_:1},8,["colspan"])]),_:1})),(r(!0),c(E,null,q(n.repairOrders.data,g=>(r(),b(t(Q),{key:g.id,class:"hover:bg-muted/50 transition-colors"},{default:l(()=>[n.permissionNames.includes("repair-orders.delete")?(r(),b(t(F),{key:0},{default:l(()=>[s("input",{type:"checkbox",checked:n.selectedIds.includes(g.id),onChange:$=>A(g.id,$),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,40,Rn)]),_:2},1024)):_("",!0),e(t(F),{class:"whitespace-nowrap font-medium"},{default:l(()=>[o(x(g.ro_number),1)]),_:2},1024),n.isAdmin?(r(),b(t(F),{key:1,class:"whitespace-nowrap"},{default:l(()=>{var $;return[o(x((($=g.tenant)==null?void 0:$.name)||"—"),1)]}),_:2},1024)):_("",!0),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>[o(x(n.formatDate(g.ro_open_date)),1)]),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>[o(x(g.ro_close_date?n.formatDate(g.ro_close_date):"N/A"),1)]),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>{var $;return[o(x((($=g.truck)==null?void 0:$.truckid)||"—"),1)]}),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>{var $;return[o(x((($=g.vendor)==null?void 0:$.vendor_name)||"—"),1)]}),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>{var $;return[($=g.areas_of_concern)!=null&&$.length?(r(),c("span",zn,[(r(!0),c(E,null,q(g.areas_of_concern,(C,T)=>(r(),c("span",{key:C.id},[o(x(C.concern),1),T<g.areas_of_concern.length-1?(r(),c("span",Ln,", ")):_("",!0)]))),128))])):(r(),c("span",qn,"—"))]}),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>[o(x(g.wo_number||"—"),1)]),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>{var $;return[o(x((($=g.wo_status)==null?void 0:$.name)||"—"),1)]}),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>[o(x(g.invoice||"—"),1)]),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>[o(x(n.formatCurrency(g.invoice_amount)),1)]),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>[o(x(g.invoice_received?"Yes":"No"),1)]),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>[o(x(g.on_qs?g.on_qs.charAt(0).toUpperCase()+g.on_qs.slice(1):"No"),1)]),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>[o(x(g.qs_invoice_date?n.formatDate(g.qs_invoice_date):"N/A"),1)]),_:2},1024),e(t(F),{class:"whitespace-nowrap"},{default:l(()=>[o(x(g.disputed?"Yes":"No"),1)]),_:2},1024),n.permissionNames.includes("repair-orders.update")||n.permissionNames.includes("repair-orders.delete")?(r(),b(t(F),{key:2},{default:l(()=>[s("div",Wn,[n.permissionNames.includes("repair-orders.update")?(r(),b(t(D),{key:0,size:"sm",variant:"warning",onClick:$=>n.$emit("openEdit",g),class:"h-8 px-2"},{default:l(()=>[e(f,{name:"pencil",class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0),n.permissionNames.includes("repair-orders.delete")?(r(),b(t(D),{key:1,size:"sm",variant:"destructive",onClick:$=>n.$emit("deleteOne",g.id),class:"h-8 px-2"},{default:l(()=>[e(f,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0)])]),_:2},1024)):_("",!0)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),s("div",jn,[s("div",Qn,[s("span",Yn,[e(f,{name:"list",class:"h-4 w-4"}),o(" Showing "+x(n.repairOrders.data.length)+" of "+x(n.repairOrders.total)+" entries ",1)]),s("span",Hn,[e(f,{name:"layout-grid",class:"h-4 w-4"}),i[26]||(i[26]=o(" Per page: "))]),s("div",Gn,[Y(s("select",{"onUpdate:modelValue":i[4]||(i[4]=g=>m.value=g),onChange:i[5]||(i[5]=g=>n.$emit("changePerPage")),class:"h-8 appearance-none rounded-md border bg-background px-2 py-1 text-sm focus:ring-2 focus:ring-ring"},[(r(),c(E,null,q([10,25,50,100],g=>s("option",{key:g,value:g},x(g),9,Kn)),64))],544),[[J,m.value,void 0,{number:!0}]]),i[27]||(i[27]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",Zn,[e(t(D),{size:"sm",variant:"ghost",onClick:i[6]||(i[6]=g=>n.$emit("go",n.repairOrders.prev_page_url)),disabled:!n.repairOrders.prev_page_url,class:"flex items-center gap-1"},{default:l(()=>[e(f,{name:"chevron-left",class:"h-4 w-4"}),i[28]||(i[28]=o(" Prev "))]),_:1},8,["disabled"]),(r(!0),c(E,null,q(n.repairOrders.links.slice(1,-1),g=>(r(),b(t(D),{key:g.label,size:"sm",variant:"ghost",onClick:$=>n.$emit("go",g.url),disabled:!g.url,class:ve({"border-primary bg-primary/10 text-primary font-medium":g.active})},{default:l(()=>[s("span",{innerHTML:g.label},null,8,Jn)]),_:2},1032,["onClick","disabled","class"]))),128)),e(t(D),{size:"sm",variant:"ghost",onClick:i[7]||(i[7]=g=>n.$emit("go",n.repairOrders.next_page_url)),disabled:!n.repairOrders.next_page_url,class:"flex items-center gap-1"},{default:l(()=>[i[29]||(i[29]=o(" Next ")),e(f,{name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),_:1}))}}),ea={class:"flex items-center gap-2"},ta={class:"max-h-[70vh] overflow-y-auto px-4 sm:px-6"},sa={key:0,class:"col-span-2 mb-1"},la={class:"relative"},na=["value"],aa={class:"col-span-2 border-b pb-1 mb-2 flex items-center gap-2"},oa={class:"grid grid-cols-2 gap-3 col-span-2"},ra={class:"relative"},ia=["value"],da={class:"col-span-2 border-b pb-1 mb-2 mt-1 flex items-center gap-2"},ua={class:"col-span-2"},ma={class:"flex flex-wrap gap-1 mb-2 bg-muted/30 p-2 rounded-md min-h-[40px]"},pa=["onClick"],fa={key:0,class:"text-muted-foreground text-sm italic"},va={class:"relative"},ca=["value"],ga={class:"col-span-2"},xa={class:"col-span-2 border-b pb-1 mb-2 mt-1 flex items-center gap-2"},ya={class:"grid grid-cols-2 gap-3 col-span-2"},wa={class:"relative"},ba=["value"],ka={class:"relative"},_a=["value"],$a={class:"relative"},Sa={class:"grid grid-cols-2 gap-3 col-span-2"},ha={class:"relative"},Ca={class:"flex items-center space-x-2"},Da={key:1,class:"col-span-2"},Aa={class:"border-b pb-1 mb-2 mt-1 flex items-center gap-2"},Va={class:"flex items-center space-x-2"},Ia={key:0,class:"mt-2"},Oa=H({__name:"CreateEditModal",props:{open:{type:Boolean},isAdmin:{type:Boolean},tenants:{},trucks:{},vendors:{},woStatuses:{},areasOfConcern:{},form:{},formAction:{},areasMap:{},availableAreas:{}},emits:["update:open","submitForm","closeModal","addArea","removeArea"],setup(L,{emit:d}){const u=L,w=d,A=P({get:()=>u.open,set:m=>w("update:open",m)});return(m,n)=>(r(),b(t(me),{open:A.value,"onUpdate:open":n[20]||(n[20]=i=>A.value=i)},{default:l(()=>[e(t(de),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:l(()=>[e(t(pe),{class:"px-4 sm:px-6 border-b pb-3"},{default:l(()=>[s("div",ea,[e(f,{name:m.form.id?"pencil":"plus-circle",class:"h-5 w-5 text-primary"},null,8,["name"]),e(t(fe),{class:"text-lg sm:text-xl font-semibold"},{default:l(()=>[o(x(m.formAction)+" Repair Order ",1)]),_:1})]),e(t(ue),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:l(()=>[o(" Fill in the details to "+x(m.formAction.toLowerCase())+" a repair order. ",1)]),_:1})]),_:1}),s("div",ta,[s("form",{onSubmit:n[17]||(n[17]=te(i=>m.$emit("submitForm"),["prevent"])),class:"grid grid-cols-1 gap-3 p-3 sm:grid-cols-2 sm:gap-4 sm:p-4"},[m.isAdmin?(r(),c("div",sa,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"building",class:"h-4 w-4 text-muted-foreground"}),n[21]||(n[21]=o(" Company "))]),_:1}),s("div",la,[Y(s("select",{"onUpdate:modelValue":n[0]||(n[0]=i=>m.form.tenant_id=i),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm ring-offset-background focus-visible:ring-2"},[n[22]||(n[22]=s("option",{disabled:"",value:""},"Select",-1)),(r(!0),c(E,null,q(m.tenants,i=>(r(),c("option",{key:i.id,value:i.id},x(i.name),9,na))),128))],512),[[J,m.form.tenant_id]]),n[23]||(n[23]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):_("",!0),s("div",aa,[e(f,{name:"info",class:"h-4 w-4 text-primary"}),n[24]||(n[24]=s("h3",{class:"text-md font-semibold text-primary"},"Basic Information",-1))]),s("div",oa,[s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"hash",class:"h-4 w-4 text-muted-foreground"}),n[25]||(n[25]=o(" RO# "))]),_:1}),e(t(G),{modelValue:m.form.ro_number,"onUpdate:modelValue":n[1]||(n[1]=i=>m.form.ro_number=i),required:"",class:"h-9 w-full"},null,8,["modelValue"])]),s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"truck",class:"h-4 w-4 text-muted-foreground"}),n[26]||(n[26]=o(" Truck "))]),_:1}),s("div",ra,[Y(s("select",{"onUpdate:modelValue":n[2]||(n[2]=i=>m.form.truck_id=i),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[n[27]||(n[27]=s("option",{disabled:"",value:""},"Select",-1)),(r(!0),c(E,null,q(m.trucks,i=>(r(),c("option",{key:i.id,value:i.id},x(i.truckid),9,ia))),128))],512),[[J,m.form.truck_id]]),n[28]||(n[28]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"calendar",class:"h-4 w-4 text-muted-foreground"}),n[29]||(n[29]=o(" Open Date "))]),_:1}),e(t(G),{type:"date",modelValue:m.form.ro_open_date,"onUpdate:modelValue":n[3]||(n[3]=i=>m.form.ro_open_date=i),required:"",class:"h-9 w-full"},null,8,["modelValue"])]),s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"calendar-check",class:"h-4 w-4 text-muted-foreground"}),n[30]||(n[30]=o(" Close Date "))]),_:1}),e(t(G),{type:"date",modelValue:m.form.ro_close_date,"onUpdate:modelValue":n[4]||(n[4]=i=>m.form.ro_close_date=i),class:"h-9 w-full"},null,8,["modelValue"])])]),s("div",da,[e(f,{name:"wrench",class:"h-4 w-4 text-primary"}),n[31]||(n[31]=s("h3",{class:"text-md font-semibold text-primary"},"Repair Details",-1))]),s("div",ua,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"alert-triangle",class:"h-4 w-4 text-muted-foreground"}),n[32]||(n[32]=o(" Areas of Concern "))]),_:1}),s("div",ma,[(r(!0),c(E,null,q(m.form.area_of_concerns,i=>(r(),c("span",{key:i,class:"badge bg-primary/10 text-primary px-2 py-1 rounded-md flex items-center"},[o(x(m.areasMap[i])+" ",1),s("button",{type:"button",onClick:g=>m.$emit("removeArea",i),class:"ml-1 hover:text-red-500 focus:outline-none"}," × ",8,pa)]))),128)),m.form.area_of_concerns.length?_("",!0):(r(),c("span",fa," No areas selected "))]),s("div",va,[s("select",{onChange:n[5]||(n[5]=i=>m.$emit("addArea",i)),class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[n[33]||(n[33]=s("option",{value:""},"Select an area to add",-1)),(r(!0),c(E,null,q(m.availableAreas,i=>(r(),c("option",{key:i.id,value:i.id},x(i.concern),9,ca))),128))],32),n[34]||(n[34]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",ga,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"clipboard-check",class:"h-4 w-4 text-muted-foreground"}),n[35]||(n[35]=o(" Repairs Made "))]),_:1}),Y(s("textarea",{"onUpdate:modelValue":n[6]||(n[6]=i=>m.form.repairs_made=i),class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm",rows:"2"},null,512),[[Ct,m.form.repairs_made]])]),s("div",xa,[e(f,{name:"receipt",class:"h-4 w-4 text-primary"}),n[36]||(n[36]=s("h3",{class:"text-md font-semibold text-primary"}," Vendor & Invoice Information ",-1))]),s("div",ya,[s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"building-2",class:"h-4 w-4 text-muted-foreground"}),n[37]||(n[37]=o(" Vendor "))]),_:1}),s("div",wa,[Y(s("select",{"onUpdate:modelValue":n[7]||(n[7]=i=>m.form.vendor_id=i),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[n[38]||(n[38]=s("option",{disabled:"",value:""},"Select",-1)),(r(!0),c(E,null,q(m.vendors,i=>(r(),c("option",{key:i.id,value:i.id},x(i.vendor_name),9,ba))),128))],512),[[J,m.form.vendor_id]]),n[39]||(n[39]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"file-text",class:"h-4 w-4 text-muted-foreground"}),n[40]||(n[40]=o(" WO# "))]),_:1}),e(t(G),{modelValue:m.form.wo_number,"onUpdate:modelValue":n[8]||(n[8]=i=>m.form.wo_number=i),class:"h-9 w-full"},null,8,["modelValue"])]),s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"activity",class:"h-4 w-4 text-muted-foreground"}),n[41]||(n[41]=o(" WO Status "))]),_:1}),s("div",ka,[Y(s("select",{"onUpdate:modelValue":n[9]||(n[9]=i=>m.form.wo_status_id=i),class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},[n[42]||(n[42]=s("option",{value:null},"— None —",-1)),(r(!0),c(E,null,q(m.woStatuses,i=>(r(),c("option",{key:i.id,value:i.id},x(i.name),9,_a))),128))],512),[[J,m.form.wo_status_id]]),n[43]||(n[43]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"check-square",class:"h-4 w-4 text-muted-foreground"}),n[44]||(n[44]=o(" On QS "))]),_:1}),s("div",$a,[Y(s("select",{"onUpdate:modelValue":n[10]||(n[10]=i=>m.form.on_qs=i),required:"",class:"flex h-9 w-full appearance-none rounded-md border bg-background px-3 py-1 text-sm"},n[45]||(n[45]=[s("option",{value:"yes"},"Yes",-1),s("option",{value:"no"},"No",-1),s("option",{value:"not expected"},"Not Expected",-1)]),512),[[J,m.form.on_qs]]),n[46]||(n[46]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])]),s("div",Sa,[s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"file-invoice",class:"h-4 w-4 text-muted-foreground"}),n[47]||(n[47]=o(" Invoice "))]),_:1}),e(t(G),{modelValue:m.form.invoice,"onUpdate:modelValue":n[11]||(n[11]=i=>m.form.invoice=i),class:"h-9 w-full"},null,8,["modelValue"])]),s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"dollar-sign",class:"h-4 w-4 text-muted-foreground"}),n[48]||(n[48]=o(" Amount "))]),_:1}),s("div",ha,[n[49]||(n[49]=s("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-muted-foreground"},"$",-1)),e(t(G),{type:"number",step:"0.01",modelValue:m.form.invoice_amount,"onUpdate:modelValue":n[12]||(n[12]=i=>m.form.invoice_amount=i),class:"pl-7 h-9 w-full"},null,8,["modelValue"])])]),s("div",Ca,[Y(s("input",{type:"checkbox","onUpdate:modelValue":n[13]||(n[13]=i=>m.form.invoice_received=i),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,512),[[_t,m.form.invoice_received]]),e(t(R),{class:"flex items-center gap-1.5 text-sm font-medium"},{default:l(()=>[e(f,{name:"inbox",class:"h-4 w-4 text-muted-foreground"}),n[50]||(n[50]=o(" Invoice Received "))]),_:1})]),s("div",null,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"calendar-days",class:"h-4 w-4 text-muted-foreground"}),n[51]||(n[51]=o(" QS Invoice Date "))]),_:1}),e(t(G),{type:"date",modelValue:m.form.qs_invoice_date,"onUpdate:modelValue":n[14]||(n[14]=i=>m.form.qs_invoice_date=i),class:"h-9 w-full"},null,8,["modelValue"])])]),m.formAction==="Update"?(r(),c("div",Da,[s("div",Aa,[e(f,{name:"alert-octagon",class:"h-4 w-4 text-primary"}),n[52]||(n[52]=s("h3",{class:"text-md font-semibold text-primary"},"Dispute Information",-1))]),s("div",Va,[Y(s("input",{type:"checkbox","onUpdate:modelValue":n[15]||(n[15]=i=>m.form.disputed=i),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-1 focus:ring-primary"},null,512),[[_t,m.form.disputed]]),e(t(R),{class:"flex items-center gap-1.5 text-sm font-medium"},{default:l(()=>[e(f,{name:"alert-circle",class:"h-4 w-4 text-muted-foreground"}),n[53]||(n[53]=o(" Disputed? "))]),_:1})]),m.form.disputed?(r(),c("div",Ia,[e(t(R),{class:"flex items-center gap-1.5 mb-1 text-sm font-medium"},{default:l(()=>[e(f,{name:"message-square",class:"h-4 w-4 text-muted-foreground"}),n[54]||(n[54]=o(" Dispute Outcome "))]),_:1}),Y(s("textarea",{"onUpdate:modelValue":n[16]||(n[16]=i=>m.form.dispute_outcome=i),class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm",rows:"2"},null,512),[[Ct,m.form.dispute_outcome]])])):_("",!0)])):_("",!0)],32)]),e(t(we),{class:"px-4 sm:px-6 flex justify-end gap-2 mt-2 pt-3 border-t"},{default:l(()=>[e(t(D),{variant:"outline",onClick:n[18]||(n[18]=i=>m.$emit("closeModal")),class:"h-9 px-4 py-1 text-xs sm:text-sm"},{default:l(()=>n[55]||(n[55]=[o(" Cancel ")])),_:1}),e(t(D),{type:"button",onClick:n[19]||(n[19]=i=>m.$emit("submitForm")),class:"h-9 px-4 py-1 text-xs sm:text-sm"},{default:l(()=>[o(x(m.formAction),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),Ma=H({__name:"DeleteOneDialog",props:{open:{type:Boolean}},emits:["update:open","confirmDelete"],setup(L,{emit:d}){const u=L,w=d,A=P({get:()=>u.open,set:m=>w("update:open",m)});return(m,n)=>(r(),b(t(me),{open:A.value,"onUpdate:open":n[2]||(n[2]=i=>A.value=i)},{default:l(()=>[e(t(de),{class:"max-w-[95vw] sm:max-w-md"},{default:l(()=>[e(t(pe),{class:"px-4 sm:px-6"},{default:l(()=>[e(t(fe),{class:"text-lg sm:text-xl"},{default:l(()=>n[3]||(n[3]=[o("Confirm Deletion")])),_:1}),e(t(ue),{class:"text-xs sm:text-sm"},{default:l(()=>n[4]||(n[4]=[o(" This action cannot be undone. ")])),_:1})]),_:1}),e(t(we),{class:"px-4 sm:px-6 flex gap-2"},{default:l(()=>[e(t(D),{variant:"outline",onClick:n[0]||(n[0]=i=>A.value=!1),class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>n[5]||(n[5]=[o(" Cancel ")])),_:1}),e(t(D),{variant:"destructive",onClick:n[1]||(n[1]=i=>m.$emit("confirmDelete")),class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>n[6]||(n[6]=[o(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),Fa=H({__name:"BulkDeleteDialog",props:{open:{type:Boolean},selectedCount:{}},emits:["update:open","deleteBulk"],setup(L,{emit:d}){const u=L,w=d,A=P({get:()=>u.open,set:m=>w("update:open",m)});return(m,n)=>(r(),b(t(me),{open:A.value,"onUpdate:open":n[2]||(n[2]=i=>A.value=i)},{default:l(()=>[e(t(de),{class:"max-w-[95vw] sm:max-w-md"},{default:l(()=>[e(t(pe),{class:"px-4 sm:px-6"},{default:l(()=>[e(t(fe),{class:"text-lg sm:text-xl"},{default:l(()=>[o(" Delete "+x(m.selectedCount)+" Orders? ",1)]),_:1}),e(t(ue),{class:"text-xs sm:text-sm"},{default:l(()=>n[3]||(n[3]=[o(" This action cannot be undone. ")])),_:1})]),_:1}),e(t(we),{class:"px-4 sm:px-6 flex gap-2"},{default:l(()=>[e(t(D),{variant:"outline",onClick:n[0]||(n[0]=i=>A.value=!1),class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>n[4]||(n[4]=[o(" Cancel ")])),_:1}),e(t(D),{variant:"destructive",onClick:n[1]||(n[1]=i=>m.$emit("deleteBulk")),class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>n[5]||(n[5]=[o(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),Ta={class:"space-y-4 sm:space-y-6"},Na={class:"space-y-1 sm:space-y-2"},Ua={class:"rounded-md border"},Ba={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},Pa={key:0,class:"ml-1 text-xs text-red-500"},Ea={class:"flex space-x-1 sm:space-x-2"},Ra=H({__name:"AreasModal",props:{open:{type:Boolean},areasOfConcern:{},areas:{},areaForm:{}},emits:["update:open","submitArea","deleteArea","restoreArea","close"],setup(L,{emit:d}){const u=L,w=d,A=P({get:()=>u.open,set:m=>w("update:open",m)});return(m,n)=>(r(),b(t(me),{open:A.value,"onUpdate:open":n[3]||(n[3]=i=>A.value=i)},{default:l(()=>[e(t(de),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:l(()=>[e(t(pe),null,{default:l(()=>[e(t(fe),null,{default:l(()=>n[4]||(n[4]=[o("Manage Areas of Concern")])),_:1}),e(t(ue),{class:"text-sm sm:text-base"},{default:l(()=>n[5]||(n[5]=[o(" Add or remove areas of concern for repair orders. ")])),_:1})]),_:1}),s("div",Ta,[s("form",{onSubmit:n[1]||(n[1]=te(i=>m.$emit("submitArea"),["prevent"])),class:"space-y-3 sm:space-y-4"},[s("div",Na,[e(t(R),{for:"concern"},{default:l(()=>n[6]||(n[6]=[o("Area of Concern")])),_:1}),e(t(G),{id:"concern",modelValue:m.areaForm.concern,"onUpdate:modelValue":n[0]||(n[0]=i=>m.areaForm.concern=i),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),e(t(D),{type:"submit",class:"w-full"},{default:l(()=>n[7]||(n[7]=[o("Add Area of Concern")])),_:1})],32),s("div",Ua,[s("div",Ba,[e(t($e),null,{default:l(()=>[e(t(Se),{class:"sticky top-0 z-10 bg-background"},{default:l(()=>[e(t(Q),null,{default:l(()=>[e(t(B),{class:"text-xs sm:text-sm"},{default:l(()=>n[8]||(n[8]=[o("Area of Concern")])),_:1}),e(t(B),{class:"w-20 text-xs sm:text-sm"},{default:l(()=>n[9]||(n[9]=[o("Actions")])),_:1})]),_:1})]),_:1}),e(t(he),null,{default:l(()=>[m.areas.length===0?(r(),b(t(Q),{key:0},{default:l(()=>[e(t(F),{colspan:"2",class:"py-4 text-center text-sm"},{default:l(()=>n[10]||(n[10]=[o(" No areas of concern found. ")])),_:1})]),_:1})):_("",!0),(r(!0),c(E,null,q(m.areas,i=>(r(),b(t(Q),{key:i.id},{default:l(()=>[e(t(F),{class:"text-xs sm:text-sm"},{default:l(()=>[o(x(i.concern)+" ",1),i.deleted_at?(r(),c("span",Pa,"(Deleted)")):_("",!0)]),_:2},1024),e(t(F),null,{default:l(()=>[s("div",Ea,[i.deleted_at?(r(),b(t(D),{key:0,type:"button",onClick:g=>m.$emit("restoreArea",i.id),variant:"outline",size:"sm"},{default:l(()=>[e(f,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0),i.deleted_at?_("",!0):(r(),b(t(D),{key:1,type:"button",onClick:g=>m.$emit("deleteArea",i.id),variant:"destructive",size:"sm"},{default:l(()=>[e(f,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),e(t(we),null,{default:l(()=>[e(t(D),{type:"button",onClick:n[2]||(n[2]=i=>m.$emit("close")),variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>n[11]||(n[11]=[o(" Close ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),za={class:"space-y-4 sm:space-y-6"},La={class:"space-y-1 sm:space-y-2"},qa={class:"overflow-hidden rounded-md border"},Wa={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},ja={key:0,class:"ml-1 text-xs text-red-500"},Qa={class:"flex space-x-1 sm:space-x-2"},Ya=H({__name:"VendorsModal",props:{open:{type:Boolean},vendors:{},vendorForm:{}},emits:["update:open","submitVendor","deleteVendor","restoreVendor","forceDeleteVendor","close"],setup(L,{emit:d}){const u=L,w=d,A=P({get:()=>u.open,set:m=>w("update:open",m)});return(m,n)=>(r(),b(t(me),{open:A.value,"onUpdate:open":n[3]||(n[3]=i=>A.value=i)},{default:l(()=>[e(t(de),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:l(()=>[e(t(pe),null,{default:l(()=>[e(t(fe),null,{default:l(()=>n[4]||(n[4]=[o("Manage Vendors")])),_:1}),e(t(ue),{class:"text-sm sm:text-base"},{default:l(()=>n[5]||(n[5]=[o(" Add or remove vendors for repair orders. ")])),_:1})]),_:1}),s("div",za,[s("form",{onSubmit:n[1]||(n[1]=te(i=>m.$emit("submitVendor"),["prevent"])),class:"space-y-3 sm:space-y-4"},[s("div",La,[e(t(R),{for:"vendor_name"},{default:l(()=>n[6]||(n[6]=[o("Vendor Name")])),_:1}),e(t(G),{id:"vendor_name",modelValue:m.vendorForm.vendor_name,"onUpdate:modelValue":n[0]||(n[0]=i=>m.vendorForm.vendor_name=i),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),e(t(D),{type:"submit",class:"w-full"},{default:l(()=>n[7]||(n[7]=[o("Add Vendor")])),_:1})],32),s("div",qa,[s("div",Wa,[e(t($e),null,{default:l(()=>[e(t(Se),{class:"sticky top-0 z-10 bg-background"},{default:l(()=>[e(t(Q),{class:"sticky top-0 z-10 border-b bg-background"},{default:l(()=>[e(t(B),{class:"text-xs sm:text-sm"},{default:l(()=>n[8]||(n[8]=[o("Vendor Name")])),_:1}),e(t(B),{class:"text-xs sm:text-sm"},{default:l(()=>n[9]||(n[9]=[o("Actions")])),_:1})]),_:1})]),_:1}),e(t(he),null,{default:l(()=>[m.vendors.length===0?(r(),b(t(Q),{key:0},{default:l(()=>[e(t(F),{colspan:"2",class:"py-4 text-center text-sm"},{default:l(()=>n[10]||(n[10]=[o("No vendors found.")])),_:1})]),_:1})):_("",!0),(r(!0),c(E,null,q(m.vendors,i=>(r(),b(t(Q),{key:i.id},{default:l(()=>[e(t(F),{class:"text-xs sm:text-sm"},{default:l(()=>[o(x(i.vendor_name)+" ",1),i.deleted_at?(r(),c("span",ja,"(Deleted)")):_("",!0)]),_:2},1024),e(t(F),null,{default:l(()=>[s("div",Qa,[i.deleted_at?(r(),b(t(D),{key:0,type:"button",onClick:g=>m.$emit("restoreVendor",i.id),variant:"outline",size:"sm"},{default:l(()=>[e(f,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0),i.deleted_at?_("",!0):(r(),b(t(D),{key:1,type:"button",onClick:g=>m.$emit("deleteVendor",i.id),variant:"destructive",size:"sm"},{default:l(()=>[e(f,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])),i.deleted_at?(r(),b(t(D),{key:2,type:"button",onClick:g=>m.$emit("forceDeleteVendor",i.id),variant:"destructive",size:"sm"},{default:l(()=>[e(f,{name:"x",class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),e(t(we),null,{default:l(()=>[e(t(D),{type:"button",onClick:n[2]||(n[2]=i=>m.$emit("close")),variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>n[11]||(n[11]=[o("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),Ha={class:"space-y-4 sm:space-y-6"},Ga={class:"space-y-1 sm:space-y-2"},Ka={class:"overflow-hidden rounded-md border"},Za={class:"max-h-[40vh] overflow-y-auto sm:max-h-[300px]"},Ja={key:0,class:"ml-1 text-xs text-red-500"},Xa={class:"flex space-x-1 sm:space-x-2"},eo=H({__name:"StatusesModal",props:{open:{type:Boolean},woStatuses:{},statusForm:{}},emits:["update:open","submitStatus","deleteStatus","restoreStatus","forceDeleteStatus","close"],setup(L,{emit:d}){const u=L,w=d,A=P({get:()=>u.open,set:m=>w("update:open",m)});return(m,n)=>(r(),b(t(me),{open:A.value,"onUpdate:open":n[3]||(n[3]=i=>A.value=i)},{default:l(()=>[e(t(de),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-[600px]"},{default:l(()=>[e(t(pe),null,{default:l(()=>[e(t(fe),null,{default:l(()=>n[4]||(n[4]=[o("Manage Work Order Statuses")])),_:1}),e(t(ue),{class:"text-sm sm:text-base"},{default:l(()=>n[5]||(n[5]=[o(" Add or remove work order statuses for repair orders. ")])),_:1})]),_:1}),s("div",Ha,[s("form",{onSubmit:n[1]||(n[1]=te(i=>m.$emit("submitStatus"),["prevent"])),class:"space-y-3 sm:space-y-4"},[s("div",Ga,[e(t(R),{for:"status_name"},{default:l(()=>n[6]||(n[6]=[o("Status Name")])),_:1}),e(t(G),{id:"status_name",modelValue:m.statusForm.name,"onUpdate:modelValue":n[0]||(n[0]=i=>m.statusForm.name=i),required:"",class:"text-sm sm:text-base"},null,8,["modelValue"])]),e(t(D),{type:"submit",class:"w-full"},{default:l(()=>n[7]||(n[7]=[o("Add Work Order Status")])),_:1})],32),s("div",Ka,[s("div",Za,[e(t($e),null,{default:l(()=>[e(t(Se),{class:"sticky top-0 z-10 bg-background"},{default:l(()=>[e(t(Q),{class:"sticky top-0 z-10 border-b bg-background"},{default:l(()=>[e(t(B),{class:"text-xs sm:text-sm"},{default:l(()=>n[8]||(n[8]=[o("Status Name")])),_:1}),e(t(B),{class:"text-xs sm:text-sm"},{default:l(()=>n[9]||(n[9]=[o("Actions")])),_:1})]),_:1})]),_:1}),e(t(he),null,{default:l(()=>[m.woStatuses.length===0?(r(),b(t(Q),{key:0},{default:l(()=>[e(t(F),{colspan:"2",class:"py-4 text-center text-sm"},{default:l(()=>n[10]||(n[10]=[o(" No work order statuses found. ")])),_:1})]),_:1})):_("",!0),(r(!0),c(E,null,q(m.woStatuses,i=>(r(),b(t(Q),{key:i.id},{default:l(()=>[e(t(F),{class:"text-xs sm:text-sm"},{default:l(()=>[o(x(i.name)+" ",1),i.deleted_at?(r(),c("span",Ja,"(Deleted)")):_("",!0)]),_:2},1024),e(t(F),null,{default:l(()=>[s("div",Xa,[i.deleted_at?(r(),b(t(D),{key:0,type:"button",onClick:g=>m.$emit("restoreStatus",i.id),variant:"outline",size:"sm"},{default:l(()=>[e(f,{name:"undo",class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0),i.deleted_at?_("",!0):(r(),b(t(D),{key:1,type:"button",onClick:g=>m.$emit("deleteStatus",i.id),variant:"destructive",size:"sm"},{default:l(()=>[e(f,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])),i.deleted_at?(r(),b(t(D),{key:2,type:"button",onClick:g=>m.$emit("forceDeleteStatus",i.id),variant:"destructive",size:"sm"},{default:l(()=>[e(f,{name:"x",class:"h-4 w-4"})]),_:2},1032,["onClick"])):_("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),e(t(we),null,{default:l(()=>[e(t(D),{type:"button",onClick:n[2]||(n[2]=i=>m.$emit("close")),variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>n[11]||(n[11]=[o("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),to={class:"max-h-[60vh] overflow-x-auto overflow-y-auto"},so={class:"flex items-center gap-2"},lo={key:1,class:"py-8 text-center text-muted-foreground"},no=H({__name:"CanceledQSInvoicesDialog",props:{open:{type:Boolean},canceledQSInvoices:{},formatCurrency:{type:Function}},emits:["update:open","editInvoice"],setup(L,{emit:d}){const u=L,w=d,A=P({get:()=>u.open,set:m=>w("update:open",m)});return(m,n)=>(r(),b(t(me),{open:A.value,"onUpdate:open":n[1]||(n[1]=i=>A.value=i)},{default:l(()=>[e(t(de),{class:"max-h-[90vh] max-w-[95vw] overflow-y-auto md:max-w-[80vw] lg:max-w-4xl"},{default:l(()=>{var i;return[e(t(pe),null,{default:l(()=>[e(t(fe),{class:"flex items-center gap-2 text-lg md:text-xl"},{default:l(()=>[e(f,{name:"alert-triangle",class:"h-5 w-5 text-red-600"}),n[2]||(n[2]=o(" Canceled Invoices on QS "))]),_:1}),e(t(ue),null,{default:l(()=>n[3]||(n[3]=[o(" These invoices have a canceled WO status but are still marked as on QS. Please review and take appropriate action. ")])),_:1})]),_:1}),s("div",to,[(i=m.canceledQSInvoices)!=null&&i.length?(r(),b(t($e),{key:0},{default:l(()=>[e(t(Se),null,{default:l(()=>[e(t(Q),null,{default:l(()=>[e(t(B),{class:"whitespace-nowrap"},{default:l(()=>n[4]||(n[4]=[o("RO Number")])),_:1}),e(t(B),{class:"whitespace-nowrap"},{default:l(()=>n[5]||(n[5]=[o("Vendor")])),_:1}),e(t(B),{class:"whitespace-nowrap text-right"},{default:l(()=>n[6]||(n[6]=[o("Amount")])),_:1}),e(t(B),{class:"whitespace-nowrap"},{default:l(()=>n[7]||(n[7]=[o("Week")])),_:1}),e(t(B),{class:"whitespace-nowrap text-right"},{default:l(()=>n[8]||(n[8]=[o("Action")])),_:1})]),_:1})]),_:1}),e(t(he),null,{default:l(()=>[(r(!0),c(E,null,q(m.canceledQSInvoices,g=>(r(),b(t(Q),{key:g.ro_number,class:"hover:bg-red-50 dark:hover:bg-red-900/30"},{default:l(()=>[e(t(F),{class:"font-medium"},{default:l(()=>[s("div",so,[e(f,{name:"alert-triangle",class:"h-4 w-4 text-red-600 dark:text-red-400"}),o(" "+x(g.ro_number),1)])]),_:2},1024),e(t(F),null,{default:l(()=>[o(x(g.vendor_name),1)]),_:2},1024),e(t(F),{class:"text-right"},{default:l(()=>[o(x(m.formatCurrency(g.invoice_amount)),1)]),_:2},1024),e(t(F),null,{default:l(()=>[o("W"+x(g.week_number)+"/"+x(g.year),1)]),_:2},1024),e(t(F),{class:"text-right"},{default:l(()=>[e(t(D),{type:"button",variant:"outline",size:"sm",class:"h-8 px-2",onClick:$=>m.$emit("editInvoice",g)},{default:l(()=>[e(f,{name:"pencil",class:"h-4 w-4 mr-1"}),n[9]||(n[9]=o(" Edit "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(r(),c("div",lo," No canceled QS invoices found. "))]),e(t(we),{class:"mt-4 flex flex-col gap-2 sm:flex-row"},{default:l(()=>[e(t(D),{type:"button",onClick:n[0]||(n[0]=g=>A.value=!1),variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>n[10]||(n[10]=[o(" Close ")])),_:1})]),_:1})]}),_:1})]),_:1},8,["open"]))}}),ao={class:"flex items-center gap-2"},oo={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},ro={key:0},io={class:"space-y-4"},uo={class:"rounded-lg border p-4 bg-muted/10 space-y-3"},mo={class:"flex items-center gap-2"},po={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},fo=["disabled"],vo=["disabled"],co={key:0,class:"pt-2 border-t"},go={class:"relative"},xo=["disabled"],yo=["value"],wo={class:"cursor-pointer mt-3"},bo=["disabled"],ko={key:0,class:"mt-3 text-xs text-primary font-medium"},_o={key:0,class:"flex items-center gap-2 text-sm text-muted-foreground"},$o=["href"],So={key:1,class:"flex items-center justify-center gap-2 p-4"},ho={key:1,class:"space-y-4"},Co={class:"border-t p-4 flex justify-end gap-3"},Do={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Ao=H({__name:"ImportModal",props:{open:{type:Boolean},importValidationResults:{},isValidating:{type:Boolean},isImporting:{type:Boolean},importType:{},importTenantId:{},isAdmin:{type:Boolean},tenants:{},templateUrl:{},isDragging:{type:Boolean},hasWarnings:{type:Boolean},formatCurrency:{type:Function}},emits:["update:open","update:importType","update:importTenantId","closeImportModal","confirmImport","downloadErrorReport","onImportInputChange","onDragEnter","onDragOver","onDragLeave","onDrop"],setup(L,{emit:d}){const u=L,w=d,A=P({get:()=>u.open,set:$=>w("update:open",$)}),m=P({get:()=>u.importType,set:$=>w("update:importType",$)}),n=P({get:()=>String(u.importTenantId??""),set:$=>w("update:importTenantId",$)});function i($){var N;const C=$.target,T=(N=C.files)==null?void 0:N[0];T&&(w("onImportInputChange",T),C.value="")}function g($){var T,N;const C=(N=(T=$.dataTransfer)==null?void 0:T.files)==null?void 0:N[0];C&&w("onDrop",C)}return($,C)=>(r(),b(t(me),{open:A.value,"onUpdate:open":C[8]||(C[8]=T=>A.value=T)},{default:l(()=>[e(t(de),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:l(()=>[e(t(pe),{class:"px-4 sm:px-6 border-b pb-3"},{default:l(()=>[s("div",ao,[e(f,{name:"upload",class:"h-5 w-5 text-primary"}),e(t(fe),{class:"text-lg sm:text-xl font-semibold"},{default:l(()=>C[9]||(C[9]=[o(" Import Repair Orders ")])),_:1})]),e(t(ue),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:l(()=>C[10]||(C[10]=[o(" Choose an import format, then upload a CSV. The file will be validated before import. ")])),_:1})]),_:1}),s("div",oo,[$.importValidationResults?(r(),c("div",ho)):(r(),c("div",ro,[s("div",io,[s("div",uo,[s("div",mo,[e(f,{name:"sliders",class:"h-4 w-4 text-muted-foreground"}),C[11]||(C[11]=s("div",{class:"text-sm font-semibold"},"Import format",-1))]),s("div",po,[s("label",{class:ve(["flex items-start gap-3 rounded-md border p-3 cursor-pointer hover:bg-muted/20 transition-colors",m.value==="template"?"border-primary bg-primary/5":""])},[Y(s("input",{type:"radio",class:"mt-1",value:"template","onUpdate:modelValue":C[0]||(C[0]=T=>m.value=T),disabled:$.isValidating},null,8,fo),[[Dt,m.value]]),C[12]||(C[12]=s("div",{class:"space-y-1"},[s("div",{class:"text-sm font-medium"},"Template Import"),s("div",{class:"text-xs text-muted-foreground"}," Uses the standard Repair Orders CSV template (download below). ")],-1))],2),s("label",{class:ve(["flex items-start gap-3 rounded-md border p-3 cursor-pointer hover:bg-muted/20 transition-colors",m.value==="quicksight"?"border-primary bg-primary/5":""])},[Y(s("input",{type:"radio",class:"mt-1",value:"quicksight","onUpdate:modelValue":C[1]||(C[1]=T=>m.value=T),disabled:$.isValidating},null,8,vo),[[Dt,m.value]]),C[13]||(C[13]=s("div",{class:"space-y-1"},[s("div",{class:"text-sm font-medium"},"QuickSight CSV Import"),s("div",{class:"text-xs text-muted-foreground"}," Upload a QuickSight-exported CSV and we’ll map columns automatically. ")],-1))],2)]),$.isAdmin&&m.value==="quicksight"?(r(),c("div",co,[e(t(R),{class:"flex items-center gap-1.5 mb-2 text-sm font-medium"},{default:l(()=>[e(f,{name:"building",class:"h-4 w-4 text-muted-foreground"}),C[14]||(C[14]=o(" Company (required for QuickSight import) "))]),_:1}),s("div",go,[Y(s("select",{"onUpdate:modelValue":C[2]||(C[2]=T=>n.value=T),class:"flex h-10 w-full appearance-none items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",disabled:$.isValidating},[C[15]||(C[15]=s("option",{value:""},"Select a company",-1)),(r(!0),c(E,null,q($.tenants,T=>(r(),c("option",{key:T.id,value:String(T.id)},x(T.name),9,yo))),128))],8,xo),[[J,n.value]]),C[16]||(C[16]=s("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[s("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))]),$.isAdmin&&m.value==="quicksight"&&!n.value?(r(),b(t(Me),{key:0,variant:"destructive",class:"mt-3"},{default:l(()=>[e(t(Ie),{class:"flex items-center gap-2"},{default:l(()=>[e(f,{name:"alert_circle",class:"h-5 w-5"}),C[17]||(C[17]=o(" Required "))]),_:1}),e(t(Oe),null,{default:l(()=>C[18]||(C[18]=[o(" Please select a company before validating a QuickSight CSV. ")])),_:1})]),_:1})):_("",!0)])):_("",!0)]),s("div",{class:ve(["flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20 transition-colors",{"border-primary bg-primary/5":$.isDragging,"opacity-60 pointer-events-none":$.isValidating}]),onDragenter:C[3]||(C[3]=te(T=>$.$emit("onDragEnter"),["prevent"])),onDragover:C[4]||(C[4]=te(T=>$.$emit("onDragOver"),["prevent"])),onDragleave:C[5]||(C[5]=te(T=>$.$emit("onDragLeave"),["prevent"])),onDrop:te(g,["prevent"])},[e(f,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),C[20]||(C[20]=s("div",{class:"text-center"},[s("div",{class:"text-sm font-medium"},[s("span",{class:"text-primary"},"Drag & drop"),o(" your CSV here ")]),s("p",{class:"text-xs text-muted-foreground mt-1"},"or")],-1)),s("label",wo,[C[19]||(C[19]=s("span",{class:"text-sm font-medium text-primary hover:underline"}," Choose CSV file ",-1)),s("input",{type:"file",class:"hidden",accept:".csv,text/csv",disabled:$.isValidating||$.isAdmin&&m.value==="quicksight"&&!n.value,onChange:i},null,40,bo)]),C[21]||(C[21]=s("p",{class:"text-xs text-muted-foreground mt-2"},"CSV only",-1)),$.isDragging?(r(),c("div",ko," Drop file to validate ")):_("",!0)],34),m.value==="template"?(r(),c("div",_o,[e(f,{name:"info",class:"h-4 w-4"}),s("a",{href:$.templateUrl,download:"",class:"text-primary hover:underline"}," Download CSV Template ",8,$o)])):_("",!0),$.isValidating?(r(),c("div",So,C[22]||(C[22]=[s("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),s("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):_("",!0)])]))]),s("div",Co,[e(t(D),{onClick:C[6]||(C[6]=T=>$.$emit("closeImportModal")),variant:"outline",disabled:$.isImporting},{default:l(()=>C[23]||(C[23]=[o(" Close ")])),_:1},8,["disabled"]),$.importValidationResults&&$.importValidationResults.summary.valid>0?(r(),b(t(D),{key:0,onClick:C[7]||(C[7]=T=>$.$emit("confirmImport")),variant:"default",disabled:$.isImporting||$.importValidationResults.summary.invalid>0||!!$.importValidationResults.header_error,class:"flex items-center gap-2"},{default:l(()=>[$.isImporting?(r(),c("div",Do)):(r(),b(f,{key:1,name:"check",class:"h-4 w-4"})),o(" "+x($.isImporting?"Importing...":`Import ${$.importValidationResults.summary.valid} Rows`),1)]),_:1},8,["disabled"])):_("",!0)])]),_:1})]),_:1},8,["open"]))}}),Vo={class:"w-full pt-6 md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto p-1 space-y-6"},Io={key:4,class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},Oo="/storage/upload-data-temps/Repair Orders Template.csv",Mo=H({__name:"RepairOrdersComponent",props:{repairOrders:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},SuperAdmin:{type:Boolean,default:!1},tenants:{type:Array,default:()=>[]},trucks:{type:Array,default:()=>[]},vendors:{type:Array,default:()=>[]},areasOfConcern:{type:Array,default:()=>[]},dateRange:{type:Object,default:null},dateFilter:{type:String,default:"yesterday"},woStatuses:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},canceledQSInvoices:{type:Array,default:()=>[]},outstandingInvoices:{type:Array,default:()=>[]},workOrdersByTruck:{type:Array,default:()=>[]},workOrderByAreasOfConcern:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({search:"",vendor_id:"",status_id:""})},perPage:{type:Number,default:10},openedComponent:{type:String,default:"trucks"},permissions:{type:Array,default:()=>[]},importValidation:{type:Object,default:null}},setup(L){const d=L,u=O({...d.filters,dateFilter:d.dateFilter}),w=O(d.perPage),A=O([]),m=O(!1),n=O(""),i=O(""),g=O(!1),$=O(!1),C=O(!1),T=O(!1),N=O(!1),Z=O(!1),ne=O(!1),ae=O(!1),X=O(null),ce=O(!1),ee=O(!1),V=O("template"),oe=O(""),re=O(!1);let se=0;Ge(()=>{const p=h=>h.preventDefault();window.addEventListener("dragover",p),window.addEventListener("drop",p),Ke(()=>{window.removeEventListener("dragover",p),window.removeEventListener("drop",p)})});const z=O("Create"),S=Ce({id:null,tenant_id:d.SuperAdmin?"":null,ro_number:"",ro_open_date:"",ro_close_date:"",truck_id:null,vendor_id:null,wo_number:"",wo_status_id:null,invoice:"",invoice_amount:"",invoice_received:!1,on_qs:"no",qs_invoice_date:"",disputed:!1,dispute_outcome:"",repairs_made:"",area_of_concerns:[]}),k=Ce({concern:""}),I=Ce({vendor_name:""}),j=Ce({name:""}),W=P(()=>d.SuperAdmin),Ve=P(()=>d.repairOrders.data.length>0),Pe=P(()=>Ve.value&&d.repairOrders.data.every(p=>A.value.includes(p.id))),be=[{label:"Yesterday",value:"yesterday"},{label:"WTD",value:"current-week"},{label:"T6W",value:"6w"},{label:"Quarterly",value:"quarterly"}],ge=p=>{if(!p)return"";const h=p.split("-");if(h.length!==3)return p;const[M,_e,Re]=h;return`${Number(_e)}/${Number(Re)}/${M}`};function Te(p){return p?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p):"$0.00"}function Ne(p){u.value.dateFilter=p,Fe()}const Je=P(()=>{const p=X.value;return p?(p.invalid||[]).some(h=>(h.warnings||[]).length>0):!1});function Fe(){const p=d.SuperAdmin?"repair_orders.index.admin":"repair_orders.index",h={...d.SuperAdmin?{}:{tenantSlug:d.tenantSlug},...u.value,perPage:w.value,dateFilter:u.value.dateFilter,openedComponent:"repairOrders"};le.visit(route(p,h),{only:["repairOrders","filters","perPage","dateFilter","weekNumber","startWeekNumber","endWeekNumber","year","workOrdersByTruck","workOrderByAreasOfConcern","openedComponent","dateRange"]})}function Le(){u.value={...u.value,search:"",vendor_id:"",status_id:""},Fe()}const xe=O({column:"ro_number",direction:"asc"});function Xe(p){xe.value.column===p?xe.value.direction=xe.value.direction==="asc"?"desc":"asc":xe.value={column:p,direction:"asc"},Fe()}function et(){Fe()}function tt(p){if(!p)return;const h=new URL(p),M=h.origin+h.pathname;le.get(M,{...u.value,perPage:w.value,dateFilter:u.value.dateFilter,openedComponent:"repairOrders",page:h.searchParams.get("page")||1},{preserveScroll:!0})}function Ee(p){const h=p.target.checked;A.value=h?d.repairOrders.data.map(M=>M.id):[]}const st=Vt();function lt(){if(!Ve.value){i.value="No data";return}window.location.href=d.tenantSlug?route("repair_orders.export",{tenantSlug:d.tenantSlug}):route("repair_orders.export.admin")}function qe(){ae.value=!0,X.value=null,ce.value=!1,ee.value=!1,V.value="template",oe.value="",re.value=!1,se=0}function nt(){S.reset(),z.value="Create",$.value=!0}function We(p){S.reset(),S.id=p.id,S.tenant_id=p.tenant_id,S.ro_number=p.ro_number,S.ro_open_date=p.ro_open_date,S.ro_close_date=p.ro_close_date||"",S.truck_id=p.truck_id,S.vendor_id=p.vendor_id,S.wo_number=p.wo_number??"",S.wo_status_id=p.wo_status_id??null,S.invoice=p.invoice||"",S.invoice_amount=p.invoice_amount||"",S.invoice_received=!!p.invoice_received,S.on_qs=p.on_qs||"no",S.qs_invoice_date=p.qs_invoice_date||"",S.disputed=!!p.disputed,S.dispute_outcome=p.dispute_outcome||"",S.repairs_made=p.repairs_made||"",S.area_of_concerns=[],p.areas_of_concern&&Array.isArray(p.areas_of_concern)&&(S.area_of_concerns=p.areas_of_concern.map(h=>h.id)),z.value="Update",$.value=!0}function at(){S.reset(),$.value=!1}function ot(){S.wo_status_id===""&&(S.wo_status_id=null),S.wo_number===null&&(S.wo_number="");const p=z.value==="Update"?d.tenantSlug?route("repair_orders.update",[d.tenantSlug,S.id]):route("repair_orders.update.admin",S.id):d.tenantSlug?route("repair_orders.store",{tenantSlug:d.tenantSlug}):route("repair_orders.store.admin");S[z.value==="Update"?"put":"post"](p,{onSuccess:()=>{n.value=`${z.value}d!`,$.value=!1}})}let Ue=null;function rt(p){Ue=p,C.value=!0}function it(){if(Ue===null)return;const p=d.tenantSlug?route("repair_orders.destroy",[d.tenantSlug,Ue]):route("repair_orders.destroy.admin",Ue);le.delete(p,{onSuccess:()=>{n.value="Deleted",C.value=!1}})}function dt(){T.value=!0}function ut(){const p=d.tenantSlug?route("repair_orders.destroyBulk",{tenantSlug:d.tenantSlug}):route("repair_orders.destroyBulk.admin");Ce({ids:A.value}).delete(p,{onSuccess:()=>{n.value=`${A.value.length} deleted`,A.value=[],T.value=!1}})}function je(){k.reset(),N.value=!0}function mt(){k.post(route("area_of_concerns.store.admin"),{onSuccess:()=>k.reset()})}function pt(p){le.delete(route("area_of_concerns.destroy.admin",p))}function ft(p){le.post(route("area_of_concerns.restore.admin",p))}function vt(){I.reset(),Z.value=!0}function ct(){I.post(route("vendors.store.admin"),{onSuccess:()=>I.reset()})}function gt(p){le.delete(route("vendors.destroy.admin",p))}function Qe(p){le.post(route("vendors.restore.admin",p))}function xt(p){le.delete(route("vendors.forceDelete.admin",p))}function ie(){j.reset(),ne.value=!0}function y(){j.post(route("wo_statuses.store.admin"),{onSuccess:()=>j.reset()})}function a(p){le.delete(route("wo_statuses.destroy.admin",p))}function v(p){le.post(route("wo_statuses.restore.admin",p))}function U(p){le.delete(route("wo_statuses.forceDelete.admin",p))}const Be=P(()=>d.canceledQSInvoices.length>0),K=O(!1),ke=P(()=>Object.fromEntries(d.areasOfConcern.map(p=>[p.id,p.concern]))),ye=P(()=>d.areasOfConcern.filter(p=>!S.area_of_concerns.includes(p.id)));function yt(p){const h=Number(p.target.value);h&&!S.area_of_concerns.includes(h)&&S.area_of_concerns.push(h),p.target.value=""}function Ft(p){S.area_of_concerns=S.area_of_concerns.filter(h=>h!==p)}const Tt=P(()=>(d.dateFilter==="yesterday"||d.dateFilter==="current-week")&&d.weekNumber&&d.year?`Week ${d.weekNumber}, ${d.year}`:(d.dateFilter==="6w"||d.dateFilter==="quarterly")&&d.startWeekNumber&&d.endWeekNumber&&d.year?`Weeks ${d.startWeekNumber}-${d.endWeekNumber}, ${d.year}`:"");Ge(()=>{const p=h=>{g.value&&!h.target.closest(".relative")&&(g.value=!1)};document.addEventListener("click",p),Ke(()=>document.removeEventListener("click",p))}),ze(n,p=>{p&&setTimeout(()=>n.value="",5e3)});const Nt=P(()=>(d.workOrderByAreasOfConcern||[]).slice(0,5)),Ut=P(()=>(d.workOrdersByTruck||[]).slice(0,5)),Ye=O(null),He=O(null),wt=O(!1),$t=P(()=>d.outstandingInvoices.filter(p=>{const h=Ye.value!=null?Number(p.invoice_amount)>=Ye.value:!0,M=He.value?new Date(p.qs_invoice_date)>new Date(He.value):!0;return h&&M})),Bt=P(()=>$t.value.reduce((p,h)=>p+Number(h.invoice_amount||0),0)),bt=P(()=>d.permissions.map(p=>p.name)),Pt=P(()=>{const p=[];u.value.search&&p.push(`Search: "${u.value.search}"`);const h=d.vendors.find(_e=>_e.id==u.value.vendor_id);h&&p.push(`Vendor: ${h.vendor_name}`);const M=d.woStatuses.find(_e=>_e.id==u.value.status_id);return M&&p.push(`Status: ${M.name}`),p});function St(){ae.value=!1,X.value=null,ce.value=!1,ee.value=!1,V.value="template",oe.value="",re.value=!1,se=0}function Et(p){ht(p)}function ht(p){if(!p)return;if(W.value&&V.value==="quicksight"&&!oe.value){i.value="Please select a company before validating a QuickSight CSV.",setTimeout(()=>i.value="",4e3);return}if(!(p.type==="text/csv"||p.name.toLowerCase().endsWith(".csv")||p.type==="")){i.value="Please upload a valid CSV file.",setTimeout(()=>i.value="",4e3);return}ce.value=!0;const M=new FormData;M.append("file",p),M.append("importType",V.value),W.value&&V.value==="quicksight"&&M.append("tenant_id",String(oe.value));const _e=d.tenantSlug?route("repair_orders.validateImport",{tenantSlug:d.tenantSlug}):route("repair_orders.validateImport.admin");le.post(_e,M,{forceFormData:!0,preserveScroll:!0,only:["flash"],onFinish:()=>{ce.value=!1},onError:()=>{ce.value=!1,i.value="Failed to validate CSV file"}})}function Rt(){se+=1,re.value=!0}function zt(){re.value=!0}function Lt(){se-=1,se<=0&&(se=0,re.value=!1)}function qt(p){se=0,re.value=!1,ht(p)}function Wt(){if(!X.value||X.value.summary.invalid>0)return;if(W.value&&V.value==="quicksight"&&!oe.value){i.value="Please select a company before importing a QuickSight CSV.";return}ee.value=!0;const p=d.tenantSlug?route("repair_orders.confirmImport",{tenantSlug:d.tenantSlug}):route("repair_orders.confirmImport.admin");le.post(p,{importType:V.value,...W.value&&V.value==="quicksight"?{tenant_id:oe.value}:{}},{preserveScroll:!0,onSuccess:()=>{ee.value=!1,n.value=`Successfully imported ${X.value.summary.valid} repair orders`,St()},onError:()=>{ee.value=!1,i.value="Failed to import repair orders"}})}function jt(){const p=d.tenantSlug?route("repair_orders.downloadErrorReport",{tenantSlug:d.tenantSlug}):route("repair_orders.downloadErrorReport.admin");window.location.href=p}ze(()=>{var p;return(p=st.props.flash)==null?void 0:p.importValidation},p=>{if(p){if(p.results){X.value=p.results,p.header_error&&(X.value.header_error=p.header_error),ae.value=!0;return}p.message&&(i.value=p.message)}},{immediate:!1});async function Qt(p){var M,_e;K.value=!1,await Gt();const h=(((M=d.repairOrders)==null?void 0:M.data)||[]).find(Re=>Re.id===p.id)||(((_e=d.repairOrders)==null?void 0:_e.data)||[]).find(Re=>Re.ro_number===p.ro_number);We(h||p)}return(p,h)=>(r(),c(E,null,[s("div",Vo,[e(Vl,{successMessage:n.value,errorMessage:i.value},null,8,["successMessage","errorMessage"]),e(Fl,{permissionNames:bt.value,selectedIds:A.value,isAdmin:W.value,onOpenCreateModal:nt,onConfirmBulkDelete:dt,onOpenAreasModal:je,onOpenVendorsModal:vt,onOpenStatusModal:ie,onOpenImportModal:qe,onExportCsv:lt},null,8,["permissionNames","selectedIds","isAdmin"]),e(Ll,{hasCanceledQSInvoices:Be.value,SuperAdmin:d.SuperAdmin,permissionNames:bt.value,canceledQSInvoices:d.canceledQSInvoices,onOpenDialog:h[0]||(h[0]=M=>K.value=!0)},null,8,["hasCanceledQSInvoices","SuperAdmin","permissionNames","canceledQSInvoices"]),e(Gl,{dateOptions:be,filter:u.value,dateRange:d.dateRange,dateFilter:d.dateFilter,weekNumberText:Tt.value,formatDate:ge,onSelectDate:Ne},null,8,["filter","dateRange","dateFilter","weekNumberText"]),(L.dateFilter==="quarterly"||L.dateFilter==="6w")&&!d.SuperAdmin?(r(),b(rn,{key:0,topAreasOfConcern:Nt.value,topWorkOrdersByTruck:Ut.value},null,8,["topAreasOfConcern","topWorkOrdersByTruck"])):_("",!0),d.SuperAdmin?_("",!0):(r(),b(mn,{key:1,minInvoiceAmount:Ye.value,"onUpdate:minInvoiceAmount":h[1]||(h[1]=M=>Ye.value=M),outstandingDate:He.value,"onUpdate:outstandingDate":h[2]||(h[2]=M=>He.value=M)},null,8,["minInvoiceAmount","outstandingDate"])),d.SuperAdmin?_("",!0):(r(),b(bn,{key:2,filteredOutstandingInvoices:$t.value,totalFilteredOutstanding:Bt.value,showOutstandingInvoicesSection:wt.value,formatCurrency:Te,onToggleShow:h[3]||(h[3]=M=>wt.value=!wt.value)},null,8,["filteredOutstandingInvoices","totalFilteredOutstanding","showOutstandingInvoicesSection"])),e(Mn,{showFilters:m.value,activeFilterBadges:Pt.value,filter:u.value,vendors:d.vendors,woStatuses:d.woStatuses,onToggleShowFilters:h[4]||(h[4]=M=>m.value=!m.value),onResetFilters:Le,onApplyFilters:Fe},null,8,["showFilters","activeFilterBadges","filter","vendors","woStatuses"]),Ve.value?(r(),b(Xn,{key:3,repairOrders:d.repairOrders,permissionNames:bt.value,isAdmin:W.value,selectedIds:A.value,"onUpdate:selectedIds":h[5]||(h[5]=M=>A.value=M),allSelected:Pe.value,sortState:xe.value,localPerPage:w.value,"onUpdate:localPerPage":h[6]||(h[6]=M=>w.value=M),tenantSlug:d.tenantSlug,filter:u.value,formatDate:ge,formatCurrency:Te,onToggleAll:Ee,onSort:Xe,onOpenEdit:We,onDeleteOne:rt,onChangePerPage:et,onGo:tt},null,8,["repairOrders","permissionNames","isAdmin","selectedIds","allSelected","sortState","localPerPage","tenantSlug","filter"])):(r(),c("div",Io,[e(f,{name:"database-x",class:"h-16 w-16 mx-auto mb-4 opacity-70"}),h[22]||(h[22]=s("h2",{class:"text-lg font-medium"},"There is No Data to give Information about.",-1))])),e(Oa,{open:$.value,"onUpdate:open":h[7]||(h[7]=M=>$.value=M),isAdmin:W.value,tenants:d.tenants,trucks:d.trucks,vendors:d.vendors,woStatuses:d.woStatuses,areasOfConcern:d.areasOfConcern,form:t(S),formAction:z.value,areasMap:ke.value,availableAreas:ye.value,onSubmitForm:ot,onCloseModal:at,onAddArea:yt,onRemoveArea:Ft},null,8,["open","isAdmin","tenants","trucks","vendors","woStatuses","areasOfConcern","form","formAction","areasMap","availableAreas"]),e(Ma,{open:C.value,"onUpdate:open":h[8]||(h[8]=M=>C.value=M),onConfirmDelete:it,onCancel:h[9]||(h[9]=M=>C.value=!1)},null,8,["open"]),e(Fa,{open:T.value,"onUpdate:open":h[10]||(h[10]=M=>T.value=M),selectedCount:A.value.length,onDeleteBulk:ut,onCancel:h[11]||(h[11]=M=>T.value=!1)},null,8,["open","selectedCount"]),e(Ra,{open:N.value,"onUpdate:open":h[12]||(h[12]=M=>N.value=M),areasOfConcern:d.areasOfConcern,areas:L.areasOfConcern,areaForm:t(k),onSubmitArea:mt,onDeleteArea:pt,onRestoreArea:ft,onClose:h[13]||(h[13]=M=>N.value=!1)},null,8,["open","areasOfConcern","areas","areaForm"]),e(Ya,{open:Z.value,"onUpdate:open":h[14]||(h[14]=M=>Z.value=M),vendors:L.vendors,vendorForm:t(I),onSubmitVendor:ct,onDeleteVendor:gt,onRestoreVendor:Qe,onForceDeleteVendor:xt,onClose:h[15]||(h[15]=M=>Z.value=!1)},null,8,["open","vendors","vendorForm"]),e(eo,{open:ne.value,"onUpdate:open":h[16]||(h[16]=M=>ne.value=M),woStatuses:d.woStatuses,statusForm:t(j),onSubmitStatus:y,onDeleteStatus:a,onRestoreStatus:v,onForceDeleteStatus:U,onClose:h[17]||(h[17]=M=>ne.value=!1)},null,8,["open","woStatuses","statusForm"]),e(no,{open:K.value,"onUpdate:open":h[18]||(h[18]=M=>K.value=M),canceledQSInvoices:d.canceledQSInvoices,formatCurrency:Te,onEditInvoice:Qt},null,8,["open","canceledQSInvoices"])]),e(Ao,{open:ae.value,"onUpdate:open":h[19]||(h[19]=M=>ae.value=M),importType:V.value,"onUpdate:importType":h[20]||(h[20]=M=>V.value=M),importTenantId:oe.value,"onUpdate:importTenantId":h[21]||(h[21]=M=>oe.value=M),importValidationResults:X.value,isValidating:ce.value,isImporting:ee.value,isAdmin:W.value,tenants:d.tenants,templateUrl:Oo,isDragging:re.value,hasWarnings:Je.value,onOpenImportModal:qe,onCloseImportModal:St,onConfirmImport:Wt,onDownloadErrorReport:jt,onOnImportInputChange:Et,onOnDragEnter:Rt,onOnDragOver:zt,onOnDragLeave:Lt,onOnDrop:qt,formatCurrency:Te},null,8,["open","importType","importTenantId","importValidationResults","isValidating","isImporting","isAdmin","tenants","isDragging","hasWarnings"])],64))}}),Fo={class:"bg-card rounded-lg border shadow-sm p-4 md:p-6 mb-6"},To={class:"flex justify-between items-center mb-4"},No={class:"overflow-x-auto max-h-80"},Uo={class:"flex justify-center space-x-2"},Bo={key:0,class:"border-t mt-4 px-4 py-3 bg-muted/20"},Po={class:"flex flex-col sm:flex-row items-center justify-between gap-2"},Eo={class:"text-sm text-muted-foreground"},Ro={class:"flex flex-wrap gap-2"},zo={class:"grid grid-cols-2 gap-4"},Lo={key:0,class:"grid grid-cols-2 gap-4"},qo={class:"mt-1"},Wo={class:"mt-1"},jo=H({__name:"MilesDrivenTable",props:{milesEntries:{},tenantSlug:{},permissions:{}},setup(L){const d=L,u=O(!1),w=O("week_start_date"),A=O("desc"),m=O(1),n=O(10),i=O(!1),g=Ce({id:null,year:"",week_number:"",week_start_date:"",week_end_date:"",miles:"",notes:""}),$=P(()=>{const S=[...d.milesEntries];return S.sort((k,I)=>{let j=k[w.value],W=I[w.value];return j>W?A.value==="asc"?1:-1:j<W?A.value==="asc"?-1:1:0}),S}),C=P(()=>Math.ceil($.value.length/n.value)),T=P(()=>{const S=(m.value-1)*n.value,k=S+n.value;return $.value.slice(S,k)}),N=P(()=>{const S=[];if(C.value<=5)for(let I=1;I<=C.value;I++)S.push(I);else{let I=Math.max(1,m.value-Math.floor(2.5)),j=Math.min(C.value,I+5-1);j===C.value&&(I=Math.max(1,j-5+1));for(let W=I;W<=j;W++)S.push(W)}return S});function Z(S){S<1||S>C.value||(m.value=S)}function ne(S){w.value===S?A.value=A.value==="asc"?"desc":"asc":(w.value=S,A.value="asc"),m.value=1}function ae(S=null){if(g.reset(),g.clearErrors(),S){g.id=S.id,g.week_start_date=S.week_start_date,g.week_end_date=S.week_end_date,g.miles=S.miles,g.notes=S.notes;const k=new Date(S.week_start_date),I=new Date(Date.UTC(k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate()));I.setUTCDate(I.getUTCDate()+4-(I.getUTCDay()||7));const j=I.getUTCFullYear(),W=Math.ceil(((I-Date.UTC(j,0,1))/864e5+1)/7)+1;g.year=j,g.week_number=W}u.value=!0}function X(){const S=+g.year,k=+g.week_number;if(!S||!k){g.week_start_date="",g.week_end_date="";return}const I=new Date(Date.UTC(S,0,4)),j=I.getUTCDay()||7;I.setUTCDate(I.getUTCDate()+(k-1)*7+(1-j));const W=new Date(I);W.setUTCDate(I.getUTCDate()-1);const Ve=new Date(W);Ve.setUTCDate(W.getUTCDate()+6),g.week_start_date=W.toISOString().slice(0,10),g.week_end_date=Ve.toISOString().slice(0,10)}function ce(){const S=g.id?"miles_driven.update":"miles_driven.store",k=g.id?{tenantSlug:d.tenantSlug,milesDriven:g.id}:{tenantSlug:d.tenantSlug};g[g.id?"put":"post"](At(S,k),{preserveScroll:!0,onSuccess:()=>{u.value=!1}})}const ee=O(null);function V(S){ee.value=S,i.value=!0}function oe(){if(!ee.value)return;const S="miles_driven.destroy",k={tenantSlug:d.tenantSlug,milesDriven:ee.value.id};g.delete(At(S,k),{preserveScroll:!0,onSuccess:()=>{i.value=!1,ee.value=null}})}function re(S){if(!S)return"";const k=new Date(S);return new Date(k.getTime()+k.getTimezoneOffset()*6e4).toLocaleDateString()}function se(S){return Number(S).toLocaleString(void 0,{minimumFractionDigits:4,maximumFractionDigits:4})}const z=P(()=>d.permissions.map(S=>S.name));return(S,k)=>(r(),c("div",Fo,[s("div",To,[k[14]||(k[14]=s("h3",{class:"text-base md:text-xl font-semibold"}," Miles Driven ",-1)),z.value.includes("miles-driven.create")?(r(),b(t(D),{key:0,onClick:k[0]||(k[0]=I=>ae()),variant:"default"},{default:l(()=>[e(f,{name:"plus",class:"mr-2 h-4 w-4"}),k[13]||(k[13]=s("span",null,"Add Miles Driven",-1))]),_:1})):_("",!0)]),s("div",No,[e(t($e),{class:"w-full table-auto"},{default:l(()=>[e(t(Se),null,{default:l(()=>[e(t(Q),{class:"sticky top-0 z-10 border-b bg-background"},{default:l(()=>[e(t(B),{class:"cursor-pointer px-4 py-2 text-left",onClick:k[1]||(k[1]=I=>ne("week_start_date"))},{default:l(()=>[k[15]||(k[15]=o(" Week Start ")),s("span",null,[w.value==="week_start_date"&&A.value==="asc"?(r(),b(f,{key:0,name:"chevron-up"})):w.value==="week_start_date"&&A.value==="desc"?(r(),b(f,{key:1,name:"chevron-down"})):(r(),b(f,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),e(t(B),{class:"cursor-pointer px-4 py-2 text-left",onClick:k[2]||(k[2]=I=>ne("week_end_date"))},{default:l(()=>[k[16]||(k[16]=o(" Week End ")),s("span",null,[w.value==="week_end_date"&&A.value==="asc"?(r(),b(f,{key:0,name:"chevron-up"})):w.value==="week_end_date"&&A.value==="desc"?(r(),b(f,{key:1,name:"chevron-down"})):(r(),b(f,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),e(t(B),{class:"cursor-pointer px-4 py-2 text-left",onClick:k[3]||(k[3]=I=>ne("miles"))},{default:l(()=>[k[17]||(k[17]=o(" Miles ")),s("span",null,[w.value==="miles"&&A.value==="asc"?(r(),b(f,{key:0,name:"chevron-up"})):w.value==="miles"&&A.value==="desc"?(r(),b(f,{key:1,name:"chevron-down"})):(r(),b(f,{key:2,name:"chevron-up-down",class:"opacity-50"}))])]),_:1}),z.value.includes("miles-driven.update")||z.value.includes("miles-driven.delete")?(r(),b(t(B),{key:0,class:"text-center px-4 py-2"},{default:l(()=>k[18]||(k[18]=[o(" Actions ")])),_:1})):_("",!0)]),_:1})]),_:1}),e(t(he),null,{default:l(()=>[(r(!0),c(E,null,q(T.value,I=>(r(),b(t(Q),{key:I.id,class:"border-b hover:bg-muted/20"},{default:l(()=>[e(t(F),{class:"px-4 py-3"},{default:l(()=>[o(x(re(I.week_start_date)),1)]),_:2},1024),e(t(F),{class:"px-4 py-3"},{default:l(()=>[o(x(re(I.week_end_date)),1)]),_:2},1024),e(t(F),{class:"px-4 py-3"},{default:l(()=>[o(x(se(I.miles)),1)]),_:2},1024),z.value.includes("miles-driven.update")||z.value.includes("miles-driven.delete")?(r(),b(t(F),{key:0,class:"text-center px-4 py-3"},{default:l(()=>[s("div",Uo,[z.value.includes("miles-driven.update")?(r(),b(t(D),{key:0,variant:"outline",size:"sm",onClick:j=>ae(I)},{default:l(()=>[e(f,{name:"pencil",class:"mr-1 h-4 w-4"}),k[19]||(k[19]=s("span",null,"Edit",-1))]),_:2},1032,["onClick"])):_("",!0),z.value.includes("miles-driven.delete")?(r(),b(t(D),{key:1,variant:"destructive",size:"sm",onClick:j=>V(I)},{default:l(()=>[e(f,{name:"trash",class:"mr-1 h-4 w-4"}),k[20]||(k[20]=s("span",null,"Delete",-1))]),_:2},1032,["onClick"])):_("",!0)])]),_:2},1024)):_("",!0)]),_:2},1024))),128)),S.milesEntries.length?_("",!0):(r(),b(t(Q),{key:0},{default:l(()=>[e(t(F),{colspan:5,class:"py-4 text-center text-muted-foreground"},{default:l(()=>k[21]||(k[21]=[o(" No miles driven records found ")])),_:1})]),_:1}))]),_:1})]),_:1})]),C.value>1?(r(),c("div",Bo,[s("div",Po,[s("div",Eo," Showing "+x(T.value.length)+" of "+x(S.milesEntries.length)+" entries ",1),s("div",Ro,[e(t(D),{onClick:k[4]||(k[4]=I=>Z(m.value-1)),disabled:m.value===1,variant:"ghost",size:"sm"},{default:l(()=>k[22]||(k[22]=[o(" Previous ")])),_:1},8,["disabled"]),(r(!0),c(E,null,q(N.value,I=>(r(),b(t(D),{key:I,onClick:j=>Z(I),variant:"ghost",size:"sm",class:ve({"border-primary bg-primary/10 text-primary":m.value===I})},{default:l(()=>[o(x(I),1)]),_:2},1032,["onClick","class"]))),128)),e(t(D),{onClick:k[5]||(k[5]=I=>Z(m.value+1)),disabled:m.value===C.value,variant:"ghost",size:"sm"},{default:l(()=>k[23]||(k[23]=[o(" Next ")])),_:1},8,["disabled"])])])])):_("",!0),e(t(me),{open:u.value,"onUpdate:open":k[10]||(k[10]=I=>u.value=I)},{default:l(()=>[e(t(de),{class:"sm:max-w-md w-full max-h-[90vh] overflow-auto"},{default:l(()=>[e(t(pe),null,{default:l(()=>[e(t(fe),null,{default:l(()=>[o(x(t(g).id?"Edit Miles Driven":"Add Miles Driven"),1)]),_:1}),e(t(ue),{class:"text-muted-foreground"},{default:l(()=>[o(x(t(g).id?"Update this record.":"Fill in the new miles driven record."),1)]),_:1})]),_:1}),s("form",{onSubmit:te(ce,["prevent"]),class:"grid gap-4 py-4"},[s("div",zo,[s("div",null,[e(t(R),{for:"year"},{default:l(()=>k[24]||(k[24]=[o("Year")])),_:1}),e(t(G),{id:"year",type:"number",modelValue:t(g).year,"onUpdate:modelValue":k[6]||(k[6]=I=>t(g).year=I),modelModifiers:{number:!0},min:"2000",max:"2100",onInput:X},null,8,["modelValue"])]),s("div",null,[e(t(R),{for:"week_number"},{default:l(()=>k[25]||(k[25]=[o("Week #")])),_:1}),e(t(G),{id:"week_number",type:"number",modelValue:t(g).week_number,"onUpdate:modelValue":k[7]||(k[7]=I=>t(g).week_number=I),modelModifiers:{number:!0},min:"1",max:"53",onInput:X},null,8,["modelValue"])])]),t(g).week_start_date?(r(),c("div",Lo,[s("div",null,[e(t(R),null,{default:l(()=>k[26]||(k[26]=[o("Start (Sun)")])),_:1}),s("p",qo,x(re(t(g).week_start_date)),1)]),s("div",null,[e(t(R),null,{default:l(()=>k[27]||(k[27]=[o("End (Sat)")])),_:1}),s("p",Wo,x(re(t(g).week_end_date)),1)])])):_("",!0),s("div",null,[e(t(R),{for:"miles"},{default:l(()=>k[28]||(k[28]=[o("Miles")])),_:1}),e(t(G),{id:"miles",modelValue:t(g).miles,"onUpdate:modelValue":k[8]||(k[8]=I=>t(g).miles=I),type:"number",step:"0.0001",min:"0",max:"999999.9999"},null,8,["modelValue"])]),e(t(we),{class:"mt-4"},{default:l(()=>[e(t(D),{variant:"outline",type:"button",onClick:k[9]||(k[9]=I=>u.value=!1)},{default:l(()=>k[29]||(k[29]=[o(" Cancel ")])),_:1}),e(t(D),{type:"submit",disabled:t(g).processing},{default:l(()=>k[30]||(k[30]=[o("Submit")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),e(t(me),{open:i.value,"onUpdate:open":k[12]||(k[12]=I=>i.value=I)},{default:l(()=>[e(t(de),{class:"max-w-[95vw] sm:max-w-md"},{default:l(()=>[e(t(pe),{class:"px-4 sm:px-6"},{default:l(()=>[e(t(fe),{class:"text-lg sm:text-xl"},{default:l(()=>k[31]||(k[31]=[o("Confirm Deletion")])),_:1}),e(t(ue),{class:"text-xs sm:text-sm"},{default:l(()=>k[32]||(k[32]=[o(" Are you sure you want to delete this miles driven record? This action cannot be undone. ")])),_:1})]),_:1}),e(t(we),{class:"px-4 sm:px-6"},{default:l(()=>[e(t(D),{type:"button",onClick:k[11]||(k[11]=I=>i.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>k[33]||(k[33]=[o(" Cancel ")])),_:1}),e(t(D),{type:"button",onClick:oe,variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>k[34]||(k[34]=[o(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Qo={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},Yo={class:"border-b"},Ho={class:"flex justify-center space-x-8 px-0 pt-4"},Go={key:0,class:"flex justify-center items-center p-12"},Ko={key:1,class:"p-0"},$r=H({__name:"AssetMaintenance",props:{entries:{type:Array,default:()=>[]},tenants:{type:Array,default:()=>[]},trucks:{type:Array,default:()=>[]},vendors:{type:Array,default:()=>[]},areasOfConcern:{type:Array,default:()=>[]},repairOrders:{type:Object,default:()=>({data:[],links:[]})},dateRange:{type:Object,default:null},woStatuses:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},canceledQSInvoices:{type:Array,default:()=>[]},outstandingInvoices:{type:Array,default:()=>[]},workOrdersByTruck:{type:Array,default:()=>[]},workOrderByAreasOfConcern:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},dateFilter:{type:String,default:"yesterday"},tenantSlug:String,SuperAdmin:Boolean,perPage:{type:Number,default:10},openedComponent:{type:String,default:"repairOrders"},milesEntries:Array,permissions:Array},setup(L){const d=L,u=O(!1),w=O(""),A=O(""),m=O(d.openedComponent||"trucks"),n=P(()=>[{title:d.tenantSlug?"Dashboard":"Admin Dashboard",href:d.tenantSlug?route("dashboard",{tenantSlug:d.tenantSlug}):route("admin.dashboard")},{title:"Asset Maintenance",href:"#"}]),i=P(()=>m.value==="trucks"?Al:m.value==="milesDriven"?jo:Mo),g=P(()=>d.permissions.map(T=>T.name)),$=P(()=>m.value==="trucks"?{entries:d.entries,tenantSlug:d.tenantSlug,SuperAdmin:d.SuperAdmin,tenants:d.tenants,trucks:d.trucks,vendors:d.vendors,areasOfConcern:d.areasOfConcern,permissions:d.permissions}:m.value==="milesDriven"?{milesEntries:d.milesEntries,tenantSlug:d.tenantSlug,permissions:d.permissions}:{repairOrders:d.repairOrders,tenantSlug:d.tenantSlug,SuperAdmin:d.SuperAdmin,tenants:d.tenants,trucks:d.trucks,vendors:d.vendors,areasOfConcern:d.areasOfConcern,dateRange:d.dateRange,woStatuses:d.woStatuses,weekNumber:d.weekNumber,startWeekNumber:d.startWeekNumber,endWeekNumber:d.endWeekNumber,year:d.year,canceledQSInvoices:d.canceledQSInvoices,outstandingInvoices:d.outstandingInvoices,workOrdersByTruck:d.workOrdersByTruck,workOrderByAreasOfConcern:d.workOrderByAreasOfConcern,filters:d.filters,dateFilter:d.dateFilter,perPage:d.perPage,permissions:d.permissions});function C(T){u.value=!0,m.value=T;const N=new URL(window.location.href);N.search="",N.searchParams.set("openedComponent",T),window.history.replaceState({},"",N.href),setTimeout(()=>{u.value=!1},300)}return(T,N)=>(r(),b(Ht,{breadcrumbs:n.value,tenantSlug:L.tenantSlug,permissions:d.permissions},{default:l(()=>[e(t(Yt),{title:"Asset Maintenance"}),s("div",Qo,[w.value?(r(),b(t(Me),{key:0,variant:"success",class:"animate-in fade-in duration-300"},{default:l(()=>[e(t(Ie),null,{default:l(()=>N[3]||(N[3]=[o("Success")])),_:1}),e(t(Oe),null,{default:l(()=>[o(x(w.value),1)]),_:1})]),_:1})):_("",!0),A.value?(r(),b(t(Me),{key:1,variant:"destructive",class:"animate-in fade-in duration-300"},{default:l(()=>[e(t(Ie),null,{default:l(()=>N[4]||(N[4]=[o("Error")])),_:1}),e(t(Oe),null,{default:l(()=>[o(x(A.value),1)]),_:1})]),_:1})):_("",!0),N[9]||(N[9]=s("div",{class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6"},[s("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Asset Maintenance "),s("div",{class:"flex flex-wrap gap-3 mt-2 sm:mt-0"})],-1)),e(t(De),{class:"shadow-sm border bg-card"},{default:l(()=>[e(t(Ae),{class:"p-0"},{default:l(()=>[s("div",Yo,[s("div",Ho,[g.value.includes("repair-orders.view")?(r(),b(t(D),{key:0,onClick:N[0]||(N[0]=Z=>C("repairOrders")),variant:"ghost",class:ve([[m.value==="repairOrders"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-0 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:l(()=>[e(f,{name:"clipboardList",class:"mr-2 h-4 w-4"}),N[5]||(N[5]=s("span",null,"Repair Orders",-1))]),_:1},8,["class"])):_("",!0),g.value.includes("miles-driven.view")?(r(),b(t(D),{key:1,onClick:N[1]||(N[1]=Z=>C("milesDriven")),variant:"ghost",class:ve([[m.value==="milesDriven"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-3 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:l(()=>[e(f,{name:"gauge",class:"mr-2 h-4 w-4"}),N[6]||(N[6]=s("span",null,"Miles Driven",-1))]),_:1},8,["class"])):_("",!0),g.value.includes("trucks.view")?(r(),b(t(D),{key:2,onClick:N[2]||(N[2]=Z=>C("trucks")),variant:"ghost",class:ve([[m.value==="trucks"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"],"py-2 px-3 -mb-px font-medium text-sm rounded-none transition-colors duration-200 inline-flex items-center"])},{default:l(()=>[e(f,{name:"truck",class:"mr-2 h-4 w-4"}),N[7]||(N[7]=s("span",null,"Trucks",-1))]),_:1},8,["class"])):_("",!0)])]),u.value?(r(),c("div",Go,N[8]||(N[8]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):(r(),c("div",Ko,[(r(),b(Kt(i.value),Zt(Jt($.value)),null,16))]))]),_:1})]),_:1})])]),_:1},8,["breadcrumbs","tenantSlug","permissions"]))}});export{$r as default};
