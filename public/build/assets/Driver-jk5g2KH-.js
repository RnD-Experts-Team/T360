import{A as dt,K as it,r as y,c as Q,w as ve,b as g,e as o,f as s,l,X as n,u as t,k as v,S as d,U as f,P as q,L as m,M as C,N as F,D as ce,bF as ut,Y as $e,b2 as xe}from"./vendor-cgn9wV4E.js";import{_ as b}from"./Icon.vue_vue_type_script_setup_true_lang-g5QrAIpa.js";import{_ as ge,a as ye,b as B,c as I,d as _e,e as T}from"./TableRow.vue_vue_type_script_setup_true_lang-58J5Q7id.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-DA-5a5tM.js";import{_ as Z}from"./Card.vue_vue_type_script_setup_true_lang-DQTQMX6v.js";import{_ as mt}from"./CardHeader.vue_vue_type_script_setup_true_lang-n-Rvhb9V.js";import{_ as pt}from"./CardTitle.vue_vue_type_script_setup_true_lang-AShXP1uR.js";import{_ as ee}from"./CardContent.vue_vue_type_script_setup_true_lang-DNXZ8J1r.js";import{b as ae,_ as re,a as ne}from"./DialogDescription.vue_vue_type_script_setup_true_lang-BDOQqQHy.js";import{_ as oe,a as de}from"./DialogTitle.vue_vue_type_script_setup_true_lang-K_t0Wv0O.js";import{_ as we}from"./DialogFooter.vue_vue_type_script_setup_true_lang-C4cZ_wVx.js";import{_ as V}from"./Label.vue_vue_type_script_setup_true_lang-WOFpmVDV.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-1zH_gJ02.js";import{b as be,_ as he,a as ke}from"./AlertDescription.vue_vue_type_script_setup_true_lang-BdYx0SaG.js";import{_ as ft}from"./AppLayout.vue_vue_type_script_setup_true_lang-BeAMINRz.js";import{a as vt,x as Se,g as ct,S as xt,W as ie}from"./vendor-vue-C6le94gM.js";import{E as Fe,a as gt}from"./vendor-icons-Bu7C1ObZ.js";import"./utils-C4uCeQPu.js";import"./vendor-ui-BuPyOEYe.js";import"./useInitials-DzeGKvtI.js";import"./app-8KAEFqwr.js";import"./vendor-axios-C0Zqfgkc.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BM02NuXb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const yt={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},_t={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6"},wt={class:"flex flex-wrap gap-3"},bt={class:"flex flex-col gap-1 md:gap-4"},ht={class:"grid grid-cols-1 sm:grid-cols-3 gap-1 md:gap-4 w-full"},kt={class:"overflow-x-auto"},St={class:"flex items-center justify-center"},Ct=["checked"],Dt={class:"flex items-center"},Vt={key:0},$t={key:1},Ft={key:2,class:"ml-2"},Et={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Tt={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ut={key:3,class:"ml-2 opacity-50"},At=["value"],It={key:1,class:"whitespace-nowrap min-w-[70px]"},Nt={class:"flex space-x-2"},Mt={key:0,class:"border-t bg-muted/20 px-4 py-3"},Pt={class:"flex flex-col sm:flex-row justify-between items-center gap-2"},Lt={class:"flex items-center gap-4 text-sm text-muted-foreground"},jt={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-4 w-full sm:w-auto"},Bt={class:"flex flex-wrap"},Rt=["innerHTML"],zt={class:"max-h-[80vh] overflow-y-auto pr-2"},Ht={key:0,class:"col-span-2"},Ot=["value"],qt={class:"sm:col-span-2"},Wt={class:"sm:col-span-2"},Gt={key:0,class:"text-destructive ml-1"},Kt={class:"relative"},Xt={class:"sm:col-span-2"},Yt={class:"sm:col-span-2"},Jt={class:"sm:col-span-2"},Qt={class:"sm:col-span-2"},Zt={key:0,class:"mt-2"},el=["src"],tl={class:"flex items-center gap-2"},ll={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},sl={key:0},al={class:"space-y-4"},rl={class:"cursor-pointer mt-3"},nl=["disabled"],ol={key:0,class:"mt-3 text-xs text-primary font-medium"},dl={class:"flex items-center gap-2 text-sm text-muted-foreground"},il=["href"],ul={key:0,class:"flex items-center justify-center gap-2 p-4"},ml={key:1,class:"space-y-4"},pl={key:0,class:"rounded-lg border p-3"},fl={class:"flex items-center justify-between"},vl={class:"text-xs text-muted-foreground"},cl={class:"mt-2 flex flex-wrap gap-2"},xl={class:"grid grid-cols-3 gap-4"},gl={class:"text-2xl font-bold"},yl={class:"text-2xl font-bold text-green-600"},_l={class:"text-2xl font-bold text-red-600"},wl={key:2},bl={class:"flex items-center justify-between mb-3"},hl={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},kl={class:"border rounded-lg overflow-hidden"},Sl={class:"max-h-96 overflow-y-auto"},Cl={class:"flex flex-wrap gap-x-3 gap-y-1"},Dl={class:"font-medium text-foreground"},Vl={key:0,class:"italic text-muted-foreground"},$l={class:"space-y-1"},Fl={key:0,class:"text-xs text-muted-foreground"},El={key:3},Tl={class:"text-lg font-semibold text-green-600 flex items-center gap-2 mb-3"},Ul={class:"border rounded-lg overflow-hidden"},Al={class:"flex flex-wrap gap-x-3 gap-y-1"},Il={class:"font-medium"},Nl={key:0,class:"italic text-muted-foreground"},Ml={class:"border-t p-4 flex justify-end gap-3"},Pl={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},ds={__name:"Driver",props:{entries:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:{type:String,default:null},SuperAdmin:{type:Boolean,default:!1},tenants:{type:Array,default:()=>[]},permissions:{type:Array,default:()=>[]},perPage:{type:[Number,String],default:10},dateFilter:{type:String,default:"full"}},setup(U){const p=U,Ee=vt();dt(()=>{const r=e=>e.preventDefault();window.addEventListener("dragover",r),window.addEventListener("drop",r),it(()=>{window.removeEventListener("dragover",r),window.removeEventListener("drop",r)})});const ue=y(null),P=y(!1);let R=0;function Te(){R+=1,P.value=!0}function Ue(){P.value=!0}function Ae(){R-=1,R<=0&&(R=0,P.value=!1)}function Ie(r){var a,i;R=0,P.value=!1;const e=(i=(a=r.dataTransfer)==null?void 0:a.files)==null?void 0:i[0];e&&De(e)}function Ne(r){var a;const e=(a=r.target.files)==null?void 0:a[0];e&&(De(e),r.target.value="")}const Me=Q(()=>p.tenantSlug),Pe=[{title:p.tenantSlug?"Dashboard":"Admin Dashboard",href:p.tenantSlug?route("dashboard",{tenantSlug:p.tenantSlug}):route("admin.dashboard")},{title:"Drivers",href:p.tenantSlug?route("driver.index",{tenantSlug:p.tenantSlug}):route("driver.index.admin")}],h=Q(()=>(p.permissions||[]).map(r=>r.name)),D=y([]),W=y(!1),k=y(""),N=y(""),G=y(!1),K=y(!1),me=y("Create Driver"),z=y("Create"),pe=y(null),te=y(null),le=y(Number(p.perPage||10)),Le=y(p.dateFilter||"full"),X=y("last_name"),H=y("asc"),Y=y(!1),c=y(null),L=y(!1),j=y(!1),S=y({search:"",dateFrom:"",dateTo:""}),se=["first_name","last_name","email","netradyne_user_name","mobile_phone","hiring_date"],u=Se({id:null,first_name:"",last_name:"",email:"",mobile_phone:"",hiring_date:"",netradyne_user_name:"",tenant_id:null,password:"",image:null}),je=Se({}),J=y(!1),M=y(null),Be=r=>p.tenantSlug?route("driver.show",[p.tenantSlug,r.id]):route("driver.show.admin",r.id),O=Q(()=>{var e;let r=[...((e=p.entries)==null?void 0:e.data)||[]];if(S.value.search){const a=S.value.search.toLowerCase();r=r.filter(i=>{var _,x,$;return((_=i.first_name)==null?void 0:_.toLowerCase().includes(a))||((x=i.last_name)==null?void 0:x.toLowerCase().includes(a))||(($=i.email)==null?void 0:$.toLowerCase().includes(a))})}return S.value.dateFrom&&(r=r.filter(a=>a.hiring_date&&a.hiring_date>=S.value.dateFrom)),S.value.dateTo&&(r=r.filter(a=>a.hiring_date&&a.hiring_date<=S.value.dateTo)),r.sort((a,i)=>{let _=a[X.value],x=i[X.value];return _==null?1:x==null?-1:(typeof _=="string"&&(_=_.toLowerCase(),x=String(x).toLowerCase()),_<x?H.value==="asc"?-1:1:_>x?H.value==="asc"?1:-1:0)}),r});function Re(r){X.value===r?H.value=H.value==="asc"?"desc":"asc":(X.value=r,H.value="asc")}function fe(){}function ze(){S.value={search:"",dateFrom:"",dateTo:""}}function He(){u.reset(),u.clearErrors(),u.tenant_id=null,u.netradyne_user_name="",u.password="",u.image=null,M.value=null,me.value="Create Driver",z.value="Create",G.value=!0}function Oe(r){u.reset(),u.clearErrors(),u.id=r.id,u.first_name=r.first_name??"",u.last_name=r.last_name??"",u.email=r.email??"",u.mobile_phone=r.mobile_phone??"",u.hiring_date=r.hiring_date??"",u.tenant_id=r.tenant_id??null,u.netradyne_user_name=r.netradyne_user_name??"",u.password="",u.image=null,r.image?M.value=r.image.startsWith("http")?r.image:`/storage/${r.image}`:M.value=null,me.value="Edit Driver",z.value="Update",G.value=!0}function Ce(){G.value=!1,u.reset(),u.clearErrors(),M.value=null,J.value=!1}function qe(){const r=z.value==="Create",e=new FormData;Object.keys(u.data()).forEach(i=>{if(i==="image"){u.image instanceof File&&e.append("image",u.image);return}if(!r&&i==="password"&&!u.password)return;const _=u[i];_!=null&&e.append(i,_)});const a=r?p.SuperAdmin?route("driver.store.admin"):route("driver.store",p.tenantSlug):p.SuperAdmin?route("driver.update.admin",[u.id]):route("driver.update",[p.tenantSlug,u.id]);r||e.append("_method","PUT"),u.post(a,{data:e,forceFormData:!0,preserveScroll:!0,onSuccess:()=>{N.value=r?"Driver created successfully.":"Driver updated successfully.",Ce()},onError:i=>{i&&Object.keys(i).length?k.value=String(Object.values(i)[0]):k.value="An error occurred. Please try again."}})}function We(r){te.value=r,K.value=!0}function Ge(){const r=p.SuperAdmin?route("driver.destroy.admin",[te.value]):route("driver.destroy",[p.tenantSlug,te.value]);je.delete(r,{preserveScroll:!0,onSuccess:()=>{N.value="Driver deleted.",K.value=!1,te.value=null},onError:()=>{k.value="Failed to delete driver."}})}function Ke(){var e,a,i;if((((e=p.entries)==null?void 0:e.data)||[]).length===0){k.value="No data available to export",setTimeout(()=>k.value="",3e3);return}const r=p.SuperAdmin?route("driver.export.admin"):route("driver.export",p.tenantSlug);(a=pe.value)==null||a.setAttribute("action",r),(i=pe.value)==null||i.submit()}function Xe(r){if(!r)return;const e=new URL(r);e.searchParams.set("perPage",String(le.value)),ie.get(e.href,{},{only:["entries"],preserveState:!0,preserveScroll:!0})}function Ye(){const r=p.tenantSlug?route("driver.index",{tenantSlug:p.tenantSlug}):route("driver.index.admin");ie.get(r,{dateFilter:Le.value,perPage:le.value},{preserveState:!0,preserveScroll:!0})}const Je=Q(()=>O.value.length>0&&D.value.length===O.value.length);function Qe(r){r.target.checked?D.value=O.value.map(e=>e.id):D.value=[]}function Ze(){D.value.length>0&&(W.value=!0)}function et(){const r=Se({ids:D.value}),e=p.SuperAdmin?"driver.destroyBulk.admin":"driver.destroyBulk",a=p.SuperAdmin?{}:{tenantSlug:p.tenantSlug};r.delete(route(e,a),{preserveScroll:!0,onSuccess:()=>{N.value=`${D.value.length} driver records deleted successfully.`,D.value=[],W.value=!1},onError:()=>{k.value="Failed to delete selected drivers."}})}function tt(r){let e=r.target.value.replace(/\D/g,"").slice(0,10),a=e;e.length>6?a=`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`:e.length>3?a=`(${e.slice(0,3)}) ${e.slice(3)}`:e.length>0&&(a=`(${e}`),r.target.value=a,u.mobile_phone=a}function lt(r){if(!r)return"";const e=String(r).split("-");if(e.length!==3)return String(r);const[a,i,_]=e;return`${Number(i)}/${Number(_)}/${a}`}function st(r){var a;const e=(a=r.target.files)==null?void 0:a[0];if(e){u.image=e;const i=new FileReader;i.onload=_=>{var x;M.value=((x=_.target)==null?void 0:x.result)??null},i.readAsDataURL(e)}else u.image=null,M.value=null}const at=Q(()=>"/storage/upload-data-temps/Drivers Template.csv");function De(r){if(!r)return;if(!(r.type==="text/csv"||r.name.toLowerCase().endsWith(".csv")||r.type==="")){k.value="Please upload a valid CSV file.",setTimeout(()=>k.value="",4e3);return}L.value=!0;const a=new FormData;a.append("file",r);const i=p.tenantSlug?route("driver.validateImport",{tenantSlug:p.tenantSlug}):route("driver.validateImport.admin");ie.post(i,a,{forceFormData:!0,preserveScroll:!0,only:["flash"],onFinish:()=>{L.value=!1},onError:()=>{L.value=!1,k.value="Failed to validate CSV file"}})}function rt(){var e;if(!c.value||c.value.header_error||(((e=c.value.summary)==null?void 0:e.invalid)??0)>0)return;j.value=!0;const r=p.tenantSlug?route("driver.confirmImport",{tenantSlug:p.tenantSlug}):route("driver.confirmImport.admin");ie.post(r,{},{preserveScroll:!0,onSuccess:()=>{var a;N.value=`Successfully imported ${((a=c.value.summary)==null?void 0:a.valid)??0} drivers`,Ve()},onError:()=>{k.value="Failed to import drivers"},onFinish:()=>{j.value=!1}})}function nt(){const r=p.tenantSlug?route("driver.downloadErrorReport",{tenantSlug:p.tenantSlug}):route("driver.downloadErrorReport.admin");window.location.href=r}function Ve(){Y.value=!1,c.value=null,L.value=!1,j.value=!1,P.value=!1,R=0,ue.value&&(ue.value.value="")}return ve(()=>{var r;return(r=Ee.props.flash)==null?void 0:r.importValidation},r=>{if(r){if(r.results){c.value=r.results,r.header_error&&(c.value.header_error=r.header_error),Y.value=!0;return}r.message&&(k.value=r.message)}},{immediate:!0}),ve(N,r=>{r&&setTimeout(()=>N.value="",5e3)}),ve(k,r=>{r&&setTimeout(()=>k.value="",5e3)}),(r,e)=>(o(),g(ft,{breadcrumbs:Pe,tenantSlug:Me.value,permissions:p.permissions},{default:s(()=>[l(t(ct),{title:"Drivers"}),n("div",yt,[N.value?(o(),g(t(be),{key:0,variant:"success"},{default:s(()=>[l(t(he),null,{default:s(()=>e[23]||(e[23]=[d("Success")])),_:1}),l(t(ke),null,{default:s(()=>[d(f(N.value),1)]),_:1})]),_:1})):v("",!0),k.value?(o(),g(t(be),{key:1,variant:"destructive"},{default:s(()=>[l(t(he),null,{default:s(()=>e[24]||(e[24]=[d("Error")])),_:1}),l(t(ke),null,{default:s(()=>[d(f(k.value),1)]),_:1})]),_:1})):v("",!0),n("div",_t,[e[28]||(e[28]=n("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold"},"Driver Management",-1)),n("div",wt,[h.value.includes("drivers.create")?(o(),g(w,{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:He,variant:"default"},{default:s(()=>[l(b,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[25]||(e[25]=d(" Create New Driver "))]),_:1})):v("",!0),D.value.length>0&&h.value.includes("drivers.delete")?(o(),g(w,{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=a=>Ze()),variant:"destructive"},{default:s(()=>[l(b,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),d(" Delete Selected ("+f(D.value.length)+") ",1)]),_:1})):v("",!0),h.value.includes("drivers.import")?(o(),g(w,{key:2,onClick:e[1]||(e[1]=a=>Y.value=!0),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:s(()=>[l(b,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[26]||(e[26]=d(" Import CSV "))]),_:1})):v("",!0),h.value.includes("drivers.export")?(o(),g(w,{key:3,class:"px-2 py-0 md:px-4 md:py-2",onClick:q(Ke,["prevent"]),variant:"outline"},{default:s(()=>[l(b,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[27]||(e[27]=d(" Download CSV "))]),_:1})):v("",!0)])]),l(t(Z),null,{default:s(()=>[l(t(mt),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[l(t(pt),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>e[29]||(e[29]=[d("Filters")])),_:1})]),_:1}),l(t(ee),{class:"p-2 md:p-4 lg:p-6"},{default:s(()=>[n("div",bt,[n("div",ht,[n("div",null,[l(t(V),{for:"search"},{default:s(()=>e[30]||(e[30]=[d("Search")])),_:1}),l(t(E),{class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10",id:"search",modelValue:S.value.search,"onUpdate:modelValue":e[2]||(e[2]=a=>S.value.search=a),type:"text",placeholder:"Search by name or email...",onInput:fe},null,8,["modelValue"])]),n("div",null,[l(t(V),{for:"dateFrom"},{default:s(()=>e[31]||(e[31]=[d("Hiring Date From")])),_:1}),l(t(E),{class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10",id:"dateFrom",modelValue:S.value.dateFrom,"onUpdate:modelValue":e[3]||(e[3]=a=>S.value.dateFrom=a),type:"date",onChange:fe},null,8,["modelValue"])]),n("div",null,[l(t(V),{for:"dateTo"},{default:s(()=>e[32]||(e[32]=[d("Hiring Date To")])),_:1}),l(t(E),{class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10",id:"dateTo",modelValue:S.value.dateTo,"onUpdate:modelValue":e[4]||(e[4]=a=>S.value.dateTo=a),type:"date",onChange:fe},null,8,["modelValue"])])]),l(w,{onClick:ze,variant:"ghost",size:"sm"},{default:s(()=>[l(b,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[33]||(e[33]=d(" Reset "))]),_:1})])]),_:1})]),_:1}),l(t(Z),{class:"mx-auto max-w-[95vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto"},{default:s(()=>[l(t(ee),{class:"p-0"},{default:s(()=>[n("div",kt,[l(t(ge),{class:"relative h-[600px] overflow-auto"},{default:s(()=>[l(t(ye),null,{default:s(()=>[l(t(B),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:s(()=>[h.value.includes("drivers.delete")?(o(),g(t(I),{key:0,class:"w-[50px]"},{default:s(()=>[n("div",St,[n("input",{type:"checkbox",onChange:Qe,checked:Je.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,Ct)])]),_:1})):v("",!0),U.SuperAdmin?(o(),g(t(I),{key:1},{default:s(()=>e[34]||(e[34]=[d("Company Name")])),_:1})):v("",!0),(o(),m(C,null,F(se,a=>l(t(I),{key:a,class:"cursor-pointer",onClick:i=>Re(a)},{default:s(()=>[n("div",Dt,[a==="hiring_date"?(o(),m("div",Vt,"Hire Date")):(o(),m("div",$t,f(a.replace(/_/g," ").split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")),1)),X.value===a?(o(),m("div",Ft,[H.value==="asc"?(o(),m("svg",Et,e[35]||(e[35]=[n("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(o(),m("svg",Tt,e[36]||(e[36]=[n("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(o(),m("div",Ut,e[37]||(e[37]=[n("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("path",{d:"M8 10l4-4 4 4"}),n("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),h.value.includes("drivers.profile.view")||h.value.includes("drivers.update")||h.value.includes("drivers.delete")?(o(),g(t(I),{key:2},{default:s(()=>e[38]||(e[38]=[d(" Actions ")])),_:1})):v("",!0)]),_:1})]),_:1}),l(t(_e),null,{default:s(()=>[O.value.length===0?(o(),g(t(B),{key:0},{default:s(()=>[l(t(T),{colspan:U.SuperAdmin?se.length+3:se.length+2,class:"py-8 text-center"},{default:s(()=>e[39]||(e[39]=[d(" No driver records found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):v("",!0),(o(!0),m(C,null,F(O.value,a=>(o(),g(t(B),{key:a.id},{default:s(()=>[h.value.includes("drivers.delete")?(o(),g(t(T),{key:0,class:"text-center"},{default:s(()=>[ce(n("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":e[5]||(e[5]=i=>D.value=i),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,At),[[ut,D.value]])]),_:2},1024)):v("",!0),U.SuperAdmin?(o(),g(t(T),{key:1},{default:s(()=>{var i;return[d(f(((i=a.tenant)==null?void 0:i.name)??"—"),1)]}),_:2},1024)):v("",!0),(o(),m(C,null,F(se,i=>l(t(T),{key:i},{default:s(()=>[i==="hiring_date"?(o(),m(C,{key:0},[d(f(lt(a[i])),1)],64)):i==="mobile_phone"?(o(),m("div",It,f(a[i]),1)):(o(),m(C,{key:2},[d(f(a[i]),1)],64))]),_:2},1024)),64)),h.value.includes("drivers.profile.view")||h.value.includes("drivers.update")||h.value.includes("drivers.delete")?(o(),g(t(T),{key:2},{default:s(()=>[n("div",Nt,[h.value.includes("drivers.profile.view")?(o(),g(t(xt),{key:0,href:Be(a),class:"flex items-center gap-1"},{default:s(()=>[l(w,{variant:"default",size:"sm",class:"flex items-center gap-1"},{default:s(()=>[l(t(Fe),{class:"h-4 w-4"}),e[40]||(e[40]=n("span",null,"View",-1))]),_:1})]),_:2},1032,["href"])):v("",!0),h.value.includes("drivers.update")?(o(),g(w,{key:1,onClick:i=>Oe(a),variant:"warning",size:"sm"},{default:s(()=>[l(b,{name:"pencil",class:"mr-1 h-4 w-4"}),e[41]||(e[41]=d(" Edit "))]),_:2},1032,["onClick"])):v("",!0),h.value.includes("drivers.delete")?(o(),g(w,{key:2,onClick:i=>We(a.id),variant:"destructive",size:"sm"},{default:s(()=>[l(b,{name:"trash",class:"mr-1 h-4 w-4"}),e[42]||(e[42]=d(" Delete "))]),_:2},1032,["onClick"])):v("",!0)])]),_:2},1024)):v("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),U.entries.links?(o(),m("div",Mt,[n("div",Pt,[n("div",Lt,[n("span",null," Showing "+f(O.value.length)+" of "+f(U.entries.data.length)+" entries ",1),n("div",jt,[e[44]||(e[44]=n("span",{class:"text-sm"},"Show:",-1)),ce(n("select",{id:"perPage","onUpdate:modelValue":e[6]||(e[6]=a=>le.value=a),onChange:Ye,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[43]||(e[43]=[n("option",{value:"10"},"10",-1),n("option",{value:"25"},"25",-1),n("option",{value:"50"},"50",-1),n("option",{value:"100"},"100",-1)]),544),[[$e,le.value]])])]),n("div",Bt,[(o(!0),m(C,null,F(U.entries.links,a=>(o(),g(w,{key:a.label,onClick:i=>Xe(a.url),disabled:!a.url,variant:"ghost",size:"sm",class:xe(["mx-1",{"border-primary bg-primary/10 text-primary":a.active}])},{default:s(()=>[n("span",{innerHTML:a.label},null,8,Rt)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):v("",!0)]),_:1})]),_:1}),l(t(ae),{open:G.value,"onUpdate:open":e[16]||(e[16]=a=>G.value=a)},{default:s(()=>[l(t(re),{class:"sm:max-w-4xl max-w-[95vw] mx-auto p-2 md:p-4 lg:p-6"},{default:s(()=>[l(t(oe),{class:"space-y-1 md:space-y-2"},{default:s(()=>[l(t(de),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>[d(f(me.value),1)]),_:1}),l(t(ne),{class:"text-sm md:text-base"},{default:s(()=>[d(" Fill in the details to "+f(z.value.toLowerCase())+" a driver. ",1)]),_:1})]),_:1}),n("div",zt,[n("form",{onSubmit:q(qe,["prevent"]),class:"grid grid-cols-1 gap-2 md:gap-4 sm:grid-cols-2 mt-2 md:mt-4"},[U.SuperAdmin?(o(),m("div",Ht,[l(t(V),{for:"tenant",class:"text-sm md:text-base"},{default:s(()=>e[45]||(e[45]=[d("Company")])),_:1}),ce(n("select",{id:"tenant","onUpdate:modelValue":e[7]||(e[7]=a=>t(u).tenant_id=a),class:"flex h-8 md:h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-2 md:px-3 py-1 md:py-2 text-xs md:text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[46]||(e[46]=n("option",{value:""},"Select Company",-1)),(o(!0),m(C,null,F(U.tenants,a=>(o(),m("option",{key:a.id,value:a.id},f(a.name),9,Ot))),128))],512),[[$e,t(u).tenant_id]])])):v("",!0),n("div",null,[l(t(V),{for:"first_name",class:"text-sm md:text-base"},{default:s(()=>e[47]||(e[47]=[d("First Name")])),_:1}),l(t(E),{id:"first_name",modelValue:t(u).first_name,"onUpdate:modelValue":e[8]||(e[8]=a=>t(u).first_name=a),type:"text",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"},null,8,["modelValue"])]),n("div",null,[l(t(V),{for:"last_name",class:"text-sm md:text-base"},{default:s(()=>e[48]||(e[48]=[d("Last Name")])),_:1}),l(t(E),{id:"last_name",modelValue:t(u).last_name,"onUpdate:modelValue":e[9]||(e[9]=a=>t(u).last_name=a),type:"text",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"},null,8,["modelValue"])]),n("div",qt,[l(t(V),{for:"email",class:"text-sm md:text-base"},{default:s(()=>e[49]||(e[49]=[d("Email Address")])),_:1}),l(t(E),{id:"email",modelValue:t(u).email,"onUpdate:modelValue":e[10]||(e[10]=a=>t(u).email=a),type:"email",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"},null,8,["modelValue"])]),n("div",Wt,[l(t(V),{for:"password",class:"flex items-center"},{default:s(()=>[e[50]||(e[50]=n("span",null,"Password",-1)),z.value==="Create"?(o(),m("span",Gt,"*")):v("",!0)]),_:1}),n("div",Kt,[l(t(E),{id:"password",modelValue:t(u).password,"onUpdate:modelValue":e[11]||(e[11]=a=>t(u).password=a),type:J.value?"text":"password",placeholder:"Enter password",class:xe(["w-full pr-10",{"border-destructive":t(u).errors.password}])},null,8,["modelValue","type","class"]),n("button",{type:"button",onClick:e[12]||(e[12]=a=>J.value=!J.value),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[J.value?(o(),g(t(gt),{key:1,class:"h-5 w-5"})):(o(),g(t(Fe),{key:0,class:"h-5 w-5"}))])])]),n("div",Xt,[l(t(V),{for:"netradyne_user_name",class:"text-sm md:text-base"},{default:s(()=>e[51]||(e[51]=[d(" Netradyne User Name ")])),_:1}),l(t(E),{id:"netradyne_user_name",modelValue:t(u).netradyne_user_name,"onUpdate:modelValue":e[13]||(e[13]=a=>t(u).netradyne_user_name=a),type:"text",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"},null,8,["modelValue"])]),n("div",Yt,[l(t(V),{for:"mobile_phone",class:"text-sm md:text-base"},{default:s(()=>e[52]||(e[52]=[d(" Mobile Phone Number ")])),_:1}),l(t(E),{id:"mobile_phone",modelValue:t(u).mobile_phone,"onUpdate:modelValue":e[14]||(e[14]=a=>t(u).mobile_phone=a),type:"tel",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2",onInput:tt},null,8,["modelValue"])]),n("div",Jt,[l(t(V),{for:"hiring_date",class:"text-sm md:text-base"},{default:s(()=>e[53]||(e[53]=[d("Hiring Date")])),_:1}),l(t(E),{id:"hiring_date",modelValue:t(u).hiring_date,"onUpdate:modelValue":e[15]||(e[15]=a=>t(u).hiring_date=a),type:"date",required:"",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"},null,8,["modelValue"])]),n("div",Qt,[l(t(V),{for:"image",class:"text-sm md:text-base"},{default:s(()=>e[54]||(e[54]=[d("Driver Image")])),_:1}),l(t(E),{id:"image",type:"file",accept:"image/*",onChange:st,class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3 py-1 md:py-2"}),M.value?(o(),m("div",Zt,[n("img",{src:M.value,alt:"Image Preview",class:"h-24 w-24 object-cover rounded-md"},null,8,el)])):v("",!0)]),l(t(we),{class:"col-span-2 mt-4 flex flex-col sm:flex-row gap-2 sm:gap-4 justify-end"},{default:s(()=>[l(w,{type:"button",onClick:Ce,variant:"outline",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>e[55]||(e[55]=[d(" Cancel ")])),_:1}),l(w,{type:"submit",variant:"default",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>[d(f(z.value),1)]),_:1})]),_:1})],32)])]),_:1})]),_:1},8,["open"]),l(t(ae),{open:K.value,"onUpdate:open":e[18]||(e[18]=a=>K.value=a)},{default:s(()=>[l(t(re),{class:"max-w-[95vw] sm:max-w-md mx-auto p-2 md:p-4 lg:p-6"},{default:s(()=>[l(t(oe),{class:"space-y-1 md:space-y-2"},{default:s(()=>[l(t(de),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>e[56]||(e[56]=[d("Confirm Deletion")])),_:1}),l(t(ne),{class:"text-sm md:text-base"},{default:s(()=>e[57]||(e[57]=[d(" Are you sure you want to delete this driver? This action cannot be undone. ")])),_:1})]),_:1}),l(t(we),{class:"mt-2 md:mt-4 flex flex-col sm:flex-row gap-2 sm:gap-4 justify-end"},{default:s(()=>[l(w,{type:"button",onClick:e[17]||(e[17]=a=>K.value=!1),variant:"outline",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>e[58]||(e[58]=[d(" Cancel ")])),_:1}),l(w,{type:"button",onClick:Ge,variant:"destructive",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>e[59]||(e[59]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(t(ae),{open:W.value,"onUpdate:open":e[21]||(e[21]=a=>W.value=a)},{default:s(()=>[l(t(re),{class:"max-w-[95vw] sm:max-w-md mx-auto p-2 md:p-4 lg:p-6"},{default:s(()=>[l(t(oe),{class:"space-y-1 md:space-y-2"},{default:s(()=>[l(t(de),{class:"text-lg md:text-xl lg:text-2xl"},{default:s(()=>e[60]||(e[60]=[d(" Confirm Bulk Deletion ")])),_:1}),l(t(ne),{class:"text-sm md:text-base"},{default:s(()=>[d(" Are you sure you want to delete "+f(D.value.length)+" driver records? This action cannot be undone. ",1)]),_:1})]),_:1}),l(t(we),{class:"mt-2 md:mt-4 flex flex-col sm:flex-row gap-2 sm:gap-4 justify-end"},{default:s(()=>[l(w,{type:"button",onClick:e[19]||(e[19]=a=>W.value=!1),variant:"outline",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>e[61]||(e[61]=[d(" Cancel ")])),_:1}),l(w,{type:"button",onClick:e[20]||(e[20]=a=>et()),variant:"destructive",class:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2"},{default:s(()=>e[62]||(e[62]=[d(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),n("form",{ref_key:"exportForm",ref:pe,method:"GET",class:"hidden"},null,512)]),l(t(ae),{open:Y.value,"onUpdate:open":e[22]||(e[22]=a=>Y.value=a)},{default:s(()=>[l(t(re),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:s(()=>{var a,i,_;return[l(t(oe),{class:"px-4 sm:px-6 border-b pb-3"},{default:s(()=>[n("div",tl,[l(b,{name:"upload",class:"h-5 w-5 text-primary"}),l(t(de),{class:"text-lg sm:text-xl font-semibold"},{default:s(()=>e[63]||(e[63]=[d(" Import Drivers ")])),_:1})]),l(t(ne),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:s(()=>e[64]||(e[64]=[d(" Upload a CSV file to import drivers. The file will be validated before import. ")])),_:1})]),_:1}),n("div",ll,[c.value?(o(),m("div",ml,[(a=c.value.headers)!=null&&a.length?(o(),m("div",pl,[n("div",fl,[e[69]||(e[69]=n("div",{class:"text-sm font-semibold"},"CSV Headers",-1)),n("div",vl,f(c.value.headers.length)+" columns ",1)]),n("div",cl,[(o(!0),m(C,null,F(c.value.headers,x=>(o(),m("span",{key:x,class:"rounded-full bg-muted px-2 py-0.5 text-xs"},f(x),1))),128))])])):v("",!0),n("div",xl,[l(t(Z),{class:"border-2"},{default:s(()=>[l(t(ee),{class:"p-4 text-center"},{default:s(()=>[n("div",gl,f(c.value.summary.total),1),e[70]||(e[70]=n("div",{class:"text-sm text-muted-foreground"},"Total Rows",-1))]),_:1})]),_:1}),l(t(Z),{class:"border-2 border-green-500/50 bg-green-50 dark:bg-green-900/10"},{default:s(()=>[l(t(ee),{class:"p-4 text-center"},{default:s(()=>[n("div",yl,f(c.value.summary.valid),1),e[71]||(e[71]=n("div",{class:"text-sm text-muted-foreground"},"Valid",-1))]),_:1})]),_:1}),l(t(Z),{class:"border-2 border-red-500/50 bg-red-50 dark:bg-red-900/10"},{default:s(()=>[l(t(ee),{class:"p-4 text-center"},{default:s(()=>[n("div",_l,f(c.value.summary.invalid),1),e[72]||(e[72]=n("div",{class:"text-sm text-muted-foreground"},"Invalid",-1))]),_:1})]),_:1})]),c.value.header_error?(o(),g(t(be),{key:1,variant:"destructive"},{default:s(()=>[l(t(he),{class:"flex items-center gap-2"},{default:s(()=>[l(b,{name:"alert_circle",class:"h-5 w-5"}),e[73]||(e[73]=d(" Header Error "))]),_:1}),l(t(ke),null,{default:s(()=>[d(f(c.value.header_error),1)]),_:1})]),_:1})):v("",!0),(i=c.value.invalid)!=null&&i.length?(o(),m("div",wl,[n("div",bl,[n("h3",hl,[l(b,{name:"alert-triangle",class:"h-5 w-5"}),d(" Validation Errors ("+f(c.value.invalid.length)+") ",1)]),l(w,{onClick:nt,variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:s(()=>[l(b,{name:"download",class:"h-4 w-4"}),e[74]||(e[74]=d(" Download Error Report "))]),_:1})]),n("div",kl,[n("div",Sl,[l(t(ge),null,{default:s(()=>[l(t(ye),{class:"sticky top-0 bg-background"},{default:s(()=>[l(t(B),null,{default:s(()=>[l(t(I),{class:"w-20"},{default:s(()=>e[75]||(e[75]=[d("Row #")])),_:1}),l(t(I),null,{default:s(()=>e[76]||(e[76]=[d("Preview")])),_:1}),l(t(I),null,{default:s(()=>e[77]||(e[77]=[d("Errors")])),_:1})]),_:1})]),_:1}),l(t(_e),null,{default:s(()=>[(o(!0),m(C,null,F(c.value.invalid,x=>(o(),g(t(B),{key:x.rowNumber,class:"hover:bg-muted/50"},{default:s(()=>[l(t(T),{class:"font-medium"},{default:s(()=>[d(f(x.rowNumber),1)]),_:2},1024),l(t(T),{class:"text-sm text-muted-foreground"},{default:s(()=>{var $;return[n("div",Cl,[(o(!0),m(C,null,F(x.preview||[],A=>(o(),m("span",{key:A.key,class:"whitespace-nowrap"},[n("span",Dl,f(A.label)+":",1),d(" "+f(A.value),1)]))),128)),($=x.preview)!=null&&$.length?v("",!0):(o(),m("span",Vl,"—"))])]}),_:2},1024),l(t(T),null,{default:s(()=>{var $;return[n("div",$l,[(o(!0),m(C,null,F(x.errors||[],(A,ot)=>(o(),m("div",{key:ot,class:"text-xs text-red-600 flex items-start gap-1"},[l(b,{name:"x-circle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),n("span",null,f(A),1)]))),128)),($=x.errors)!=null&&$.length?v("",!0):(o(),m("div",Fl," — "))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):v("",!0),(_=c.value.valid)!=null&&_.length?(o(),m("div",El,[n("h3",Tl,[l(b,{name:"check-circle",class:"h-5 w-5"}),d(" Valid Rows ("+f(c.value.valid.length)+") ",1)]),e[80]||(e[80]=n("div",{class:"text-sm text-muted-foreground mb-2"}," Showing first 5 valid rows ",-1)),n("div",Ul,[l(t(ge),null,{default:s(()=>[l(t(ye),null,{default:s(()=>[l(t(B),null,{default:s(()=>[l(t(I),null,{default:s(()=>e[78]||(e[78]=[d("Row #")])),_:1}),l(t(I),null,{default:s(()=>e[79]||(e[79]=[d("Preview")])),_:1})]),_:1})]),_:1}),l(t(_e),null,{default:s(()=>[(o(!0),m(C,null,F(c.value.valid.slice(0,5),x=>(o(),g(t(B),{key:x.rowNumber},{default:s(()=>[l(t(T),{class:"font-medium"},{default:s(()=>[d(f(x.rowNumber),1)]),_:2},1024),l(t(T),{class:"text-sm"},{default:s(()=>{var $;return[n("div",Al,[(o(!0),m(C,null,F(x.preview||[],A=>(o(),m("span",{key:A.key,class:"whitespace-nowrap"},[n("span",Il,f(A.label)+":",1),d(" "+f(A.value),1)]))),128)),($=x.preview)!=null&&$.length?v("",!0):(o(),m("span",Nl,"—"))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])):v("",!0)])):(o(),m("div",sl,[n("div",al,[n("div",{class:xe(["flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20 transition-colors",{"border-primary bg-primary/5":P.value,"opacity-60 pointer-events-none":L.value}]),onDragenter:q(Te,["prevent"]),onDragover:q(Ue,["prevent"]),onDragleave:q(Ae,["prevent"]),onDrop:q(Ie,["prevent"])},[l(b,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),e[66]||(e[66]=n("div",{class:"text-center"},[n("div",{class:"text-sm font-medium"},[n("span",{class:"text-primary"},"Drag & drop"),d(" your CSV here ")]),n("p",{class:"text-xs text-muted-foreground mt-1"},"or")],-1)),n("label",rl,[e[65]||(e[65]=n("span",{class:"text-sm font-medium text-primary hover:underline"}," Choose CSV file ",-1)),n("input",{ref_key:"importFileInput",ref:ue,type:"file",class:"hidden",onChange:Ne,accept:".csv,text/csv",disabled:L.value},null,40,nl)]),e[67]||(e[67]=n("p",{class:"text-xs text-muted-foreground mt-2"},"CSV only",-1)),P.value?(o(),m("div",ol," Drop file to validate ")):v("",!0)],34),n("div",dl,[l(b,{name:"info",class:"h-4 w-4"}),n("a",{href:at.value,download:"",class:"text-primary hover:underline"}," Download CSV Template ",8,il)]),L.value?(o(),m("div",ul,e[68]||(e[68]=[n("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),n("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):v("",!0)])]))]),n("div",Ml,[l(w,{onClick:Ve,variant:"outline",disabled:j.value},{default:s(()=>e[81]||(e[81]=[d(" Close ")])),_:1},8,["disabled"]),c.value&&c.value.summary.valid>0?(o(),g(w,{key:0,onClick:rt,variant:"default",disabled:j.value||c.value.summary.invalid>0||!!c.value.header_error,class:"flex items-center gap-2"},{default:s(()=>[j.value?(o(),m("div",Pl)):(o(),g(b,{key:1,name:"check",class:"h-4 w-4"})),d(" "+f(j.value?"Importing...":`Import ${c.value.summary.valid} Rows`),1)]),_:1},8,["disabled"])):v("",!0)])]}),_:1})]),_:1},8,["open"])]),_:1},8,["tenantSlug","permissions"]))}};export{ds as default};
