import{d as O,L as C,e as c,X as t,U as E,l as e,u as s,f as l,S as N,b as $,k as b,r as i,c as D,ak as S,M as se}from"./vendor-cgn9wV4E.js";import{x as te,g as ae}from"./vendor-vue-C6le94gM.js";import{_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bx6WXffK.js";import{_ as ne}from"./Input.vue_vue_type_script_setup_true_lang-1zH_gJ02.js";import{_ as y}from"./Button.vue_vue_type_script_setup_true_lang-DA-5a5tM.js";import{_ as oe,a as re,b as ie,c as de,d as ue,e as me}from"./RoleForm.vue_vue_type_script_setup_true_lang-DembVhbV.js";import{o as ce,s as fe,U as pe,p as j,j as ve,B as xe}from"./vendor-icons-Bu7C1ObZ.js";import{_ as z}from"./Card.vue_vue_type_script_setup_true_lang-DQTQMX6v.js";import{_ as R}from"./CardContent.vue_vue_type_script_setup_true_lang-DNXZ8J1r.js";import{_ as T}from"./CardHeader.vue_vue_type_script_setup_true_lang-n-Rvhb9V.js";import{_ as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-AShXP1uR.js";import{_ as ge}from"./Separator.vue_vue_type_script_setup_true_lang-NVRt3j8w.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-axios-C0Zqfgkc.js";import"./utils-C4uCeQPu.js";import"./vendor-ui-BuPyOEYe.js";import"./Icon.vue_vue_type_script_setup_true_lang-g5QrAIpa.js";import"./useInitials-DzeGKvtI.js";import"./app-BwOLsRrX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BM02NuXb.js";import"./Badge.vue_vue_type_script_setup_true_lang-BpieHD20.js";import"./Label.vue_vue_type_script_setup_true_lang-WOFpmVDV.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-ChpZyGGS.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-C4cZ_wVx.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-K_t0Wv0O.js";import"./InputError.vue_vue_type_script_setup_true_lang-B3W--yJp.js";const be={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 p-4"},ye={class:"bg-background p-6 rounded-lg shadow-xl w-full max-w-md animate-in fade-in zoom-in-95 duration-200 border border-border"},we={class:"flex flex-col space-y-4"},ke={class:"text-muted-foreground"},he={class:"flex justify-end space-x-3 pt-2"},Se=O({__name:"ConfirmDeleteModal",props:{message:{type:String,default:"Are you sure you want to delete this item?"},deleteUrl:{type:String,required:!0},tenantSlug:{type:String,default:null}},emits:["cancel","confirmed"],setup(u,{emit:r}){const o=u,w=r,d=te({}),f=()=>{d.delete(o.deleteUrl,{onSuccess:()=>{w("confirmed")}})},p=()=>{w("cancel")};return(x,m)=>(c(),C("div",be,[t("div",ye,[t("div",we,[m[1]||(m[1]=t("h2",{class:"text-xl font-bold text-foreground"},"Confirm Deletion",-1)),t("p",ke,E(u.message),1),t("div",he,[e(s(y),{type:"button",onClick:p,variant:"outline"},{default:l(()=>m[0]||(m[0]=[N(" Cancel ")])),_:1}),e(s(y),{type:"button",variant:"destructive",onClick:f,disabled:s(d).processing},{default:l(()=>[s(d).processing?(c(),$(s(ce),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):b("",!0),N(" "+E(s(d).processing?"Deleting...":"Delete"),1)]),_:1},8,["disabled"])])])])]))}}),Ce={class:"container w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},$e={class:"relative max-w-md"},Ue={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ae={class:"flex items-center space-x-2"},Me={class:"flex items-center space-x-2"},De={class:"flex items-center space-x-2"},je={class:"fixed inset-0 z-[100]"},ze={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},Re={key:0,class:"fixed inset-0 z-[100]"},Te={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},Be={key:0,class:"fixed inset-0 z-[100]"},Ve={class:"absolute inset-0 flex items-center justify-center p-2 sm:p-4"},Le=O({__name:"UserRolesManagement",props:{users:{type:Object,default:()=>({data:[],links:[]})},roles:{type:Object,default:()=>({data:[],links:[]})},tenants:{type:Object,default:()=>({data:[],links:[]})},permissions:Array,search:String,tenantSlug:{type:String,default:null},SuperAdmin:Boolean},setup(u){const r=u,{tenantSlug:o}=r,w=[{title:o?"Dashboard":"Admin Dashboard",href:o?`/${o}/dashboard`:"/dashboard"},{title:"User Management",href:o?`/${o}/admin/user-management`:"/admin/user-management"}],d=i(r.search||""),f=i(!1),p=i(!1),x=i(!1),m=i(null),U=i(null),A=i(null),g=r.SuperAdmin,v=i(!1),k=i(""),h=i(""),q=D(()=>{if(!d.value.trim())return r.users;const n=d.value.toLowerCase(),a=r.users.data.filter(_=>_.name.toLowerCase().includes(n)||_.email.toLowerCase().includes(n));return{...r.users,data:a}}),F=()=>{m.value=null,f.value=!0},I=()=>{f.value=!1},P=()=>{A.value=null,x.value=!0},V=()=>{x.value=!1},X=()=>{U.value=null,p.value=!0},L=()=>{p.value=!1},G=n=>{m.value=n,f.value=!0},H=n=>{A.value=n,x.value=!0},J=n=>{U.value=n,p.value=!0},K=n=>{k.value=g?route("admin.users.destroy",n):route("users.destroy",[o,n]),h.value=`Are you sure you want to delete user ${n.name}?`,v.value=!0},Q=n=>{k.value=g?route("admin.roles.destroy",n):route("roles.destroy",[o,n]),h.value=`Are you sure you want to delete role ${n.name}?`,v.value=!0},W=n=>{k.value=route("admin.tenants.destroy",n),h.value=`Are you sure you want to delete tenant ${n.name}?`,v.value=!0},Y=()=>{v.value=!1},M=()=>{p.value=!1,f.value=!1,x.value=!1},Z=D(()=>r.roles.data),ee=D(()=>r.tenants.data);return(n,a)=>(c(),C(se,null,[e(s(ae),{title:"Users Management"}),e(le,{breadcrumbs:w,tenantSlug:s(o),permissions:r.permissions},{default:l(()=>[t("div",Ce,[a[9]||(a[9]=t("div",{class:"space-y-2"},[t("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-900 dark:text-gray-100"}," User and Role Management "),t("p",{class:"text-gray-500 dark:text-gray-400"}," Manage users, roles, and permissions for your application. ")],-1)),e(s(ge)),t("div",$e,[t("div",Ue,[e(s(fe),{class:"h-5 w-5 text-gray-400"})]),e(ne,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=_=>d.value=_),placeholder:"Search users...",class:"w-full pl-10 rounded-md"},null,8,["modelValue"])]),e(s(z),null,{default:l(()=>[e(s(T),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[e(s(B),{class:"text-xl font-semibold"},{default:l(()=>[t("div",Ae,[e(s(pe),{class:"h-5 w-5"}),a[3]||(a[3]=t("span",null,"Users",-1))])]),_:1}),e(y,{onClick:F,variant:"default",size:"sm",class:"gap-1"},{default:l(()=>[e(s(j),{class:"h-4 w-4"}),a[4]||(a[4]=t("span",null,"Add User",-1))]),_:1})]),_:1}),e(s(R),{class:"p-2 md:p-4 lg:p-6"},{default:l(()=>[e(oe,{users:q.value,isSuperAdmin:s(g),onEdit:G,onDelete:K},null,8,["users","isSuperAdmin"])]),_:1})]),_:1}),e(s(z),null,{default:l(()=>[e(s(T),{class:"p-2 md:p-4 lg:p-6 flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[e(s(B),{class:"text-xl font-semibold"},{default:l(()=>[t("div",Me,[e(s(ve),{class:"h-5 w-5"}),a[5]||(a[5]=t("span",null,"Roles",-1))])]),_:1}),e(y,{onClick:X,variant:"default",size:"sm",class:"gap-1"},{default:l(()=>[e(s(j),{class:"h-4 w-4"}),a[6]||(a[6]=t("span",null,"Add Role",-1))]),_:1})]),_:1}),e(s(R),{class:"p-2 md:p-4 lg:p-6"},{default:l(()=>[e(re,{roles:u.roles,onEdit:J,onDelete:Q},null,8,["roles"])]),_:1})]),_:1}),s(g)?(c(),$(s(z),{key:0},{default:l(()=>[e(s(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[e(s(B),{class:"text-xl font-semibold"},{default:l(()=>[t("div",De,[e(s(xe),{class:"h-5 w-5"}),a[7]||(a[7]=t("span",null,"Companies",-1))])]),_:1}),e(y,{onClick:P,variant:"default",size:"sm",class:"gap-1"},{default:l(()=>[e(s(j),{class:"h-4 w-4"}),a[8]||(a[8]=t("span",null,"Add Company",-1))]),_:1})]),_:1}),e(s(R),null,{default:l(()=>[e(ie,{tenants:u.tenants,onEdit:H,onDelete:W},null,8,["tenants"])]),_:1})]),_:1})):b("",!0),e(S,{name:"fade"},{default:l(()=>[f.value?(c(),$(de,{key:0,user:m.value,roles:Z.value,permissions:u.permissions,tenants:ee.value,isSuperAdmin:s(g),tenantSlug:s(o),onClose:I,onSaved:M},null,8,["user","roles","permissions","tenants","isSuperAdmin","tenantSlug"])):b("",!0)]),_:1}),x.value?(c(),$(S,{key:1,name:"fade"},{default:l(()=>[t("div",je,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:V}),t("div",ze,[e(ue,{tenant:A.value,onClose:V,onSaved:M,class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full sm:max-w-lg md:max-w-xl overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},null,8,["tenant"])])])]),_:1})):b("",!0),e(S,{name:"fade"},{default:l(()=>[p.value?(c(),C("div",Re,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:L}),t("div",Te,[e(me,{role:U.value,permissions:u.permissions,isSuperAdmin:s(g),tenantSlug:s(o),onClose:L,onSaved:M,class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full sm:max-w-lg md:max-w-xl overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},null,8,["role","permissions","isSuperAdmin","tenantSlug"])])])):b("",!0)]),_:1}),e(S,{name:"fade"},{default:l(()=>[v.value?(c(),C("div",Be,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:a[1]||(a[1]=_=>v.value=!1)}),t("div",Ve,[e(Se,{deleteUrl:k.value,message:h.value,tenantSlug:s(o),onCancel:a[2]||(a[2]=_=>v.value=!1),onConfirmed:Y,class:"bg-background p-4 sm:p-6 rounded-lg shadow-xl w-full sm:max-w-md overflow-y-auto max-h-[95vh] animate-in fade-in zoom-in-95 duration-200 border border-border"},null,8,["deleteUrl","message","tenantSlug"])])])):b("",!0)]),_:1})])]),_:1},8,["tenantSlug","permissions"])],64))}}),us=_e(Le,[["__scopeId","data-v-eedeece1"]]);export{us as default};
