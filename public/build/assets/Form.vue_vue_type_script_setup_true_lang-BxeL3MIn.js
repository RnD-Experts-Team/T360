import{d as V,b as w,e as i,f as s,i as k,u as e,l as a,b2 as C,X as b,c as X,w as Y,L as p,M as $,N as y,S as c,U as m,k as O,D as G,Y as J,P as Q}from"./vendor-cgn9wV4E.js";import{x as Z}from"./vendor-vue-C6le94gM.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-1zH_gJ02.js";import{_ as N}from"./Button.vue_vue_type_script_setup_true_lang-DA-5a5tM.js";import{_ as h}from"./Label.vue_vue_type_script_setup_true_lang-WOFpmVDV.js";import{K as ee,j as ae,W as se,q as te,H as le,a as oe}from"./vendor-ui-BuPyOEYe.js";import{c as j}from"./utils-C4uCeQPu.js";import{m as ne,n as de,o as re}from"./vendor-icons-Bu7C1ObZ.js";import{_ as ie}from"./Checkbox.vue_vue_type_script_setup_true_lang-ChpZyGGS.js";import{_ as x}from"./Card.vue_vue_type_script_setup_true_lang-DQTQMX6v.js";import{_ as S}from"./CardContent.vue_vue_type_script_setup_true_lang-DNXZ8J1r.js";import{_ as M}from"./CardHeader.vue_vue_type_script_setup_true_lang-n-Rvhb9V.js";import{_ as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-AShXP1uR.js";const A=V({__name:"Select",props:{modelValue:{}},emits:["update:modelValue"],setup(f,{emit:_}){const n=_;function v(g){n("update:modelValue",g)}return(g,z)=>(i(),w(e(ee),{"model-value":g.modelValue,"onUpdate:modelValue":v},{default:s(()=>[k(g.$slots,"default")]),_:3},8,["model-value"]))}}),R=V({__name:"SelectContent",props:{class:{},position:{}},setup(f){const _=f;return(n,v)=>(i(),w(e(se),null,{default:s(()=>[a(e(ae),{class:C(e(j)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_.class)),position:n.position??"popper"},{default:s(()=>[k(n.$slots,"default")]),_:3},8,["class","position"])]),_:3}))}}),ue={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},F=V({__name:"SelectItem",props:{value:{},class:{},disabled:{type:Boolean}},setup(f){const _=f;return(n,v)=>(i(),w(e(te),{value:n.value,disabled:n.disabled,class:C(e(j)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 text-foreground dark:text-white",_.class))},{default:s(()=>[b("span",ue,[a(e(ne),{class:"h-4 w-4"})]),k(n.$slots,"default")]),_:3},8,["value","disabled","class"]))}}),H=V({__name:"SelectTrigger",props:{class:{},disabled:{type:Boolean}},setup(f){const _=f;return(n,v)=>(i(),w(e(le),{class:C(e(j)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_.class)),disabled:n.disabled},{default:s(()=>[k(n.$slots,"default"),a(e(de),{class:"h-4 w-4 opacity-50"})]),_:3},8,["class","disabled"]))}}),K=V({__name:"SelectValue",props:{class:{},placeholder:{}},setup(f){const _=f;return(n,v)=>(i(),w(e(oe),{placeholder:n.placeholder,class:C(e(j)("text-sm",_.class))},{default:s(()=>[k(n.$slots,"default")]),_:3},8,["placeholder","class"]))}}),ce={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},_e={class:"flex flex-wrap gap-4"},pe={key:0,class:"space-y-2 mb-4"},me=["value"],be={class:"space-y-2"},ve={class:"flex justify-end space-x-3"},ze=V({__name:"Form",props:{entry:{type:Object,default:()=>({})},tenants:{type:Array,default:()=>[]},metrics:{type:Object,default:()=>({})},TenantMetricsRules:{type:Array,default:()=>[]}},emits:["saved","cancel"],setup(f,{emit:_}){var D;const n=f,v=_,g=["fantastic_plus","fantastic","good","fair","poor"],z=["acceptance","on_time","maintenance_variance","open_boc","vcr_preventable","vmcr_p"],T=["driver_distraction","speeding_violation","sign_violation","traffic_light_violation","following_distance","roadside_parking"],E=["gold","silver","not_eligible"],q=[{label:"Less",value:"less"},{label:"Less or Equal",value:"less_or_equal"},{label:"Equal",value:"equal"},{label:"More or Equal",value:"more_or_equal"},{label:"More",value:"more"}],d=Z({safety_bonus_eligible_levels:n.entry.safety_bonus_eligible_levels??[],mvts_tenant_id:n.entry.mvts_tenant_id??(((D=n.tenants[0])==null?void 0:D.id)||null),mvts_divisor:n.entry.mvts_divisor??.135,...Object.fromEntries(z.flatMap(r=>g.flatMap(t=>[[`${r}_${t}`,n.entry[`${r}_${t}`]??""],[`${r}_${t}_operator`,n.entry[`${r}_${t}_operator`]??""]]))),...Object.fromEntries(T.flatMap(r=>E.flatMap(t=>[[`${r}_${t}`,n.entry[`${r}_${t}`]??""],[`${r}_${t}_operator`,n.entry[`${r}_${t}_operator`]??""]])))}),W=r=>{const t=d.safety_bonus_eligible_levels.indexOf(r);t===-1?d.safety_bonus_eligible_levels.push(r):d.safety_bonus_eligible_levels.splice(t,1)},I=()=>{d.post(route("performance-metrics.update"),{onSuccess:()=>v("saved")})},L=r=>{const t=q.find(l=>l.value===r);return t?t.label:"Select operator"},P=X(()=>{const r=d.mvts_tenant_id;return!Array.isArray(n.TenantMetricsRules)||!r?n.metrics:n.TenantMetricsRules.find(t=>t.tenant_id===r)||n.metrics});return Y(P,r=>{(r==null?void 0:r.mvts_divisor)!=null&&(d.mvts_divisor=r.mvts_divisor)}),(r,t)=>(i(),p("form",{onSubmit:Q(I,["prevent"]),class:"w-full space-y-8"},[(i(),p($,null,y(z,l=>a(e(x),{key:l,class:"shadow-sm"},{default:s(()=>[a(e(M),null,{default:s(()=>[a(e(U),{class:"capitalize"},{default:s(()=>[c(m(l.replace(/_/g," ")),1)]),_:2},1024)]),_:2},1024),a(e(S),null,{default:s(()=>[b("div",ce,[(i(),p($,null,y(g,o=>b("div",{key:`${l}-${o}`,class:"space-y-2"},[a(e(h),{for:`${l}-${o}`,class:"capitalize"},{default:s(()=>[c(m(o.replace(/_/g," ")),1)]),_:2},1032,["for"]),a(e(B),{id:`${l}-${o}`,modelValue:e(d)[`${l}_${o}`],"onUpdate:modelValue":u=>e(d)[`${l}_${o}`]=u,type:"number",step:"0.01",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),a(e(A),{modelValue:e(d)[`${l}_${o}_operator`],"onUpdate:modelValue":u=>e(d)[`${l}_${o}_operator`]=u},{default:s(()=>[a(e(H),{class:"w-full"},{default:s(()=>[a(e(K),null,{default:s(()=>[c(m(L(e(d)[`${l}_${o}_operator`])),1)]),_:2},1024)]),_:2},1024),a(e(R),null,{default:s(()=>[(i(),p($,null,y(q,u=>a(e(F),{key:u.value,value:u.value},{default:s(()=>[c(m(u.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64))])]),_:2},1024)]),_:2},1024)),64)),(i(),p($,null,y(T,l=>a(e(x),{key:l,class:"shadow-sm"},{default:s(()=>[a(e(M),null,{default:s(()=>[a(e(U),{class:"capitalize"},{default:s(()=>[c(m(l.replace(/_/g," ")),1)]),_:2},1024)]),_:2},1024),a(e(S),null,{default:s(()=>[b("div",fe,[(i(),p($,null,y(E,o=>b("div",{key:`${l}-${o}`,class:"space-y-2"},[a(e(h),{for:`${l}-${o}`,class:"capitalize"},{default:s(()=>[c(m(o.replace(/_/g," ")),1)]),_:2},1032,["for"]),a(e(B),{id:`${l}-${o}`,modelValue:e(d)[`${l}_${o}`],"onUpdate:modelValue":u=>e(d)[`${l}_${o}`]=u,type:"number",step:"0.01",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),a(e(A),{modelValue:e(d)[`${l}_${o}_operator`],"onUpdate:modelValue":u=>e(d)[`${l}_${o}_operator`]=u},{default:s(()=>[a(e(H),{class:"w-full"},{default:s(()=>[a(e(K),null,{default:s(()=>[c(m(L(e(d)[`${l}_${o}_operator`])),1)]),_:2},1024)]),_:2},1024),a(e(R),null,{default:s(()=>[(i(),p($,null,y(q,u=>a(e(F),{key:u.value,value:u.value},{default:s(()=>[c(m(u.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64))])]),_:2},1024)]),_:2},1024)),64)),a(e(x),{class:"shadow-sm"},{default:s(()=>[a(e(M),null,{default:s(()=>[a(e(U),null,{default:s(()=>t[3]||(t[3]=[c("Safety Bonus Eligibility")])),_:1})]),_:1}),a(e(S),null,{default:s(()=>[b("div",_e,[(i(),p($,null,y(g,l=>b("div",{key:l,class:"flex items-center space-x-2"},[a(e(ie),{id:`safety-bonus-${l}`,checked:e(d).safety_bonus_eligible_levels.includes(l),"onUpdate:checked":o=>W(l)},null,8,["id","checked","onUpdate:checked"]),a(e(h),{for:`safety-bonus-${l}`,class:"capitalize"},{default:s(()=>[c(m(l.replace(/_/g," ")),1)]),_:2},1032,["for"])])),64))])]),_:1})]),_:1}),a(e(x),{class:"shadow-sm"},{default:s(()=>[a(e(M),null,{default:s(()=>[a(e(U),null,{default:s(()=>t[4]||(t[4]=[c("MVtS Configuration")])),_:1})]),_:1}),a(e(S),null,{default:s(()=>{var l;return[(l=f.tenants)!=null&&l.length?(i(),p("div",pe,[a(e(h),{for:"mvts-tenant"},{default:s(()=>t[5]||(t[5]=[c("Tenant")])),_:1}),G(b("select",{id:"mvts-tenant","onUpdate:modelValue":t[0]||(t[0]=o=>e(d).mvts_tenant_id=o),class:"w-full p-2 rounded-md border border-input bg-background text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},[(i(!0),p($,null,y(f.tenants,o=>(i(),p("option",{key:o.id,value:o.id},m(o.name),9,me))),128))],512),[[J,e(d).mvts_tenant_id]])])):O("",!0),b("div",be,[a(e(h),{for:"mvts-divisor"},{default:s(()=>t[6]||(t[6]=[c("MVtS Divisor")])),_:1}),a(e(B),{id:"mvts-divisor",modelValue:e(d).mvts_divisor,"onUpdate:modelValue":t[1]||(t[1]=o=>e(d).mvts_divisor=o),type:"number",step:"0.001",min:"0.001",class:"w-full md:w-1/3"},null,8,["modelValue"]),t[7]||(t[7]=b("p",{class:"text-sm text-muted-foreground"}," This value is used to calculate the Maintenance Variance to Standard (MVtS) metric. Default value is 0.135. ",-1))])]}),_:1})]),_:1}),b("div",ve,[a(e(N),{type:"button",onClick:t[2]||(t[2]=l=>v("cancel")),variant:"outline"},{default:s(()=>t[8]||(t[8]=[c(" Cancel ")])),_:1}),a(e(N),{type:"submit",disabled:e(d).processing},{default:s(()=>[e(d).processing?(i(),w(e(re),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):O("",!0),c(" "+m(e(d).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])],32))}});export{ze as _};
