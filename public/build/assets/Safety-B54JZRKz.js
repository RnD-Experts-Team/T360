import{r as k,c as q,w as Me,b as v,e as d,f as l,l as n,X as i,u as a,k as c,L as f,S as u,U as p,D as I,M as C,N as $,Y as K,P as ue,b2 as S,bF as Fe}from"./vendor-cgn9wV4E.js";import{_ as N}from"./Icon.vue_vue_type_script_setup_true_lang-g5QrAIpa.js";import{_ as Te,a as Pe,b as Z,c as O,d as je,e as F}from"./TableRow.vue_vue_type_script_setup_true_lang-58J5Q7id.js";import{_ as g}from"./Button.vue_vue_type_script_setup_true_lang-DA-5a5tM.js";import{_ as me}from"./Card.vue_vue_type_script_setup_true_lang-DQTQMX6v.js";import{_ as fe}from"./CardContent.vue_vue_type_script_setup_true_lang-DNXZ8J1r.js";import{b as ee,_ as te,a as ae}from"./DialogDescription.vue_vue_type_script_setup_true_lang-BDOQqQHy.js";import{_ as le,a as ne}from"./DialogTitle.vue_vue_type_script_setup_true_lang-K_t0Wv0O.js";import{_ as se}from"./DialogFooter.vue_vue_type_script_setup_true_lang-C4cZ_wVx.js";import{_ as A}from"./Label.vue_vue_type_script_setup_true_lang-WOFpmVDV.js";import{_ as T}from"./Input.vue_vue_type_script_setup_true_lang-1zH_gJ02.js";import{b as ce,_ as pe,a as ve}from"./AlertDescription.vue_vue_type_script_setup_true_lang-BdYx0SaG.js";import{_ as We}from"./AppLayout.vue_vue_type_script_setup_true_lang-DnFOFWBn.js";import{x as X,g as Le,W as re}from"./vendor-vue-C6le94gM.js";import Re from"./SafetySummary-CvYqyqOv.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-C4uCeQPu.js";import"./vendor-icons-Bu7C1ObZ.js";import"./vendor-ui-BuPyOEYe.js";import"./useInitials-DzeGKvtI.js";import"./app-DdEjr71t.js";import"./vendor-axios-C0Zqfgkc.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BM02NuXb.js";const qe={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},Ie={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6"},Oe={class:"flex flex-wrap gap-3 ml-3"},Xe={key:2,class:"flex items-center gap-2"},He=["value"],Ye={key:3,class:"flex items-center gap-2"},Ge={class:"cursor-pointer"},Qe={class:"flex flex-col items-center md:items-start gap-2"},Je={class:"flex flex-wrap gap-1 md:gap-2"},Ke={class:"flex items-center justify-between"},Ze={key:0,class:"text-sm text-muted-foreground"},et={key:0},tt={key:1},at={key:2},lt={key:3,class:"ml-1"},nt={key:2,class:"flex flex-col items-center justify-center rounded-lg border bg-muted/20 py-16"},st={key:3},rt={class:"overflow-x-auto border-t border-border bg-background dark:bg-background"},it={class:"flex items-center justify-center"},dt=["checked"],ot=["value"],ut={class:"flex space-x-2"},mt={key:0,class:"border-t bg-muted/20 px-4 py-3"},ft={class:"flex flex-col sm:flex-row justify-between items-center gap-2"},ct={class:"text-sm text-muted-foreground"},pt={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-4 w-full sm:w-auto"},vt={class:"flex items-center gap-2"},gt={class:"flex flex-wrap"},yt=["innerHTML"],_t={key:0,class:"col-span-full"},bt={class:"relative"},xt=["value"],kt={class:"col-span-full"},wt={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3"},St={__name:"Safety",props:{entries:{type:Object,default:()=>({data:[],links:[]})},tenantSlug:String,SuperAdmin:Boolean,tenants:Array,dateRange:Object,dateFilter:{type:String,default:"yesterday"},safetyData:{type:Object,default:()=>({})},weekNumber:{type:Number,default:null},startWeekNumber:{type:Number,default:null},endWeekNumber:{type:Number,default:null},year:{type:Number,default:null},permissions:Array},setup(m){const r=m;console.log(r.entries.data.length);const P=k(""),z=k(""),D=k(!1),H=k("Create Entry"),V=k("Create"),Y=k(null),b=k(r.dateFilter||"full"),E=k(10),w=k([]),U=k(!1),_=k(!1),M=k(!1),ie=k(null),ge=[{title:r.tenantSlug?"Dashboard":"Admin Dashboard",href:r.tenantSlug?route("dashboard",{tenantSlug:r.tenantSlug}):route("admin.dashboard")},{title:"Safety",href:r.tenantSlug?route("safety.index",{tenantSlug:r.tenantSlug}):route("safety.index.admin")}];function ye(){_.value=!_.value}const de=q(()=>(b.value==="yesterday"||b.value==="current-week")&&r.weekNumber&&r.year?`Week ${r.weekNumber}, ${r.year}`:(b.value==="6w"||b.value==="quarterly")&&r.startWeekNumber&&r.endWeekNumber&&r.year?`Weeks ${r.startWeekNumber}-${r.endWeekNumber}, ${r.year}`:""),j={driver_name:"text",user_name:"text",group:"text",group_hierarchy:"text",minutes_analyzed:"decimal",green_minutes_percent:"decimal",overspeeding_percent:"decimal",driver_score:"decimal",total_events_avg_fd_impact:"decimal",average_following_distance_sec:"decimal",average_following_distance_gz_impact:"decimal",total_events:"decimal",high_g:"decimal",low_impact:"decimal",driver_initiated:"decimal",potential_collision:"decimal",sign_violations:"decimal",sign_violations_gz_impact:"decimal",traffic_light_violation:"decimal",traffic_light_violation_gz_impact:"decimal",u_turn:"decimal",u_turn_gz_impact:"decimal",hard_braking:"decimal",hard_braking_gz_impact:"decimal",hard_turn:"decimal",hard_turn_gz_impact:"decimal",hard_acceleration:"decimal",hard_acceleration_gz_impact:"decimal",driver_distraction:"decimal",driver_distraction_gz_impact:"decimal",following_distance:"decimal",following_distance_gz_impact:"decimal",speeding_violations:"decimal",speeding_violations_gz_impact:"decimal",seatbelt_compliance:"decimal",camera_obstruction:"decimal",driver_drowsiness:"decimal",weaving:"decimal",weaving_gz_impact:"decimal",swerve:"decimal",collision_warning:"decimal",collision_warning_gz_impact:"decimal",requested_video:"decimal",backing:"decimal",roadside_parking:"decimal",lane_conduct:"decimal",driver_distracted_hard_brake:"decimal",following_distance_hard_brake:"decimal",driver_distracted_following_distance:"decimal",driver_star:"decimal",driver_star_gz_impact:"decimal",vehicle_type:"text",safety_normalisation_factor:"decimal",date:"date"},W=Object.keys(j),L=[...W],y=X({tenant_id:null,...Object.fromEntries(W.map(s=>[s,""])),id:null}),h=X({csv_file:null,date:"",tenant_id:null}),_e=X({});function G(s){const e=j[s];return e==="decimal"||e==="integer"?"number":e==="date"?"date":"text"}function Q(s){const e=j[s];return e==="decimal"?"0.01":e==="integer"?"1":null}function J(s){const e=j[s];return e==="decimal"||e==="integer"?"-99999":null}function be(){y.reset(),H.value="Create Entry",V.value="Create",D.value=!0}function xe(s){H.value="Edit Entry",V.value="Update",y.tenant_id=r.SuperAdmin?s.tenant_id:null,y.id=s.id,W.forEach(e=>{y[e]=s[e]}),D.value=!0}function oe(){D.value=!1}function ke(){const s=V.value==="Create",e=s?r.SuperAdmin?route("safety.store.admin"):route("safety.store",r.tenantSlug):r.SuperAdmin?route("safety.update.admin",[y.id]):route("safety.update",[r.tenantSlug,y.id]);y[s?"post":"put"](e,{onSuccess:()=>{z.value=s?"Entry created.":"Entry updated.",oe()},onError:()=>alert("Something went wrong.")})}function we(s){ie.value=s,M.value=!0}function Se(s){const e=r.SuperAdmin?route("safety.destroy.admin",[s]):route("safety.destroy",[r.tenantSlug,s]);_e.delete(e,{onSuccess:()=>{z.value="Entry deleted.",M.value=!1}})}function he(s){var o;const e=(o=s.target.files)==null?void 0:o[0];if(!e)return;if(!h.date){alert("Please select the date for this import.");return}if(r.SuperAdmin&&!h.tenant_id){alert("Please select a tenant for import.");return}h.csv_file=e;const t=r.SuperAdmin?route("safety.import.admin"):route("safety.import",r.tenantSlug);h.post(t,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{z.value="Data imported successfully.",h.reset()},onError:()=>alert("Import failed.")})}function Ce(){var e,t;if(r.entries.data.length===0){P.value="No data available to export",setTimeout(()=>{P.value=""},3e3);return}const s=r.SuperAdmin?route("safety.export.admin"):route("safety.export",r.tenantSlug);(e=Y.value)==null||e.setAttribute("action",s),(t=Y.value)==null||t.submit()}Me(z,s=>{s&&setTimeout(()=>{z.value=""},5e3)});function R(s){b.value=s;const e=r.tenantSlug?route("safety.index",{tenantSlug:r.tenantSlug}):route("safety.index.admin");re.get(e,{dateFilter:s,perPage:E.value},{preserveState:!0})}function $e(){const s=r.tenantSlug?route("safety.index",{tenantSlug:r.tenantSlug}):route("safety.index.admin");re.get(s,{dateFilter:b.value,perPage:E.value},{preserveState:!0})}function B(s){if(!s)return"";const e=s.split("-");if(e.length!==3)return s;const[t,o,Ue]=e;return`${Number(o)}/${Number(Ue)}/${t}`}function ze(s){if(s){const e=new URL(s);e.searchParams.set("perPage",E.value),e.searchParams.set("dateFilter",b.value),re.get(e.href,{},{only:["entries"]})}}const Ne=q(()=>r.entries.data.length>0&&w.value.length===r.entries.data.length);function Ae(s){s.target.checked?w.value=r.entries.data.map(e=>e.id):w.value=[]}function De(){w.value.length>0&&(U.value=!0)}const Ve=q(()=>{var s;return r.safetyData?{...r.safetyData,dateRangeLabel:((s=r.dateRange)==null?void 0:s.label)||b.value}:{}});function Ee(){const s=X({ids:w.value}),e=r.SuperAdmin?"safety.destroyBulk.admin":"safety.destroyBulk",t=r.SuperAdmin?{}:{tenantSlug:r.tenantSlug};s.delete(route(e,t),{preserveScroll:!0,onSuccess:()=>{z.value=`${w.value.length} safety records deleted successfully.`,w.value=[],U.value=!1},onError:o=>{console.error(o)}})}const x=q(()=>r.permissions.map(s=>s.name));return(s,e)=>(d(),v(We,{breadcrumbs:ge,tenantSlug:m.tenantSlug,permissions:r.permissions},{default:l(()=>[n(a(Le),{title:"Safety"}),i("div",qe,[z.value?(d(),v(a(ce),{key:0,variant:"success"},{default:l(()=>[n(a(pe),null,{default:l(()=>e[18]||(e[18]=[u("Success")])),_:1}),n(a(ve),null,{default:l(()=>[u(p(z.value),1)]),_:1})]),_:1})):c("",!0),P.value?(d(),v(a(ce),{key:1,variant:"destructive"},{default:l(()=>[n(a(pe),null,{default:l(()=>e[19]||(e[19]=[u("Error")])),_:1}),n(a(ve),null,{default:l(()=>[u(p(P.value),1)]),_:1})]),_:1})):c("",!0),i("div",Ie,[e[24]||(e[24]=i("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-gray-200"}," Safety Management ",-1)),i("div",Oe,[x.value.includes("safety-data.create")?(d(),v(a(g),{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:be,variant:"default"},{default:l(()=>[n(N,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[20]||(e[20]=u(" Create New Entry "))]),_:1})):c("",!0),w.value.length>0&&x.value.includes("safety-data.delete")?(d(),v(a(g),{key:1,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=t=>De()),variant:"destructive"},{default:l(()=>[n(N,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),u(" Delete Selected ("+p(w.value.length)+") ",1)]),_:1})):c("",!0),m.SuperAdmin?(d(),f("div",Xe,[I(i("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>a(h).tenant_id=t),class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm"},[e[21]||(e[21]=i("option",{disabled:"",value:""},"Select Company Name",-1)),(d(!0),f(C,null,$(m.tenants,t=>(d(),f("option",{key:t.id,value:t.id},p(t.name),9,He))),128))],512),[[K,a(h).tenant_id]])])):c("",!0),x.value.includes("safety-data.import")?(d(),f("div",Ye,[n(a(T),{modelValue:a(h).date,"onUpdate:modelValue":e[2]||(e[2]=t=>a(h).date=t),type:"date",required:"",placeholder:"Date for Import"},null,8,["modelValue"])])):c("",!0),i("label",Ge,[x.value.includes("safety-data.import")?(d(),v(a(g),{key:0,class:"px-2 py-0 md:px-4 md:py-2",variant:"secondary",as:"span"},{default:l(()=>[n(N,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[22]||(e[22]=u(" Upload XLSX "))]),_:1})):c("",!0),i("input",{type:"file",class:"hidden",onChange:he,accept:".xlsx"},null,32)]),x.value.includes("safety-data.export")?(d(),v(a(g),{key:4,class:"px-2 py-0 md:px-4 md:py-2",onClick:ue(Ce,["prevent"]),variant:"outline"},{default:l(()=>[n(N,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[23]||(e[23]=u(" Download CSV "))]),_:1})):c("",!0)])]),n(a(me),null,{default:l(()=>[n(a(fe),{class:"p-2 md:p-4 lg:p-6"},{default:l(()=>[i("div",Qe,[i("div",Je,[n(a(g),{onClick:e[3]||(e[3]=t=>R("yesterday")),variant:"outline",size:"sm",class:S({"border-primary bg-primary/10 text-primary":b.value==="yesterday"})},{default:l(()=>e[25]||(e[25]=[u(" Yesterday ")])),_:1},8,["class"]),n(a(g),{onClick:e[4]||(e[4]=t=>R("current-week")),variant:"outline",size:"sm",class:S({"border-primary bg-primary/10 text-primary":b.value==="current-week"})},{default:l(()=>e[26]||(e[26]=[u(" WTD ")])),_:1},8,["class"]),n(a(g),{onClick:e[5]||(e[5]=t=>R("6w")),variant:"outline",size:"sm",class:S({"border-primary bg-primary/10 text-primary":b.value==="6w"})},{default:l(()=>e[27]||(e[27]=[u(" T6W ")])),_:1},8,["class"]),n(a(g),{onClick:e[6]||(e[6]=t=>R("quarterly")),variant:"outline",size:"sm",class:S({"border-primary bg-primary/10 text-primary":b.value==="quarterly"})},{default:l(()=>e[28]||(e[28]=[u(" Quarterly ")])),_:1},8,["class"])]),i("div",Ke,[m.dateRange?(d(),f("div",Ze,[b.value==="yesterday"&&m.dateRange.start?(d(),f("span",et," Showing data from "+p(B(m.dateRange.start)),1)):m.dateRange.start&&m.dateRange.end?(d(),f("span",tt," Showing data from "+p(B(m.dateRange.start))+" to "+p(B(m.dateRange.end)),1)):(d(),f("span",at,p(m.dateRange.label),1)),de.value?(d(),f("span",lt,"("+p(de.value)+")",1)):c("",!0)])):c("",!0)])])]),_:1})]),_:1}),r.entries.data.length===0?(d(),f("div",nt,[n(N,{name:"database-x",class:"mb-4 h-16 w-16 text-muted-foreground"}),e[29]||(e[29]=i("h2",{class:"text-center text-2xl font-bold text-muted-foreground"}," There is No Data to give Information about. ",-1))])):(d(),f("div",st,[m.SuperAdmin?c("",!0):(d(),v(Re,{key:0,data:Ve.value,activeTab:b.value},null,8,["data","activeTab"])),n(a(g),{onClick:ye,variant:"outline",size:"sm",class:S(["my-2 md:my-4",{"border-primary bg-primary/10 text-primary":_.value}])},{default:l(()=>[n(N,{name:_.value?"lock":"unlock",class:"mr-2 h-4 w-4"},null,8,["name"]),u(" "+p(_.value?"Unfreeze Names":"Freeze Names"),1)]),_:1},8,["class"]),n(a(me),{class:"mx-auto max-w-[95vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto"},{default:l(()=>[n(a(fe),{class:"p-0"},{default:l(()=>[i("div",rt,[n(a(Te),{class:"relative h-[500px] overflow-auto"},{default:l(()=>[n(a(Pe),null,{default:l(()=>[n(a(Z),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:l(()=>[x.value.includes("safety-data.delete")?(d(),v(a(O),{key:0,class:S(["w-[50px]",{"sticky left-0 z-20 bg-background":_.value}])},{default:l(()=>[i("div",it,[i("input",{type:"checkbox",onChange:Ae,checked:Ne.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,dt)])]),_:1},8,["class"])):c("",!0),m.SuperAdmin?(d(),v(a(O),{key:1,class:S({"sticky left-[50px] z-20 bg-background":_.value})},{default:l(()=>e[30]||(e[30]=[u("Company Name")])),_:1},8,["class"])):c("",!0),(d(!0),f(C,null,$(L.filter(t=>!["user_name","group","group_hierarchy","requested_video","safety_normalisation_factor"].includes(t)&&!t.toLowerCase().includes("impact")),t=>(d(),v(a(O),{key:t,class:S(["whitespace-nowrap",{"sticky z-20 bg-background":_.value&&t==="driver_name","left-[50px]":_.value&&t==="driver_name"&&!m.SuperAdmin,"left-[150px]":_.value&&t==="driver_name"&&m.SuperAdmin}])},{default:l(()=>[u(p(t.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())),1)]),_:2},1032,["class"]))),128)),x.value.includes("safety-data.update")||x.value.includes("safety-data.delete")?(d(),v(a(O),{key:2},{default:l(()=>e[31]||(e[31]=[u("Actions")])),_:1})):c("",!0)]),_:1})]),_:1}),n(a(je),null,{default:l(()=>[m.entries.data.length===0?(d(),v(a(Z),{key:0},{default:l(()=>[n(a(F),{colspan:m.SuperAdmin?L.length+3:L.length+2,class:"py-8 text-center"},{default:l(()=>e[32]||(e[32]=[u(" No entries found ")])),_:1},8,["colspan"])]),_:1})):c("",!0),(d(!0),f(C,null,$(m.entries.data,t=>(d(),v(a(Z),{key:t.id,class:"hover:bg-muted/50"},{default:l(()=>[x.value.includes("safety-data.delete")?(d(),v(a(F),{key:0,class:S(["text-center",{"sticky left-0 z-10 bg-background":_.value}])},{default:l(()=>[I(i("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[7]||(e[7]=o=>w.value=o),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,ot),[[Fe,w.value]])]),_:2},1032,["class"])):c("",!0),m.SuperAdmin?(d(),v(a(F),{key:1,class:S({"sticky left-[50px] z-10 bg-background":_.value})},{default:l(()=>{var o;return[u(p(((o=t.tenant)==null?void 0:o.name)??"â€”"),1)]}),_:2},1032,["class"])):c("",!0),(d(!0),f(C,null,$(L.filter(o=>!["user_name","group","group_hierarchy","requested_video","safety_normalisation_factor"].includes(o)&&!o.toLowerCase().includes("impact")),o=>(d(),v(a(F),{key:o,class:S(["whitespace-nowrap",{"sticky z-10 bg-background":_.value&&o==="driver_name","left-[50px]":_.value&&o==="driver_name"&&!m.SuperAdmin,"left-[150px]":_.value&&o==="driver_name"&&m.SuperAdmin}])},{default:l(()=>[u(p(typeof t[o]=="string"&&/^\d{4}-\d{2}-\d{2}/.test(t[o])?B(t[o]):typeof t[o]=="string"&&!isNaN(parseFloat(t[o]))?Math.round(parseFloat(t[o])):typeof t[o]=="number"?Math.round(t[o]):t[o]),1)]),_:2},1032,["class"]))),128)),x.value.includes("safety-data.delete")||x.value.includes("safety-data.update")?(d(),v(a(F),{key:2},{default:l(()=>[i("div",ut,[x.value.includes("safety-data.update")?(d(),v(a(g),{key:0,onClick:o=>xe(t),variant:"warning",size:"sm"},{default:l(()=>[n(N,{name:"pencil",class:"mr-1 h-4 w-4"}),e[33]||(e[33]=u(" Edit "))]),_:2},1032,["onClick"])):c("",!0),x.value.includes("safety-data.delete")?(d(),v(a(g),{key:1,onClick:o=>we(t.id),variant:"destructive",size:"sm"},{default:l(()=>[n(N,{name:"trash",class:"mr-1 h-4 w-4"}),e[34]||(e[34]=u(" Delete "))]),_:2},1032,["onClick"])):c("",!0)])]),_:2},1024)):c("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),m.entries.links?(d(),f("div",mt,[i("div",ft,[i("div",ct," Showing "+p(m.entries.data.length)+" entries ",1),i("div",pt,[i("div",vt,[n(a(A),{for:"perPage",class:"text-sm"},{default:l(()=>e[35]||(e[35]=[u("Per page:")])),_:1}),I(i("select",{id:"perPage","onUpdate:modelValue":e[8]||(e[8]=t=>E.value=t),onChange:$e,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},e[36]||(e[36]=[i("option",{value:"10"},"10",-1),i("option",{value:"25"},"25",-1),i("option",{value:"50"},"50",-1),i("option",{value:"100"},"100",-1)]),544),[[K,E.value]])]),i("div",gt,[(d(!0),f(C,null,$(m.entries.links,t=>(d(),v(a(g),{key:t.label,onClick:o=>ze(t.url),disabled:!t.url,variant:"ghost",size:"sm",class:S(["mx-1",{"border-primary bg-primary/10 text-primary":t.active}])},{default:l(()=>[i("span",{innerHTML:t.label},null,8,yt)]),_:2},1032,["onClick","disabled","class"]))),128))])])])])):c("",!0)]),_:1})]),_:1}),n(a(ee),{open:U.value,"onUpdate:open":e[11]||(e[11]=t=>U.value=t)},{default:l(()=>[n(a(te),null,{default:l(()=>[n(a(le),null,{default:l(()=>[n(a(ne),null,{default:l(()=>e[37]||(e[37]=[u("Confirm Bulk Deletion")])),_:1}),n(a(ae),null,{default:l(()=>[u(" Are you sure you want to delete "+p(w.value.length)+" safety records? This action cannot be undone. ",1)]),_:1})]),_:1}),n(a(se),{class:"mt-4"},{default:l(()=>[n(a(g),{type:"button",onClick:e[9]||(e[9]=t=>U.value=!1),variant:"outline"},{default:l(()=>e[38]||(e[38]=[u(" Cancel ")])),_:1}),n(a(g),{type:"button",onClick:e[10]||(e[10]=t=>Ee()),variant:"destructive"},{default:l(()=>e[39]||(e[39]=[u(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),i("form",{ref_key:"exportForm",ref:Y,method:"GET",class:"hidden"},null,512)]))]),n(a(ee),{open:M.value,"onUpdate:open":e[14]||(e[14]=t=>M.value=t)},{default:l(()=>[n(a(te),{class:"max-w-[95vw] sm:max-w-md"},{default:l(()=>[n(a(le),{class:"px-4 sm:px-6"},{default:l(()=>[n(a(ne),{class:"text-lg sm:text-xl"},{default:l(()=>e[40]||(e[40]=[u("Confirm Deletion")])),_:1}),n(a(ae),{class:"text-xs sm:text-sm"},{default:l(()=>e[41]||(e[41]=[u(" Are you sure you want to delete this safety record? This action cannot be undone. ")])),_:1})]),_:1}),n(a(se),{class:"px-4 sm:px-6"},{default:l(()=>[n(a(g),{type:"button",onClick:e[12]||(e[12]=t=>M.value=!1),variant:"outline",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>e[42]||(e[42]=[u(" Cancel ")])),_:1}),n(a(g),{type:"button",onClick:e[13]||(e[13]=t=>Se(ie.value)),variant:"destructive",class:"h-9 px-4 py-1 text-xs sm:h-10 sm:text-sm"},{default:l(()=>e[43]||(e[43]=[u(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),n(a(ee),{open:D.value,"onUpdate:open":e[17]||(e[17]=t=>D.value=t)},{default:l(()=>[n(a(te),{class:"w-[90vw] sm:max-w-lg md:max-w-2xl lg:max-w-4xl"},{default:l(()=>[n(a(le),null,{default:l(()=>[n(a(ne),null,{default:l(()=>[u(p(H.value),1)]),_:1}),n(a(ae),null,{default:l(()=>[u(" Fill in the details to "+p(V.value.toLowerCase())+" an entry. ",1)]),_:1})]),_:1}),i("form",{onSubmit:ue(ke,["prevent"]),class:"grid max-h-[70vh] gap-6 overflow-y-auto p-1"},[m.SuperAdmin?(d(),f("div",_t,[n(a(A),{for:"tenant"},{default:l(()=>e[44]||(e[44]=[u("Company Name")])),_:1}),i("div",bt,[I(i("select",{id:"tenant","onUpdate:modelValue":e[15]||(e[15]=t=>a(y).tenant_id=t),class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[45]||(e[45]=i("option",{disabled:"",value:""},"Select Company",-1)),(d(!0),f(C,null,$(m.tenants,t=>(d(),f("option",{key:t.id,value:t.id},p(t.name),9,xt))),128))],512),[[K,a(y).tenant_id]]),e[46]||(e[46]=i("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[i("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):c("",!0),i("div",kt,[n(a(A),{for:"date",class:"font-medium"},{default:l(()=>e[47]||(e[47]=[u("Date")])),_:1}),n(a(T),{id:"date",modelValue:a(y).date,"onUpdate:modelValue":e[16]||(e[16]=t=>a(y).date=t),type:"date",required:"",class:"w-full"},null,8,["modelValue"])]),i("div",wt,[e[48]||(e[48]=i("div",{class:"col-span-full mb-2"},[i("h3",{class:"text-md border-b pb-1 font-semibold"},"Driver Information")],-1)),(d(),f(C,null,$(["driver_name","user_name","group","group_hierarchy","vehicle_type"],t=>i("div",{key:t,class:"space-y-1"},[n(a(A),{for:t,class:"capitalize"},{default:l(()=>[u(p(t.replace(/_/g," ")),1)]),_:2},1032,["for"]),n(a(T),{id:t,modelValue:a(y)[t],"onUpdate:modelValue":o=>a(y)[t]=o,type:G(t),step:Q(t),min:J(t)},null,8,["id","modelValue","onUpdate:modelValue","type","step","min"])])),64)),e[49]||(e[49]=i("div",{class:"col-span-full mb-2 mt-4"},[i("h3",{class:"text-md border-b pb-1 font-semibold"},"Performance Metrics")],-1)),(d(),f(C,null,$(["minutes_analyzed","green_minutes_percent","overspeeding_percent","driver_score","safety_normalisation_factor"],t=>i("div",{key:t,class:"space-y-1"},[n(a(A),{for:t,class:"capitalize"},{default:l(()=>[u(p(t.replace(/_/g," ")),1)]),_:2},1032,["for"]),n(a(T),{id:t,modelValue:a(y)[t],"onUpdate:modelValue":o=>a(y)[t]=o,type:G(t),step:Q(t),min:J(t)},null,8,["id","modelValue","onUpdate:modelValue","type","step","min"])])),64)),e[50]||(e[50]=i("div",{class:"col-span-full mb-2 mt-4"},[i("h3",{class:"text-md border-b pb-1 font-semibold"},"Events & Violations")],-1)),(d(!0),f(C,null,$(a(W).filter(t=>!["driver_name","user_name","group","group_hierarchy","vehicle_type","minutes_analyzed","green_minutes_percent","overspeeding_percent","driver_score","safety_normalisation_factor","date"].includes(t)),t=>(d(),f("div",{key:t,class:"space-y-1"},[n(a(A),{for:t,class:"text-sm capitalize"},{default:l(()=>[u(p(t.replace(/_/g," ")),1)]),_:2},1032,["for"]),n(a(T),{id:t,modelValue:a(y)[t],"onUpdate:modelValue":o=>a(y)[t]=o,type:G(t),step:Q(t),min:J(t)},null,8,["id","modelValue","onUpdate:modelValue","type","step","min"])]))),128))]),n(a(se),{class:"mt-6 flex-col space-y-2 border-t pt-4 sm:flex-row sm:justify-end sm:space-x-2 sm:space-y-0"},{default:l(()=>[n(a(g),{type:"button",onClick:oe,variant:"outline",class:"w-full sm:w-auto"},{default:l(()=>e[51]||(e[51]=[u(" Cancel ")])),_:1}),n(a(g),{type:"submit",variant:"default",class:"w-full sm:w-auto"},{default:l(()=>[u(p(V.value),1)]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1},8,["tenantSlug","permissions"]))}},Ht=Be(St,[["__scopeId","data-v-bfd7bd08"]]);export{Ht as default};
