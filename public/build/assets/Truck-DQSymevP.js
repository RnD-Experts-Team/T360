import{d as He,r as v,c as de,w as we,A as Ke,K as Ze,b as w,e as u,f as n,l as s,X as l,u as t,k as g,S as r,U as f,P as _e,D,Y as E,L as p,M as x,N as C,bF as We,b2 as pe}from"./vendor-cgn9wV4E.js";import{_ as b}from"./Icon.vue_vue_type_script_setup_true_lang-g5QrAIpa.js";import{_ as fe,a as me,b as F,c as I,d as ce,e as M}from"./TableRow.vue_vue_type_script_setup_true_lang-58J5Q7id.js";import{_ as y}from"./Button.vue_vue_type_script_setup_true_lang-DA-5a5tM.js";import{_ as H}from"./Card.vue_vue_type_script_setup_true_lang-DQTQMX6v.js";import{_ as Xe}from"./CardHeader.vue_vue_type_script_setup_true_lang-n-Rvhb9V.js";import{_ as Ye}from"./CardTitle.vue_vue_type_script_setup_true_lang-AShXP1uR.js";import{_ as K}from"./CardContent.vue_vue_type_script_setup_true_lang-DNXZ8J1r.js";import{b as J,_ as Q,a as ee}from"./DialogDescription.vue_vue_type_script_setup_true_lang-BDOQqQHy.js";import{_ as te,a as le}from"./DialogTitle.vue_vue_type_script_setup_true_lang-K_t0Wv0O.js";import{_ as ve}from"./DialogFooter.vue_vue_type_script_setup_true_lang-C4cZ_wVx.js";import{_ as h}from"./Label.vue_vue_type_script_setup_true_lang-WOFpmVDV.js";import{_ as Z}from"./Input.vue_vue_type_script_setup_true_lang-1zH_gJ02.js";import{b as ge,_ as xe,a as ye}from"./AlertDescription.vue_vue_type_script_setup_true_lang-BdYx0SaG.js";import{_ as Je}from"./AppLayout.vue_vue_type_script_setup_true_lang-BeAMINRz.js";import{a as Qe,x as se,g as et,W as ne}from"./vendor-vue-C6le94gM.js";import"./utils-C4uCeQPu.js";import"./vendor-icons-Bu7C1ObZ.js";import"./vendor-ui-BuPyOEYe.js";import"./useInitials-DzeGKvtI.js";import"./app-8KAEFqwr.js";import"./vendor-axios-C0Zqfgkc.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BM02NuXb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const tt={class:"w-full md:max-w-2xl lg:max-w-3xl xl:max-w-6xl lg:mx-auto m-0 p-2 md:p-4 lg:p-6 space-y-2 md:space-y-4 lg:space-y-6"},lt={class:"flex flex-col sm:flex-row justify-between items-center px-2 mb-2 md:mb-4 lg:mb-6"},st={class:"flex flex-wrap gap-3"},nt={class:"flex flex-col gap-1 md:gap-4"},at={class:"grid grid-cols-1 sm:grid-cols-3 gap-1 md:gap-4 w-full"},ot={class:"overflow-x-auto"},rt={class:"flex items-center justify-center"},ut=["checked"],it={class:"flex items-center"},dt={key:4,class:"ml-2"},pt={key:0,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ft={key:1,class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},mt={key:5,class:"ml-2 opacity-50"},ct=["value"],vt={class:"flex space-x-2"},gt={key:0,class:"border-t bg-muted/20 px-4 py-3"},xt={class:"flex flex-col sm:flex-row justify-between items-center gap-2"},yt={class:"flex items-center gap-4 text-sm text-muted-foreground"},bt={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-4 w-full sm:w-auto"},kt=["value"],wt={class:"flex flex-wrap"},_t=["innerHTML"],ht={key:0,class:"col-span-2"},St={class:"relative"},Ct=["value"],Vt={class:"col-span-2 sm:col-span-1"},At={class:"col-span-2 sm:col-span-1"},Dt={class:"relative"},Mt={class:"col-span-2 sm:col-span-1"},Tt={class:"relative"},$t={class:"col-span-2 sm:col-span-1"},Et={class:"relative"},It={class:"col-span-2 sm:col-span-1"},Ut={class:"col-span-2 sm:col-span-1"},Lt={class:"col-span-2 sm:col-span-1"},Nt={class:"relative"},Bt={class:"col-span-2 sm:col-span-1"},Ft={class:"col-span-2 sm:col-span-1"},Pt={class:"relative"},Rt={class:"flex items-center gap-2"},jt={class:"flex-1 overflow-y-auto px-4 sm:px-6 py-4"},zt={key:0},qt={class:"space-y-4"},Ot={class:"flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 bg-muted/20"},Gt={class:"cursor-pointer"},Ht=["disabled"],Kt={class:"flex items-center gap-2 text-sm text-muted-foreground"},Zt=["href"],Wt={key:0,class:"flex items-center justify-center gap-2 p-4"},Xt={key:1,class:"space-y-4"},Yt={key:0,class:"rounded-lg border p-3"},Jt={class:"flex items-center justify-between"},Qt={class:"text-xs text-muted-foreground"},el={class:"mt-2 flex flex-wrap gap-2"},tl={class:"grid grid-cols-3 gap-4"},ll={class:"text-2xl font-bold"},sl={class:"text-2xl font-bold text-green-600"},nl={class:"text-2xl font-bold text-red-600"},al={key:2},ol={class:"flex items-center justify-between mb-3"},rl={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},ul={class:"border rounded-lg overflow-hidden"},il={class:"max-h-96 overflow-y-auto"},dl={class:"flex flex-wrap gap-x-3 gap-y-1"},pl={class:"font-medium text-foreground"},fl={key:0,class:"italic text-muted-foreground"},ml={class:"space-y-1"},cl={key:0,class:"text-xs text-muted-foreground"},vl={key:3},gl={class:"text-lg font-semibold text-green-600 flex items-center gap-2 mb-3"},xl={class:"border rounded-lg overflow-hidden"},yl={class:"flex flex-wrap gap-x-3 gap-y-1"},bl={class:"font-medium"},kl={key:0,class:"italic text-muted-foreground"},wl={class:"border-t p-4 flex justify-end gap-3"},_l={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Kl=He({__name:"Truck",props:{entries:Object,tenantSlug:String,SuperAdmin:Boolean,tenants:Array,perPage:{type:Number,default:10}},setup(A){const c=A,W=v(c.perPage||10);function he(){const o=c.SuperAdmin?route("truck.index.admin"):route("truck.index",{tenantSlug:c.tenantSlug});ne.get(o,{perPage:W.value},{preserveState:!0})}function Se(o){if(o){const e=new URL(o);e.searchParams.set("perPage",W.value),ne.get(e.href,{},{only:["entries"]})}}const L=v(""),T=v(""),j=v(!1),z=v(!1),ae=v("Create Entry"),X=v("Create"),oe=v(null),re=v(null),Ce=Qe(),q=v(!1),m=v(null),P=v(!1),N=v(!1),O=v("truckid"),R=v("asc"),k=v({search:"",type:"",make:""}),Ve=[{title:c.tenantSlug?"Dashboard":"Admin Dashboard",href:c.tenantSlug?route("dashboard",{tenantSlug:c.tenantSlug}):route("admin.dashboard")},{title:"Trucks",href:"#"}],Y=["truckid","type","make","fuel","license","vin","inspection_status","inspection_expiry_date","status"],i=se({id:null,truckid:null,type:"daycab",make:"international",fuel:"diesel",license:null,vin:"",tenant_id:c.SuperAdmin?"":null,status:"active",inspection_status:"good",inspection_expiry_date:new Date().toISOString().split("T")[0]});se({csv_file:null});const Ae=se({}),B=de(()=>{let o=[...c.entries.data];if(k.value.search){const e=k.value.search.toLowerCase();o=o.filter(a=>{var d;return String(a.truckid).includes(e)||((d=a.vin)==null?void 0:d.toLowerCase().includes(e))})}return k.value.type&&(o=o.filter(e=>{var a;return((a=e.type)==null?void 0:a.toLowerCase())===k.value.type.toLowerCase()})),k.value.make&&(o=o.filter(e=>{var a;return((a=e.make)==null?void 0:a.toLowerCase())===k.value.make.toLowerCase()})),k.value.status&&(o=o.filter(e=>e.status===k.value.status)),o.sort((e,a)=>{let d=e[O.value],V=a[O.value];return d===null?1:V===null?-1:(typeof d=="string"&&(d=d.toLowerCase(),V=V.toLowerCase()),d<V?R.value==="asc"?-1:1:d>V?R.value==="asc"?1:-1:0)}),o});function De(o){O.value===o?R.value=R.value==="asc"?"desc":"asc":(O.value=o,R.value="asc")}function ue(){}function Me(){k.value={search:"",type:"",make:""}}function Te(){i.reset(),i.status="active",i.tenant_id=null,ae.value="Create Truck",X.value="Create",j.value=!0}function $e(o){i.id=o.id,i.truckid=o.truckid,i.type=o.type?o.type.toLowerCase():"",i.make=o.make?o.make.toLowerCase():"",i.fuel=o.fuel,i.license=o.license,i.vin=o.vin,i.status=o.status,i.tenant_id=o.tenant_id,i.inspection_status=o.inspection_status||"good",i.inspection_expiry_date=o.inspection_expiry_date||new Date().toISOString().split("T")[0],ae.value="Edit Truck",X.value="Update",j.value=!0}function ie(){j.value=!1}function Ee(){const o={truckid:Number(i.truckid),type:i.type,make:i.make,fuel:i.fuel,license:Number(i.license),vin:i.vin,status:i.status,tenant_id:i.tenant_id,inspection_status:i.inspection_status,inspection_expiry_date:i.inspection_expiry_date};i.id?i.put(c.SuperAdmin?route("truck.update.admin",[i.id]):route("truck.update",[c.tenantSlug,i.id]),{data:o,onSuccess:()=>{T.value="Truck updated successfully.",ie()},onError:()=>alert("Error updating truck")}):i.post(c.SuperAdmin?route("truck.store.admin"):route("truck.store",c.tenantSlug),{data:o,onSuccess:()=>{T.value="Truck created successfully.",ie()},onError:()=>alert("Error creating truck")})}function Ie(o){re.value=o,z.value=!0}function Ue(){Ae.delete(c.SuperAdmin?route("truck.destroy.admin",[re.value]):route("truck.destroy",[c.tenantSlug,re.value]),{onSuccess:()=>{T.value="Truck deleted successfully.",z.value=!1}})}function Le(){var e,a;if(B.value.length===0){L.value="No data available to export",setTimeout(()=>{L.value=""},3e3);return}const o=c.SuperAdmin?route("truck.export.admin"):route("truck.export",c.tenantSlug);(e=oe.value)==null||e.setAttribute("action",o),(a=oe.value)==null||a.submit()}function Ne(o){return o?new Date(o+"T00:00:00").toLocaleDateString():"—"}we(T,o=>{o&&setTimeout(()=>{T.value=""},5e3)});const S=v([]),G=v(!1),Be=de(()=>B.value.length>0&&B.value.every(o=>S.value.includes(o.id)));function Fe(o){o.target.checked?S.value=B.value.map(e=>e.id):S.value=[]}function Pe(){S.value.length>0&&(G.value=!0)}function Re(){const o=se({ids:S.value}),e=c.SuperAdmin?"truck.destroyBulk.admin":"truck.destroyBulk",a=c.SuperAdmin?{}:{tenantSlug:c.tenantSlug};o.delete(route(e,a),{preserveScroll:!0,onSuccess:()=>{T.value=`${S.value.length} trucks deleted successfully.`,S.value=[],G.value=!1},onError:d=>{console.error(d),alert("Error deleting trucks")}})}const be=v(!1),je=de(()=>"/storage/upload-data-temps/Trucks Template.csv");Ke(()=>{const o=e=>{be.value&&!e.target.closest(".relative")&&(be.value=!1)};document.addEventListener("click",o),Ze(()=>{document.removeEventListener("click",o)})});function ze(o){var V;const e=(V=o.target.files)==null?void 0:V[0];if(!e)return;P.value=!0;const a=new FormData;a.append("file",e);const d=c.SuperAdmin?route("truck.validateImport.admin"):route("truck.validateImport",{tenantSlug:c.tenantSlug});ne.post(d,a,{forceFormData:!0,preserveScroll:!0,onFinish:()=>{P.value=!1,o.target.value=""},onError:()=>{P.value=!1,L.value="Failed to validate CSV file",o.target.value=""}})}function qe(){var e;if(!m.value||m.value.header_error||(((e=m.value.summary)==null?void 0:e.invalid)??0)>0)return;N.value=!0;const o=c.SuperAdmin?route("truck.confirmImport.admin"):route("truck.confirmImport",{tenantSlug:c.tenantSlug});ne.post(o,{},{preserveScroll:!0,onSuccess:()=>{var a;T.value=`Successfully imported ${((a=m.value.summary)==null?void 0:a.valid)??0} rows`,ke()},onError:()=>{L.value="Import failed"},onFinish:()=>{N.value=!1}})}function Oe(){const o=c.SuperAdmin?route("truck.downloadErrorReport.admin"):route("truck.downloadErrorReport",{tenantSlug:c.tenantSlug});window.location.href=o}function ke(){q.value=!1,m.value=null,P.value=!1,N.value=!1}return we(()=>{var o;return(o=Ce.props.flash)==null?void 0:o.importValidation},o=>{o&&(o.results&&(m.value=o.results,o.header_error&&(m.value.header_error=o.header_error),q.value=!0),o.message&&(L.value=o.message))},{immediate:!0}),(o,e)=>(u(),w(Je,{breadcrumbs:Ve,tenantSlug:A.tenantSlug,permissions:c.permissions},{default:n(()=>[s(t(et),{title:"Trucks"}),l("div",tt,[T.value?(u(),w(t(ge),{key:0,variant:"success"},{default:n(()=>[s(t(xe),null,{default:n(()=>e[24]||(e[24]=[r("Success")])),_:1}),s(t(ye),null,{default:n(()=>[r(f(T.value),1)]),_:1})]),_:1})):g("",!0),L.value?(u(),w(t(ge),{key:1,variant:"destructive"},{default:n(()=>[s(t(xe),null,{default:n(()=>e[25]||(e[25]=[r("Error")])),_:1}),s(t(ye),null,{default:n(()=>[r(f(L.value),1)]),_:1})]),_:1})):g("",!0),l("div",lt,[e[29]||(e[29]=l("h1",{class:"text-lg md:text-xl lg:text-2xl font-bold"},"Truck Management",-1)),l("div",st,[s(t(y),{class:"px-2 py-0 md:px-4 md:py-2",onClick:Te,variant:"default"},{default:n(()=>[s(b,{name:"plus",class:"mr-1 h-4 w-4 md:mr-2"}),e[26]||(e[26]=r(" Create New Truck "))]),_:1}),S.value.length>0?(u(),w(t(y),{key:0,class:"px-2 py-0 md:px-4 md:py-2",onClick:e[0]||(e[0]=a=>Pe()),variant:"destructive"},{default:n(()=>[s(b,{name:"trash",class:"mr-1 h-4 w-4 md:mr-2"}),r(" Delete Selected ("+f(S.value.length)+") ",1)]),_:1})):g("",!0),o.permissionNames.includes("trucks.import")?(u(),w(t(y),{key:1,onClick:e[1]||(e[1]=a=>q.value=!0),variant:"secondary",class:"px-2 py-0 md:px-4 md:py-2 shadow-sm hover:shadow transition-all"},{default:n(()=>[s(b,{name:"upload",class:"mr-1 h-4 w-4 md:mr-2"}),e[27]||(e[27]=r(" Import CSV "))]),_:1})):g("",!0),s(t(y),{class:"px-2 py-0 md:px-4 md:py-2",onClick:_e(Le,["prevent"]),variant:"outline"},{default:n(()=>[s(b,{name:"download",class:"mr-1 h-4 w-4 md:mr-2"}),e[28]||(e[28]=r(" Download CSV "))]),_:1})])]),s(t(H),null,{default:n(()=>[s(t(Xe),{class:"p-2 md:p-4 lg:p-6"},{default:n(()=>[s(t(Ye),{class:"text-lg md:text-xl lg:text-2xl"},{default:n(()=>e[30]||(e[30]=[r("Filters")])),_:1})]),_:1}),s(t(K),{class:"p-2 md:p-4 lg:p-6"},{default:n(()=>[l("div",nt,[l("div",at,[l("div",null,[s(t(h),{for:"search"},{default:n(()=>e[31]||(e[31]=[r("Search")])),_:1}),s(t(Z),{class:"py-1 px-1 md:px-2 md:py-1 h-9 lg:px-3 lg:py-2 lg:h-10",id:"search",modelValue:k.value.search,"onUpdate:modelValue":e[2]||(e[2]=a=>k.value.search=a),type:"text",placeholder:"Search by truck ID or VIN...",onInput:ue},null,8,["modelValue"])]),l("div",null,[s(t(h),{for:"type"},{default:n(()=>e[32]||(e[32]=[r("Type")])),_:1}),D(l("select",{id:"type","onUpdate:modelValue":e[3]||(e[3]=a=>k.value.type=a),class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onChange:ue},e[33]||(e[33]=[l("option",{value:""},"All Types",-1),l("option",{value:"daycab"},"Daycab",-1),l("option",{value:"sleepercab"},"Sleepercab",-1)]),544),[[E,k.value.type]])]),l("div",null,[s(t(h),{for:"make"},{default:n(()=>e[34]||(e[34]=[r("Make")])),_:1}),D(l("select",{id:"make","onUpdate:modelValue":e[4]||(e[4]=a=>k.value.make=a),class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onChange:ue},e[35]||(e[35]=[l("option",{value:""},"All Makes",-1),l("option",{value:"international"},"International",-1),l("option",{value:"kenworth"},"Kenworth",-1),l("option",{value:"peterbilt"},"Peterbilt",-1),l("option",{value:"volvo"},"Volvo",-1),l("option",{value:"freightliner"},"Freightliner",-1)]),544),[[E,k.value.make]])])]),s(t(y),{onClick:Me,variant:"ghost",size:"sm"},{default:n(()=>[s(b,{name:"rotate_ccw",class:"mr-2 h-4 w-4"}),e[36]||(e[36]=r(" Reset "))]),_:1})])]),_:1})]),_:1}),s(t(H),{class:"mx-auto max-w-[95vw] md:max-w-[64vw] lg:max-w-full overflow-x-auto"},{default:n(()=>[s(t(K),{class:"p-0"},{default:n(()=>[l("div",ot,[s(t(fe),{class:"relative h-[500px] overflow-auto"},{default:n(()=>[s(t(me),null,{default:n(()=>[s(t(F),{class:"sticky top-0 z-10 border-b bg-background hover:bg-background"},{default:n(()=>[s(t(I),{class:"w-[50px]"},{default:n(()=>[l("div",rt,[l("input",{type:"checkbox",onChange:Fe,checked:Be.value,class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ut)])]),_:1}),A.SuperAdmin?(u(),w(t(I),{key:0},{default:n(()=>e[37]||(e[37]=[r("Company Name")])),_:1})):g("",!0),(u(),p(x,null,C(Y,a=>s(t(I),{key:a,class:"cursor-pointer",onClick:d=>De(a)},{default:n(()=>[l("div",it,[a==="inspection_status"?(u(),p(x,{key:0},[r(" Annual Inspection Status ")],64)):a==="inspection_expiry_date"?(u(),p(x,{key:1},[r(" Annual Inspection Expiration Date ")],64)):a==="status"?(u(),p(x,{key:2},[r(" Status ")],64)):(u(),p(x,{key:3},[r(f(a.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase())),1)],64)),O.value===a?(u(),p("div",dt,[R.value==="asc"?(u(),p("svg",pt,e[38]||(e[38]=[l("path",{d:"M8 15l4-4 4 4"},null,-1)]))):(u(),p("svg",ft,e[39]||(e[39]=[l("path",{d:"M16 9l-4 4-4-4"},null,-1)])))])):(u(),p("div",mt,e[40]||(e[40]=[l("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M8 10l4-4 4 4"}),l("path",{d:"M16 14l-4 4-4-4"})],-1)])))])]),_:2},1032,["onClick"])),64)),s(t(I),null,{default:n(()=>e[41]||(e[41]=[r("Actions")])),_:1})]),_:1})]),_:1}),s(t(ce),null,{default:n(()=>[B.value.length===0?(u(),w(t(F),{key:0},{default:n(()=>[s(t(M),{colspan:A.SuperAdmin?Y.length+3:Y.length+2,class:"py-8 text-center"},{default:n(()=>e[42]||(e[42]=[r(" No trucks found matching your criteria ")])),_:1},8,["colspan"])]),_:1})):g("",!0),(u(!0),p(x,null,C(B.value,a=>(u(),w(t(F),{key:a.id,class:"hover:bg-muted/50"},{default:n(()=>[s(t(M),{class:"text-center"},{default:n(()=>[D(l("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":e[5]||(e[5]=d=>S.value=d),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,8,ct),[[We,S.value]])]),_:2},1024),A.SuperAdmin?(u(),w(t(M),{key:0},{default:n(()=>{var d;return[r(f(((d=a.tenant)==null?void 0:d.name)??"—"),1)]}),_:2},1024)):g("",!0),(u(),p(x,null,C(Y,d=>s(t(M),{key:d,class:"whitespace-nowrap"},{default:n(()=>[d==="status"?(u(),p("span",{key:0,class:pe({"text-green-600":a[d]==="active","text-red-600":a[d]==="inactive","text-blue-600":a[d]==="Returned to AMZ"})},f(a[d]),3)):d==="inspection_status"?(u(),p("span",{key:1,class:pe(a[d]==="good"?"text-green-600":"text-red-600")},f(a[d]==="good"?"Good":"Expired"),3)):d==="inspection_expiry_date"?(u(),p(x,{key:2},[r(f(Ne(a[d])),1)],64)):(u(),p(x,{key:3},[r(f(typeof a[d]=="string"?a[d].charAt(0).toUpperCase()+a[d].slice(1):a[d]),1)],64))]),_:2},1024)),64)),s(t(M),null,{default:n(()=>[l("div",vt,[s(t(y),{onClick:d=>$e(a),variant:"warning",size:"sm"},{default:n(()=>[s(b,{name:"pencil",class:"mr-1 h-4 w-4"}),e[43]||(e[43]=r(" Edit "))]),_:2},1032,["onClick"]),s(t(y),{onClick:d=>Ie(a.id),variant:"destructive",size:"sm"},{default:n(()=>[s(b,{name:"trash",class:"mr-1 h-4 w-4"}),e[44]||(e[44]=r(" Delete "))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),A.entries.links?(u(),p("div",gt,[l("div",xt,[l("div",yt,[l("span",null,"Showing "+f(B.value.length)+" of "+f(A.entries.data.length)+" entries",1),l("div",bt,[e[45]||(e[45]=l("span",{class:"text-sm"},"Show:",-1)),D(l("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>W.value=a),onChange:he,class:"h-8 rounded-md border border-input bg-background px-2 py-1 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[(u(),p(x,null,C([10,25,50,100],a=>l("option",{key:a,value:a},f(a),9,kt)),64))],544),[[E,W.value]])])]),l("div",wt,[(u(!0),p(x,null,C(A.entries.links,a=>(u(),w(t(y),{key:a.label,onClick:d=>Se(a.url),disabled:!a.url,variant:"ghost",size:"sm",class:pe(["mx-1",{"border-primary bg-primary/10 text-primary":a.active}])},{default:n(()=>[l("span",{innerHTML:a.label},null,8,_t)]),_:2},1032,["onClick","disabled","class"]))),128))])])])):g("",!0)]),_:1})]),_:1}),s(t(J),{open:j.value,"onUpdate:open":e[17]||(e[17]=a=>j.value=a)},{default:n(()=>[s(t(Q),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-4xl"},{default:n(()=>[s(t(te),{class:"px-4 sm:px-6"},{default:n(()=>[s(t(le),{class:"text-lg sm:text-xl"},{default:n(()=>[r(f(ae.value),1)]),_:1}),s(t(ee),{class:"text-xs sm:text-sm"},{default:n(()=>[r(" Fill in the details to "+f(X.value.toLowerCase())+" a truck. ",1)]),_:1})]),_:1}),l("form",{onSubmit:_e(Ee,["prevent"]),class:"grid max-h-[75vh] grid-cols-1 gap-2 overflow-y-auto p-4 sm:grid-cols-2 sm:gap-3 sm:p-6"},[A.SuperAdmin?(u(),p("div",ht,[s(t(h),{for:"tenant"},{default:n(()=>e[46]||(e[46]=[r("Company Name")])),_:1}),l("div",St,[D(l("select",{id:"tenant","onUpdate:modelValue":e[7]||(e[7]=a=>t(i).tenant_id=a),class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[47]||(e[47]=l("option",{value:""},"Select Company",-1)),(u(!0),p(x,null,C(A.tenants,a=>(u(),p("option",{key:a.id,value:a.id},f(a.name),9,Ct))),128))],512),[[E,t(i).tenant_id]]),e[48]||(e[48]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])])):g("",!0),l("div",Vt,[s(t(h),{for:"truckid"},{default:n(()=>e[49]||(e[49]=[r("Truck ID")])),_:1}),s(t(Z),{id:"truckid",modelValue:t(i).truckid,"onUpdate:modelValue":e[8]||(e[8]=a=>t(i).truckid=a),modelModifiers:{number:!0},type:"number",required:""},null,8,["modelValue"])]),l("div",At,[s(t(h),{for:"type"},{default:n(()=>e[50]||(e[50]=[r("Type")])),_:1}),l("div",Dt,[D(l("select",{id:"type","onUpdate:modelValue":e[9]||(e[9]=a=>t(i).type=a),class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:""},e[51]||(e[51]=[l("option",{value:"daycab"},"Daycab",-1),l("option",{value:"sleepercab"},"Sleepercab",-1)]),512),[[E,t(i).type]]),e[52]||(e[52]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",Mt,[s(t(h),{for:"make"},{default:n(()=>e[53]||(e[53]=[r("Make")])),_:1}),l("div",Tt,[D(l("select",{id:"make","onUpdate:modelValue":e[10]||(e[10]=a=>t(i).make=a),class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:""},e[54]||(e[54]=[l("option",{value:"international"},"International",-1),l("option",{value:"kenworth"},"Kenworth",-1),l("option",{value:"peterbilt"},"Peterbilt",-1),l("option",{value:"volvo"},"Volvo",-1),l("option",{value:"freightliner"},"Freightliner",-1)]),512),[[E,t(i).make]]),e[55]||(e[55]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",$t,[s(t(h),{for:"fuel"},{default:n(()=>e[56]||(e[56]=[r("Fuel")])),_:1}),l("div",Et,[D(l("select",{id:"fuel","onUpdate:modelValue":e[11]||(e[11]=a=>t(i).fuel=a),class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:""},e[57]||(e[57]=[l("option",{value:"diesel"},"Diesel",-1),l("option",{value:"cng"},"CNG",-1)]),512),[[E,t(i).fuel]]),e[58]||(e[58]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",It,[s(t(h),{for:"license"},{default:n(()=>e[59]||(e[59]=[r("License")])),_:1}),s(t(Z),{id:"license",modelValue:t(i).license,"onUpdate:modelValue":e[12]||(e[12]=a=>t(i).license=a),modelModifiers:{number:!0},type:"number",min:"0",required:""},null,8,["modelValue"])]),l("div",Ut,[s(t(h),{for:"vin"},{default:n(()=>e[60]||(e[60]=[r("VIN")])),_:1}),s(t(Z),{id:"vin",modelValue:t(i).vin,"onUpdate:modelValue":e[13]||(e[13]=a=>t(i).vin=a),type:"text",required:""},null,8,["modelValue"])]),l("div",Lt,[s(t(h),{for:"inspection_status"},{default:n(()=>e[61]||(e[61]=[r("Annual Inspection Status")])),_:1}),l("div",Nt,[D(l("select",{id:"inspection_status","onUpdate:modelValue":e[14]||(e[14]=a=>t(i).inspection_status=a),class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:""},e[62]||(e[62]=[l("option",{value:"good"},"Good",-1),l("option",{value:"expired"},"Expired",-1)]),512),[[E,t(i).inspection_status]]),e[63]||(e[63]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),l("div",Bt,[s(t(h),{for:"inspection_expiry_date"},{default:n(()=>e[64]||(e[64]=[r("Annual Inspection Expiry Date")])),_:1}),s(t(Z),{id:"inspection_expiry_date",modelValue:t(i).inspection_expiry_date,"onUpdate:modelValue":e[15]||(e[15]=a=>t(i).inspection_expiry_date=a),type:"date",required:""},null,8,["modelValue"])]),l("div",Ft,[s(t(h),{for:"status"},{default:n(()=>e[65]||(e[65]=[r("Status")])),_:1}),l("div",Pt,[D(l("select",{id:"status","onUpdate:modelValue":e[16]||(e[16]=a=>t(i).status=a),class:"flex h-10 w-full appearance-none items-center rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:""},e[66]||(e[66]=[l("option",{value:"active"},"Active",-1),l("option",{value:"inactive"},"Inactive",-1),l("option",{value:"Returned to AMZ"},"Returned to AMZ",-1)]),512),[[E,t(i).status]]),e[67]||(e[67]=l("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[l("svg",{class:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))])]),s(t(ve),{class:"col-span-2 mt-4"},{default:n(()=>[s(t(y),{type:"button",onClick:ie,variant:"outline"},{default:n(()=>e[68]||(e[68]=[r(" Cancel ")])),_:1}),s(t(y),{type:"submit",variant:"default"},{default:n(()=>[r(f(X.value),1)]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["open"]),s(t(J),{open:z.value,"onUpdate:open":e[19]||(e[19]=a=>z.value=a)},{default:n(()=>[s(t(Q),null,{default:n(()=>[s(t(te),null,{default:n(()=>[s(t(le),null,{default:n(()=>e[69]||(e[69]=[r("Confirm Deletion")])),_:1}),s(t(ee),null,{default:n(()=>e[70]||(e[70]=[r(" Are you sure you want to delete this truck? This action cannot be undone. ")])),_:1})]),_:1}),s(t(ve),{class:"mt-4"},{default:n(()=>[s(t(y),{type:"button",onClick:e[18]||(e[18]=a=>z.value=!1),variant:"outline"},{default:n(()=>e[71]||(e[71]=[r(" Cancel ")])),_:1}),s(t(y),{type:"button",onClick:Ue,variant:"destructive"},{default:n(()=>e[72]||(e[72]=[r(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),s(t(J),{open:G.value,"onUpdate:open":e[22]||(e[22]=a=>G.value=a)},{default:n(()=>[s(t(Q),null,{default:n(()=>[s(t(te),null,{default:n(()=>[s(t(le),null,{default:n(()=>e[73]||(e[73]=[r("Confirm Bulk Deletion")])),_:1}),s(t(ee),null,{default:n(()=>[r(" Are you sure you want to delete "+f(S.value.length)+" trucks? This action cannot be undone. ",1)]),_:1})]),_:1}),s(t(ve),{class:"mt-4"},{default:n(()=>[s(t(y),{type:"button",onClick:e[20]||(e[20]=a=>G.value=!1),variant:"outline"},{default:n(()=>e[74]||(e[74]=[r(" Cancel ")])),_:1}),s(t(y),{type:"button",onClick:e[21]||(e[21]=a=>Re()),variant:"destructive"},{default:n(()=>e[75]||(e[75]=[r(" Delete Selected ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),s(t(J),{open:q.value,"onUpdate:open":e[23]||(e[23]=a=>q.value=a)},{default:n(()=>[s(t(Q),{class:"max-w-[95vw] sm:max-w-[90vw] md:max-w-5xl max-h-[90vh] overflow-hidden flex flex-col"},{default:n(()=>{var a,d,V;return[s(t(te),{class:"px-4 sm:px-6 border-b pb-3"},{default:n(()=>[l("div",Rt,[s(b,{name:"upload",class:"h-5 w-5 text-primary"}),s(t(le),{class:"text-lg sm:text-xl font-semibold"},{default:n(()=>e[76]||(e[76]=[r(" Import Trucks ")])),_:1})]),s(t(ee),{class:"text-xs sm:text-sm mt-1 text-muted-foreground"},{default:n(()=>e[77]||(e[77]=[r(" Upload a CSV file to import trucks. The file will be validated before import. ")])),_:1})]),_:1}),l("div",jt,[m.value?(u(),p("div",Xt,[(a=m.value.headers)!=null&&a.length?(u(),p("div",Yt,[l("div",Jt,[e[81]||(e[81]=l("div",{class:"text-sm font-semibold"},"CSV Headers",-1)),l("div",Qt,f(m.value.headers.length)+" columns ",1)]),l("div",el,[(u(!0),p(x,null,C(m.value.headers,_=>(u(),p("span",{key:_,class:"rounded-full bg-muted px-2 py-0.5 text-xs"},f(_),1))),128))])])):g("",!0),l("div",tl,[s(t(H),{class:"border-2"},{default:n(()=>[s(t(K),{class:"p-4 text-center"},{default:n(()=>[l("div",ll,f(m.value.summary.total),1),e[82]||(e[82]=l("div",{class:"text-sm text-muted-foreground"},"Total Rows",-1))]),_:1})]),_:1}),s(t(H),{class:"border-2 border-green-500/50 bg-green-50 dark:bg-green-900/10"},{default:n(()=>[s(t(K),{class:"p-4 text-center"},{default:n(()=>[l("div",sl,f(m.value.summary.valid),1),e[83]||(e[83]=l("div",{class:"text-sm text-muted-foreground"},"Valid",-1))]),_:1})]),_:1}),s(t(H),{class:"border-2 border-red-500/50 bg-red-50 dark:bg-red-900/10"},{default:n(()=>[s(t(K),{class:"p-4 text-center"},{default:n(()=>[l("div",nl,f(m.value.summary.invalid),1),e[84]||(e[84]=l("div",{class:"text-sm text-muted-foreground"},"Invalid",-1))]),_:1})]),_:1})]),m.value.header_error?(u(),w(t(ge),{key:1,variant:"destructive"},{default:n(()=>[s(t(xe),{class:"flex items-center gap-2"},{default:n(()=>[s(b,{name:"alert_circle",class:"h-5 w-5"}),e[85]||(e[85]=r(" Header Error "))]),_:1}),s(t(ye),null,{default:n(()=>[r(f(m.value.header_error),1)]),_:1})]),_:1})):g("",!0),(d=m.value.invalid)!=null&&d.length?(u(),p("div",al,[l("div",ol,[l("h3",rl,[s(b,{name:"alert-triangle",class:"h-5 w-5"}),r(" Validation Errors ("+f(m.value.invalid.length)+") ",1)]),s(t(y),{onClick:Oe,variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:n(()=>[s(b,{name:"download",class:"h-4 w-4"}),e[86]||(e[86]=r(" Download Error Report "))]),_:1})]),l("div",ul,[l("div",il,[s(t(fe),null,{default:n(()=>[s(t(me),{class:"sticky top-0 bg-background"},{default:n(()=>[s(t(F),null,{default:n(()=>[s(t(I),{class:"w-20"},{default:n(()=>e[87]||(e[87]=[r("Row #")])),_:1}),s(t(I),null,{default:n(()=>e[88]||(e[88]=[r("Preview")])),_:1}),s(t(I),null,{default:n(()=>e[89]||(e[89]=[r("Errors")])),_:1})]),_:1})]),_:1}),s(t(ce),null,{default:n(()=>[(u(!0),p(x,null,C(m.value.invalid,_=>(u(),w(t(F),{key:_.rowNumber,class:"hover:bg-muted/50"},{default:n(()=>[s(t(M),{class:"font-medium"},{default:n(()=>[r(f(_.rowNumber),1)]),_:2},1024),s(t(M),{class:"text-sm text-muted-foreground"},{default:n(()=>{var U;return[l("div",dl,[(u(!0),p(x,null,C(_.preview||[],$=>(u(),p("span",{key:$.key,class:"whitespace-nowrap"},[l("span",pl,f($.label)+":",1),r(" "+f($.value),1)]))),128)),(U=_.preview)!=null&&U.length?g("",!0):(u(),p("span",fl,"—"))])]}),_:2},1024),s(t(M),null,{default:n(()=>{var U;return[l("div",ml,[(u(!0),p(x,null,C(_.errors||[],($,Ge)=>(u(),p("div",{key:Ge,class:"text-xs text-red-600 flex items-start gap-1"},[s(b,{name:"x-circle",class:"h-3 w-3 mt-0.5 flex-shrink-0"}),l("span",null,f($),1)]))),128)),(U=_.errors)!=null&&U.length?g("",!0):(u(),p("div",cl," — "))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])):g("",!0),(V=m.value.valid)!=null&&V.length?(u(),p("div",vl,[l("h3",gl,[s(b,{name:"check-circle",class:"h-5 w-5"}),r(" Valid Rows ("+f(m.value.valid.length)+") ",1)]),e[92]||(e[92]=l("div",{class:"text-sm text-muted-foreground mb-2"}," Showing first 5 valid rows ",-1)),l("div",xl,[s(t(fe),null,{default:n(()=>[s(t(me),null,{default:n(()=>[s(t(F),null,{default:n(()=>[s(t(I),null,{default:n(()=>e[90]||(e[90]=[r("Row #")])),_:1}),s(t(I),null,{default:n(()=>e[91]||(e[91]=[r("Preview")])),_:1})]),_:1})]),_:1}),s(t(ce),null,{default:n(()=>[(u(!0),p(x,null,C(m.value.valid.slice(0,5),_=>(u(),w(t(F),{key:_.rowNumber},{default:n(()=>[s(t(M),{class:"font-medium"},{default:n(()=>[r(f(_.rowNumber),1)]),_:2},1024),s(t(M),{class:"text-sm"},{default:n(()=>{var U;return[l("div",yl,[(u(!0),p(x,null,C(_.preview||[],$=>(u(),p("span",{key:$.key,class:"whitespace-nowrap"},[l("span",bl,f($.label)+":",1),r(" "+f($.value),1)]))),128)),(U=_.preview)!=null&&U.length?g("",!0):(u(),p("span",kl,"—"))])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])):g("",!0)])):(u(),p("div",zt,[l("div",qt,[l("div",Ot,[s(b,{name:"file-spreadsheet",class:"h-12 w-12 text-muted-foreground mb-3"}),l("label",Gt,[e[78]||(e[78]=l("span",{class:"text-sm font-medium text-primary hover:underline"},"Choose CSV file",-1)),l("input",{type:"file",class:"hidden",onChange:ze,accept:".csv,.txt",disabled:P.value},null,40,Ht)]),e[79]||(e[79]=l("p",{class:"text-xs text-muted-foreground mt-2"},"or drag and drop",-1))]),l("div",Kt,[s(b,{name:"info",class:"h-4 w-4"}),l("a",{href:je.value,download:"",class:"text-primary hover:underline"}," Download CSV Template ",8,Zt)]),P.value?(u(),p("div",Wt,e[80]||(e[80]=[l("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"},null,-1),l("span",{class:"text-sm text-muted-foreground"},"Validating CSV file...",-1)]))):g("",!0)])]))]),l("div",wl,[s(t(y),{onClick:ke,variant:"outline",disabled:N.value},{default:n(()=>e[93]||(e[93]=[r("Close")])),_:1},8,["disabled"]),m.value&&m.value.summary.valid>0?(u(),w(t(y),{key:0,onClick:qe,variant:"default",disabled:N.value||m.value.summary.invalid>0||!!m.value.header_error,class:"flex items-center gap-2"},{default:n(()=>[N.value?(u(),p("div",_l)):(u(),w(b,{key:1,name:"check",class:"h-4 w-4"})),r(" "+f(N.value?"Importing...":`Import ${m.value.summary.valid} Rows`),1)]),_:1},8,["disabled"])):g("",!0)])]}),_:1})]),_:1},8,["open"]),l("form",{ref_key:"exportForm",ref:oe,method:"GET",class:"hidden"},null,512)])]),_:1},8,["tenantSlug","permissions"]))}});export{Kl as default};
